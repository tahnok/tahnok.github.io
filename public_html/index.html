<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>(Fake) Markov Chains</title>
  <meta name="description" content="WARNING: The content contained herein may or may not be sensical. Side effects may include laughter, anger, shallow thoughts, deep thoughts and blindness. Reader discretion is advised
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://blog.tahnok.me/">
  <link rel="alternate" type="application/rss+xml" title="(Fake) Markov Chains" href="https://blog.tahnok.me/feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">(Fake) Markov Chains</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
        
          <a class="page-link" href="https://twitter.com/tahnok">@tahnok</a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/pics-from-space-n00bs-guide-to-receive-noaa-weather-satellites.html">Pictures from Space: a n00b's guide to receiving images from NOAA weather satellites</a></h1>
      <p class="post-meta">Sep 9, 2018</p>
    </header>

    <article class="post-content">
      <p>It had been a dream of mine for a while to receive images from space.
I forget where I learned that you could do that, but it sounded so cool I knew I wanted to try.
Around 2 years ago, I finally succeeded in getting images from the NOAA APT weather satellites, but I hadn’t gotten around writing up how I did that until now.</p>

<p>My initial research led to lots of confusing information on many different topics.
What images were being broadcast and how?
What kind of antenna did I absolutely need?
How did I get the software and configure it?
Which were the satellites and how did I figure out when they were overhead?
Hopefully this post will explain what you need to know and what gear you will need.</p>

<p>There are 2 things you need to acquire:</p>

<ol>
  <li>A receiver</li>
  <li>An antenna</li>
</ol>

<p>And 3 things you need to know:</p>

<ol>
  <li>How to figure out when you can receive an image from a satellite</li>
  <li>How to set up your receiver properly</li>
  <li>How to decode the image you receive</li>
</ol>

<p>I’m gonna focus on the cheapest / easiest setup possible because that worked for me.</p>

<h2 id="background-what-is-being-transmitted-and-by-whom">Background: what is being transmitted and by whom?</h2>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/c/c0/NOAA-M-01.jpg" alt="Artistic rendering of a NOAA satellite" /></p>

<p>Before we jump into the details of how to receive the images, we should first talk about who is broadcasting the images and how they are encoded.</p>

<p>The National Oceanic and Atmostpheric Association (NOAA) of the USA has several satellites in orbit to help them map weather.
Three of these satellites (<a href="https://en.wikipedia.org/wiki/NOAA-15">NOAA-15</a>, <a href="https://en.wikipedia.org/wiki/NOAA-18">NOAA-18</a> and <a href="https://en.wikipedia.org/wiki/NOAA-18">NOAA-19</a>) are of interest to us because they broadcast images using <a href="https://en.wikipedia.org/wiki/Automatic_picture_transmission">Automatic Picture Transmission</a> at a frequency of 137 MHz.</p>

<p>Why are they of interest?</p>

<ol>
  <li>137 MHz antennas are pretty easy to build</li>
  <li>137 MHz receivers are really cheap</li>
  <li>APT is an old protocol and there are lots of tools to decode it</li>
</ol>

<p>These satellites are in a sun-synchronous orbit so they are always looking at the earth with the same amount of light.
They aren’t geostationary (unlike satelitte TV satelittes) which means they aren’t always overhead.
That just means that we need a tool to calculate when they will be overhead based on where you are.</p>

<h2 id="setup">Setup</h2>

<h3 id="receiver-rtl-sdr">Receiver: RTL-SDR</h3>

<p>For the receiver I am using an RTL-SDR.
This is a device initially intended to receive European TV, but some clever hackers figured out how to turn it into a receiver across a huge range of frequencies.
Importantly for us it can receive ~137 MHz really well, and they are SUPER cheap.
You have a few choices for suppliers.</p>

<p>You can search ebay /
<a href="https://www.amazon.com/NooElec-NESDR-Mini-RTL2832-Antenna/dp/B00P2UOU72/">amazon</a> /
<a href="https://www.aliexpress.com/item/USB-2-0-Software-Radio-DVB-T-RTL2832U-R820T2-SDR-Digital-TV-Receiver-Stick/32506410349.html?spm=2114.search0104.3.1.4baa4658RQzNvA&amp;ws_ab_test=searchweb0_0,searchweb201602_1_10152_10151_10065_10344_10130_10068_10547_10342_10343_10340_10548_10341_10696_10084_10083_10618_10139_10307_10059_100031_10103_10624_10623_10622_10621_10620,searchweb201603_55,ppcSwitch_5&amp;algo_expid=34c8a973-1c12-475a-a4c5-51d2d38d9ac9-0&amp;algo_pvid=34c8a973-1c12-475a-a4c5-51d2d38d9ac9&amp;priceBeautifyAB=0">aliexpress</a> /
<a href="https://www.adafruit.com/product/1497">adafruit</a> for either RTL-SDR or RTL2832U</p>

<p>This is your cheapest option, but the devices you will get here have 2 drawbacks.
First, they need to be frequency corrected.
This just means that if you tell the software to tune to 137 MHz, it will tune to a slightly different frequency (like 137.11MHz instead of 137.10 MHz)</p>

<p>Second, you need an adapter / pigtail to connect to an antenna.
These have a weird mini MCX connector that isn’t standard for radio gear.
Most antennas for commercial / ham use have an SMA, BNC or UHF connector.
Thankfully, you can buy MCX to whatever connectors on ebay / amazon / aliexpress / adafruit as well.
Just search MCX to SMA or MCX to BNC.</p>

<p>Your other option is one of the redesigned / upgraded RTL-SDRs.
I bought one from rtl-sdr.com (a terrible name, but easy to remember the address) because it has an SMA connector and doesn’t need to be calibrated.
Here’s a link to the rtl-sdr.com store and choose the one with the dipole antenna kit: https://www.rtl-sdr.com/buy-rtl-sdr-dvb-t-dongles/</p>

<h3 id="antenna-dipole">Antenna: Dipole</h3>

<p>There are plenty of better antennas for receiving satellites.
If you have looked into weather satellite antennas, you will hear mention of <a href="https://www.youtube.com/watch?v=cjClTnZ4Xh4">the QFH or the double cross dipole</a>.
These are better, but hard to make in terms of skill and in terms of gear required.</p>

<p>Instead, I have had great luck with the simplest antenna: the dipole.</p>

<p>Any dipole designed for 2m / 144 MHz should work, but if you are making your own you should tune it for 137MHz.</p>

<h4 id="bunny-ears">Bunny ears</h4>

<p>One way to make a dipole is to acquire a pair of old TV bunny ears or a similar device.
That’s what I have with the rtl-sdr.com package mentioned above.
If you can extend each side to be 52cm, you should be good to go.</p>

<p><img src="../images/extended_bunny_ears.jpg" alt="extended bunny ears as dipole antenna with dog" /></p>

<h4 id="homemade-dipole">Homemade dipole</h4>

<p>For my first attempt, I built my own antenna.
I did this by buying a length of the thinnest brass rod I could find that would support it’s own weight.
I cut 2 lengths to 52cm.
I calculated this number using this <a href="http://www.kwarc.org/ant-calc.html">online dipole calculator</a></p>

<p>Next, I soldered a bit of wire to both pieces.
Then I got a T-joint made of PVC and tapped these pieces so they were parallel to each other.</p>

<p>Finally, I connected the bits of wire to one of these <a href="https://www.aliexpress.com/item/1-Set-CAT5-To-BNC-Video-And-Power-Balun-Transceiver-Connectors-Male-Female-BNC-Connector-Terminal/32813038993.html">screw terminal BNC connectors</a> that I got from Aliexpress.
This is probably the most weird / hard to find part of this build.
I’ve been thinking of other ways to do this, but so far ordering this and waiting the 35-50 days requried to get something from China is the easiest and the cheapest.</p>

<p>Feel free to use a different connector like SMA if that makes it easier to connect it to your RTL-SDR though.</p>

<p><img src="../images/apt-dipole.png" alt="homebrew dipole" /></p>

<p><img src="../images/dipole_close_up.jpg" alt="homebrew dipole close up" /></p>

<h3 id="finding-passes-iss-tracker">Finding passes: ISS Tracker</h3>

<p>For my first attempts for figuring out when a satellite was overhead (a pass) and thus hearable, I used <a href="https://web.archive.org/web/20171226033343/http://www.wxtoimg.com:80/downloads/">wxtoimg</a>.
We will need this software later, but if you configure your ground station location (options -&gt; ground station location), you can see a list of passes by going to file -&gt; satellite pass list…</p>

<p><img src="../images/wxtoimg-menu-pass.png" alt="wxtoimg satellite pass list location in menu" /></p>

<p><img src="../images/wxtoimg-passlist.png" alt="wxtoimg satellite pass list" /></p>

<p>That worked OK, but I have found something better, if less free, the <a href="https://play.google.com/store/apps/details?id=com.runar.issdetector">ISS Detector Android app</a></p>

<p>It’s poorly named, and a bit clunky to set up but it works really well.
It buzzes when a pass is about to happen.
It shows you the frequency of the satellite and it shows you were it will be coming from.</p>

<p>Once you have the app installed on your phone, go to the overflow menu (the vertical …) and hit extensions and buy the Amateur Radio Satellites package.
Next, go to filters and turn on amateur radio satellites and select the following 3 satellites:</p>

<ul>
  <li>NOAA-15</li>
  <li>NOAA-18</li>
  <li>NOAA-19</li>
</ul>

<p>When you see a good pass (that is something with an elevation over 30 degress, but higher is better) it’s time to find a good spot.</p>

<p><img src="../images/iss_detector.png" alt="ISS detector showing passes" /></p>

<p>I’ve found parks or open are really good, but any spot with a clear view of the sky that’s well away from any buildings will work.</p>

<h3 id="receiving-software-sdrsharp">Receiving software: SDRSharp</h3>

<p>Now that you have an antenna and a receiver, it’s time to you know… receive.</p>

<p>I’m using windows, so I am using <a href="https://airspy.com/download/">SDRSharp</a> (or SDR#).</p>

<p>Once you have that installed, it’s time to set it up.
I recommend following this <a href="https://web.archive.org/web/20181114212055/https://www.rtl-sdr.com/rtl-sdr-quick-start-guide/">guide from rtl-sdr.com</a> as there are is an extra file to download and a specific way to set up the drivers on windows.</p>

<p>Each satellite has a different frequency</p>

<ul>
  <li>NOAA-15: 137.620 MHz</li>
  <li>NOAA-18: 137.913 MHz</li>
  <li>NOAA-19: 137.100 MHz</li>
</ul>

<p>You can tune to that frequency at the top of SDRsharp</p>

<p>Once you have the frequency selected, it’s time to choose the receiving mode.
You want to use the WFM (wide FM) mode and you want to have a have a bandwidth of 55,000 Hz (55 KHz)</p>

<p><img src="../images/configured_sdrsharp.png" alt="SDR sharp configured and showing download" /></p>

<h3 id="decoding-wxtoimg">Decoding: WXtoImg</h3>

<p>The satellites transmit images using an encoding called APT (Automatic Picture Transmission).
If you listen to it, it sounds like repeating deet-deet deet-deet.
You can hear a sample on the <a href="https://www.sigidwiki.com/wiki/Automatic_Picture_Transmission_(APT)">Signal Identification Wiki APT page</a></p>

<p>In order to decode it, I used a program called <a href="https://web.archive.org/web/20171226033343/http://www.wxtoimg.com:80/downloads/">WXtoImg</a>.
The original site that hosted the program is offline at the time of me writing this (August 2018), but it’s still available from archive.org</p>

<p>Once you have it installed, set your ground station location (under options)</p>

<p>You need a way to connect the audio output of SDRSharp to WXtoImg.
If you are lucky, your sound card has some kind of monitor or loopback interface.
I was not lucky, so instead I used <a href="https://www.vb-audio.com/Cable/">VB-Cable Virtual Audio Device</a>.
Once installed, this virtual cable gives you a fake output device and a fake input device that are connected.</p>

<p>I changed SDRSharp to output to “[Windows Direct Sound] CABLE Input” but “[MME] Cable Input” also worked.
(I have no idea what the difference is)</p>

<p>In WXtoImg, I changed the soundcard to use “CABLE Output” by going to options -&gt; recording options -&gt; Common Recording Options</p>

<h2 id="putting-it-together-receive-pictures-from-space">Putting it together: receive PICTURES FROM SPACE</h2>

<ol>
  <li>Use ISS tracker or WXtoImg to find a good pass at a time that works for you</li>
  <li>Get your antenna out and connected to the RTL-SDR</li>
  <li>Launch SDRSharp and tune it to the right frequency for the satellite that will be overhead. Make sure the mode is set right (WFM with 50KHz bandwidth) and the output is set to the CABLE Input</li>
  <li>Launch WXtoImg and make sure the soundcard is set to CABLE Output</li>
  <li>Get WXtoImg to record by going to File -&gt; Record … -&gt; Auto Record</li>
  <li>Watch for the APT signal in SDRSharp. You will have to zoom in a bit, but you should see a series of several spikes</li>
  <li>Point your antenna! Try turning, tilting, or pointing the antenna so that the signal appears stronger. If you hover over the signal in SDR# it will tell you what the SNR is. I have found you need at least -25db</li>
  <li>wait… wxtoimg has a progress bar in the bottom corner. Aim for 100%, but a partial pass still works</li>
  <li>Stop WXtoImg (File -&gt; Stop) and check out your space picture!</li>
</ol>

<p><img src="../images/wxtoimg_and_sdr.png" alt="SDR sharp and wxtoimg decoding a signal" /></p>

<h2 id="results">Results</h2>

<p><img src="../images/noaa15.jpg" alt="NOAA 15 pass over PEI" />
NOAA 15</p>

<p><img src="../images/noaa18.jpg" alt="NOAA 18 pass over PEI" />
NOAA 18</p>

<p><img src="../images/noaa19.jpg" alt="NOAA 19 pass over PEI" />
NOAA 19</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/toggling-pins-in-rust.html">toggling pins in rust</a></h1>
      <p class="post-meta">Jul 8, 2018</p>
    </header>

    <article class="post-content">
      <p>My first goal after getting someone elses good compiling, was to toggle a pin on my own.
I think for my first attempt to generate a frequency, I will just turn a pin on and off at a given rate.</p>

<p>My target frequency is 2600Hz, and if I want to generate a square wave (which I get by turning things on and off) I need to toggle the pin at twice that frequency.
So with a target frequency of 5200Hz, I can now figure out the period which is 0.000192308 seconds or 192 microseconds.</p>

<p>Now that I knew how long a delay to use, I needed to figure out how to actually toggle a pin…
I struggled with the docs a fair amount here.
The example code uses an LED type so I looked at <a href="https://docs.rs/f3/0.6.1/src/f3/led.rs.html#167-169">the source code</a>.
I should have just tried that code directly, but I checked the docs first and got very confused.
The LED uses a <a href="https://docs.rs/stm32f30x-hal/0.2.0/stm32f30x_hal/gpio/gpioe/struct.PEx.html">PEx type</a> which implements <a href="https://docs.rs/embedded-hal/0.2.0/embedded_hal/digital/trait.OutputPin.html">OutputPin</a> but somehow I missed that.
Instead, I was looking at the <a href="https://docs.rs/stm32f30x-hal/0.2.0/stm32f30x_hal/gpio/struct.Output.html">Output</a> type which didn’t seem to have any methods associated with it…</p>

<p>Anyway, the end result is that if you have an <code>OutputPin</code> you can call <code>set_high</code> and <code>set_low</code>.
OutputPin comes from <a href="https://docs.rs/embedded-hal/0.2.1/embedded_hal/">embedded_hal</a> which should theoretically work on all embedded rust targets!</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/project-cerulean-box.html">project CERULEAN BOX</a></h1>
      <p class="post-meta">Jul 4, 2018</p>
    </header>

    <article class="post-content">
      <p>I found a way to combine a bunch of things I have wanted to learn together into one project!</p>

<p>For a while, I have been fascinated with phone phreaking, and specifically the mythical BLUE BOX.
Lots of myths and history surounding it.
I think I can probably still play with it on <a href="http://www.projectmf.org/">Project MF</a>, but we will see.</p>

<p>It seems like a great way to learn more electronics stuff, and some radio adjacent stuff too.
I’ll need to figure out how to generate waves at specfic frequencies and how to combine them.</p>

<p>I happen to have bought an stm32 f3 discovery that seems like a good platform for this.
I think it’s fast enough to bit bang out a wave at 2600Hz?
Guess I will find out!</p>

<p>I also want to do this in rust.
The f3 also seems to have decent rust support.
See the <a href="https://docs.rs/f3/0.6.1/f3/">f3 crate</a> and <a href="https://japaric.github.io/discovery/">discovery</a></p>

<p>I wanted to write up some quick notes of things I learned getting <a href="https://github.com/tahnok/cerulean_box">cerulean box</a> blinking.</p>

<p>Step 1 was to create a new rust project and add the f3 dependency. After that, I copied the <a href="https://docs.rs/f3/0.6.1/f3/examples/_03_blinky/index.html">blinky.rs</a> to my project as <code>main.rs</code></p>

<p>Next I had to add a few more dependencies, <code>cortex-m</code>, <code>cortex-m-rt</code> and <code>panic-semihosting</code>.
This was enough to get rust complaining about an <code>eh_personality</code>.
No idea what that was, but I made it go away by copy the contents of the f3 project’s <a href="https://github.com/tahnok/cerulean_box/blob/de742b6a597fae6d8a96af6cb5bcddff1af15a99/.cargo/config">.cargo/config</a>.
As far as I can tell, this species the target architecture as being <code>thumbv7em-none-eabihf</code> which is ARM (thumbv7 specificall), with no OS and support for hard float.</p>

<p>That was enough to get things compiling, but then gdb would start…
In the f3 example, I was able to type continue but all gdb could do was disassemble main.
It turns out I also needed to copy <a href="https://github.com/tahnok/cerulean_box/blob/de742b6a597fae6d8a96af6cb5bcddff1af15a99/.gdbinit">.gdbinit</a>.
I believe this works because I have <code>set auto-load safe-path /</code> in <code>~/.gdbinit</code>.</p>

<p>After that, I get blinky leds!</p>

<p><img src="https://media.giphy.com/media/3oz8xRF0v9WMAUVLNK/giphy.gif" alt="" /></p>

<h2 id="next-steps">Next steps</h2>

<p>There’s a few things I want to do next.
I need to actually twiddle a pin at a given frequency.
That means learning how timers work probably, maybe interupts if I want to be able to other things.</p>

<p>I also need to figure how this semihosting thing. I think that’s so I can run the code from my laptop, and get error messages, strack traces and breakpoints which seem useful, but… I don’t know how to turn it off.
How to I make a binary I can flash onto the f3 directly?</p>

<p>Adventures for next time!</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/plans-for-a-noaa-weather-satellite-antenna.html">plans for a NOAA weather satellite antenna</a></h1>
      <p class="post-meta">Apr 10, 2017</p>
    </header>

    <article class="post-content">
      <p>One of the things I <em>really</em> want to do with ham radio is listen to SPACE MACHINES (a.k.a satellites).
Technically you don’t need a ham radio license to do this, but I only learned about it after getting mine.</p>

<p>Some of the most interesting looking satellites that anyone can receive are NOAA weather satelittes.
These satellites continuously transmit LIVE IMAGES OF THE EARTH.
As far as I can tell there are 3 in orbit: NOAA-15, NOAA-18 and NOAA-19.
All three of these broadcast black and white images of the globe using <a href="https://en.wikipedia.org/wiki/Automatic_picture_transmission">Automatic Picture Transmission</a>.
They transmit on frequencies around 137 MHz, which can be received using the dirt cheap RTL-SDR.
The transmissions can (apparently) be decoded with <a href="www.wxtoimg.com">wxtoimg</a>.</p>

<p>The only thing that I am currently missing is some kind of antenna.</p>

<p>I’ve done a bunch of research to determine what kind antennas are suitable and I’ve come up with a (not very) short list:</p>

<ul>
  <li>QFH (Quadrifilar helicoidal antenna) or Helical Quad
    <ul>
      <li>https://umarca.blogspot.ca/2013/05/project-8-turnstile-antenna-for-weather.html</li>
      <li>http://jcoppens.com/ant/qfh/calc.en.php</li>
      <li>http://www.housedillon.com/?p=1461</li>
      <li>http://www.instructables.com/id/NOAA-Satellite-Signals-with-a-PVC-QFH-Antenna-and-/</li>
    </ul>
  </li>
  <li>Cross Dipole or Turnstile
    <ul>
      <li>http://www.thornett.net/Rosliston_Archive_2009-11/html/cross_dipole_antenna.html</li>
      <li>https://imgur.com/a/qczZW</li>
      <li>https://www.digitalham.co.uk/turnstile-antenna/</li>
      <li>https://umarca.blogspot.ca/2013/05/project-8-turnstile-antenna-for-weather.html</li>
    </ul>
  </li>
  <li>IOio
    <ul>
      <li>http://www.ea4cax.com/paginaea4cyq/Antenaioio/ioioingles.pdf</li>
      <li>http://www.kj6akq.com/blog/2010/02/building-an-ioio-satellite-antenna/</li>
    </ul>
  </li>
  <li>Yaggi-Uda
    <ul>
      <li>http://ve2zaz.net/Arrow_Ant/Arrow_Style_Ant.htm</li>
      <li>http://www.fredspinner.com/W0FMS/CheapYagi/vjbcy.html</li>
      <li>https://web.archive.org/web/20110102162129/http://www.amsat.org/amsat-new/information/faqs/crow/JulAug06AmsatJournal.pdf (444MHz)</li>
      <li>https://web.archive.org/web/20110102161932/http://www.amsat.org/amsat-new/information/faqs/crow/SepOct06AmsatJournal.pdf (146MHz)</li>
      <li>http://neodux.com/?view=story.php&amp;post_id=451</li>
      <li>http://makezine.com/projects/make-24/homemade-yagi-antenna/</li>
    </ul>
  </li>
</ul>

<p>I’ve been working on the cross dipole since it seems to be the simplest to construct and deploy.
Will probably end up building a Yaggi-uda at some point as well for dat sweet gain, but it’s too directional if I want to set up a NOAA reception station permananently somewhere.</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/cju-antenna.html">CJU Antenna</a></h1>
      <p class="post-meta">Nov 26, 2016</p>
    </header>

    <article class="post-content">
      <p>Ok, I know I just posted about Moxon antennas, but doing an image search for moxon antennas led me to the CJU antenna.</p>

<p>Apparently CJU stands for Canary Jail Umbrella because the author of the article who made it popular constructed it out of the tubing used in canary cages (or jails) and wire from a broken antenna.
It’s designed for use talking to satellites which I am interested in, and it’s very small and looks pretty easy to build.</p>

<p>I think it’s a 2 element yagi optimized for 70cm/UHF, and it’s also known as an <a href="http://www.ea4cax.com/paginaea4cyq/Antenaioio/ioioingles.pdf">IOio</a></p>

<p>It’s constructed with a rectangle of wire, and a length of wire mounted to a small boom.
The rectangular element is driven, and the length of wire is the parasitic/reflector element.</p>

<p><em>LINKS</em></p>

<ul>
  <li><a href="http://www.ea4cax.com/paginaea4cyq/cju/cjuingles.pdf">THE ‘CJU’ ANTENNA</a></li>
  <li><a href="http://www.transmission1.net/viewtopic.php?t=17914#p147086">CJU Antenna</a></li>
  <li><a href="http://www.ravingaboutradio.com/CJU-70cm-Antenna-Quick-and-Simple">CJU 70cm Antenna Quick and Simple</a></li>
  <li><a href="http://www.amsat.org/?page_id=2144">Station and Operating Hints</a></li>
</ul>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/moxon-antennas.html">Moxon antennas</a></h1>
      <p class="post-meta">Nov 26, 2016</p>
    </header>

    <article class="post-content">
      <p>In my search for easy to build antennas I can use in the VHF/UHF frequency range I have stumbled across <a href="http://www.moxonantennaproject.com/">the moxon antenna</a>.</p>

<p>The antenna was mentioned in passing in Groundwave, the <a href="http://www.oarc.net/newsletter/">OARC’s newsletter</a>.
It looks like the antenna can be constructed with 2 pieces of wire cut to appropriate lengths for your wave length.
The wires are laid out in a rectangle with a small gap between them.
Only one of the antennas is “active”, which is to say only one wire has feedline attached to it.
The other wire is “parasitic”, meaning that it’s important for magical RF reasons (waves hands mysteriously).
It’s also a directional antenna, which means that it has better reception when it’s “pointed” at the source</p>

<p>If I can find a good souce of solid copper wires, then I’m definetly going to consider making this antenna.</p>

<p><em>Links</em></p>

<ul>
  <li><a href="http://www.moxonantennaproject.com/wb5cxc/wb5cxc.htm">WB5CXC 2 Meter Vertical Moxon</a></li>
  <li><a href="http://www.moxonantennaproject.com/iz8hhq/IZ8HHQ.htm">IZ8HHQ’S 2M MOXON</a></li>
  <li><a href="http://www.moxonantennaproject.com/EP3PK/ep3pk.htm">EP3PK’S 2 Meter UN Moxon</a></li>
</ul>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/helical-and-monopole-antennas.html">Helical and monopole antennas</a></h1>
      <p class="post-meta">Nov 25, 2016</p>
    </header>

    <article class="post-content">
      <p>Today’s reseach: helical and monopole antennas!</p>

<p>One of the things you can do with radios (and without needing a license) is receiving NOAA weather satelite images!
Yes, that’s right, you can LISTEN TO SPACE MACHINES. Another way to look at it is free selfies!</p>

<p>Anyway I was reading this article (<a href="http://www.alternet.us.com/?p=1461">Helical Quad Antenna for Weather Satellites</a>) which walks through the process of building a better antenna for receiving these satellites.
These NOAA satellites transmit in the VHF (~140MHz / 2m) range so the antenna is tuned for that.
From a quick skim through it seems a bit more involved than what I need in my exploratory phase but the author does mention that they started with “a 1/4 wave whip with a 4-wire ground plane” so I started looking into that.</p>

<p>This led me to the wikipedia article on <a href="https://en.wikipedia.org/wiki/Whip_antenna">Whip antennas</a> which led me to the wikipedia article on <a href="https://en.wikipedia.org/wiki/Monopole_antenna">Monopole antennas</a> which [ERR: WIKIPEDIA ARTICLE RECURSION LIMIT REACHED]</p>

<p>Reading through that article led quite a few things to click in my head.
One thing that I hadn’t quite grokked properly was the relation between the 2 connection points on radio connectors like SMA and the parts of antenna.
A monopole antenna has one of the connectors attached to the thing that most people think of as the antenna.
That is, the long wirey sticky-outy bit.
The other connection is either attached to the ground of whatever the circuit is (as in a cellphone) OR earth ground via some spike or something OR to a “ground plane”.
A ground plane can consist of some kind of solid metal or mesh sheet.
It can also consist of a another series of wires, which is what the “4-wire ground plane” was referring to earlier.</p>

<p>Next up I was reading about <a href="https://en.wikipedia.org/wiki/Helical_antenna">Helical antennas</a>.
These ones look much goofier. For example:</p>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Hammer_Ace_SATCOM_Antenna.jpg/640px-Hammer_Ace_SATCOM_Antenna.jpg" alt="" /></p>

<p>Helical antennas have 2 modes.
If the circumference of the helix is a lot less than the wavelenght you want to tune to, it acts just like a monopole (sort of).
If the circumference is close to the wavelenth you can send/receive <em>polarized</em> waves.
I don’t quite know exactly what that means, but I do know that satelittes transmit polarized signals and that you need a polarized antenna to pick them up properly.</p>

<p>Now, for my purposes I care less about getting a great signal and a lot more about just getting a signal.
I think I will spend some time looking into building myself a 2m/VHF/140MHz monopole.</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/antenna-building-research.html">Antenna building research: bazookas</a></h1>
      <p class="post-meta">Nov 24, 2016</p>
    </header>

    <article class="post-content">
      <p>This fall I finally got my Amateur Radio license, which has led me down a deeeeep technical rabbit hole.
I want to try and write more so I’m going to be dumping a lot my researching into blog posts.</p>

<p>Tonight’s reseach: <em>Bazooka Antennas</em></p>

<p>Specifically I am looking at “double bazooka” antenna.
From what I can tell these are mostly used as HF antennas (10m to 160m).
The only thing you need to construct them seems to be coaxial cable and twin lead.</p>

<p>Basically you cut a piece of coax to “length” for your desired frequency.
In the center you strip away just the outer layer of plastic and cut the outer braid in half.
Connect the feedline’s center/outer to each half.
Do something funky at the ends of the antennas (??)</p>

<p><em>Links</em></p>

<ul>
  <li><a href="http://www.k3dav.com/buildadoublebazookaant.htm">Build A Doubble Bazooka Antenna (K3DAV Version)</a></li>
  <li><a href="http://www.westmountainradio.com/antenna_calculator_bazooka.php">Double Bazooka Antenna Calculator</a></li>
  <li><a href="http://www.iw5edi.com/ham-radio/?double-bazooka-coaxial-dipole-antenna,158">Double Bazooka Coaxial Dipole Antenna</a></li>
  <li><a href="www.hamuniverse.com/bazooka.html">THE DOUBLE BAZOOKA ANTENNA</a></li>
  <li><a href="https://handiham.org/drupal2/node/332">How to Construct A Double Bazooka Dipole Antenna</a></li>
</ul>


    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/rule-110-part-2-now-with-wearables.html">Rule 110 Part 2: Now with Wearables!</a></h1>
      <p class="post-meta">Oct 15, 2016</p>
    </header>

    <article class="post-content">
      <p>So tomorrow (I guess later today technically) is <a href="http://makerfaireottawa.com/">makerfaire</a>! Yay!</p>

<p>I wanted to share some of the links to stuff for my project for people interested in learning more.</p>

<h1 id="rule-110">Rule 110</h1>

<p>The <a href="https://en.wikipedia.org/wiki/Rule_110">Wikipedia Page</a> on Rule110 is <em>really</em> good if you want to learn more</p>

<h1 id="the-dress">The Dress</h1>

<p>First off, here is the code running on the dress: <a href="https://github.com/tahnok/rule110_dress">https://github.com/tahnok/rule110_dress</a></p>

<p>And here’s the install link for the app to control the dress: <a href="https://play.google.com/store/apps/details?id=me.tahnok.bluefruit.le.connect">https://play.google.com/store/apps/details?id=me.tahnok.bluefruit.le.connect</a></p>

<p><img src="../images/rule110_control_qr.png" alt="" /></p>

<p>The source code for that app is over here: <a href="https://github.com/tahnok/Bluefruit_LE_Connect_Android">https://github.com/tahnok/Bluefruit_LE_Connect_Android</a></p>

<h1 id="the-hat">The Hat</h1>

<p>Code for the hat is here: <a href="https://github.com/tahnok/BlueBrim">https://github.com/tahnok/BlueBrim</a>, and my build notes / guide is <a href="http://blog.tahnok.me/post/bluebrim-rgb-lights-on-a-hat-with-bonus-bluetooth.html">the post before this one</a></p>

<h1 id="the-weird-interactive-piece-thing">The Weird Interactive Piece Thing</h1>

<p>I also have a <a href="http://blog.tahnok.me/post/makerfaire-ottawa-rule-110.html">post about last year</a>. Source code is not in git (sorry)</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/bluebrim-rgb-lights-on-a-hat-with-bonus-bluetooth.html">BLUEBRIM: RGB lights on a hat with bonus bluetooth</a></h1>
      <p class="post-meta">Dec 14, 2015</p>
    </header>

    <article class="post-content">
      <p>I recently needed to look swanky for a 1920s themed Holiday/Christmas party and I asked myself: What’s the swankiest?</p>

<p><img src="../images/bluebrim_thinking.gif" alt="gif of me thinking then light going off" /></p>

<p>Of course! RGD LEDs on a hat! Controlled by Bluetooth! I shall call it… Project BLUE BRIM (because code names are awesome)</p>

<h2 id="hardware">Hardware</h2>

<p>A trip to the second hand store and a pair of sciscorrs to remove an unwanted bow later, I had myself a pin stripe hat like this:</p>

<p><img src="../images/bluebrim_nolights.png" alt="My hat before I started" /></p>

<p>next I had to acquire the rest of my materials as follows:</p>

<ul>
  <li>1 <a href="https://www.adafruit.com/products/659">Adafruit Flora</a> at room temperature</li>
  <li>1 <a href="https://www.adafruit.com/products/2487">Flora Bluefruit LE Module</a> sifted</li>
  <li>a <a href="https://www.adafruit.com/products/1376">34 Neopixel long strip</a> lightly buttered and cut down to size</li>
  <li>1 Lithium Ion Batter at 3.7v. I went with this <a href="https://www.adafruit.com/products/328">2500mAh model</a>, but it’s a bit… overkill</li>
</ul>

<p>Assembly is relatively straightforward. The circuit diagram looks like this:</p>

<p><img src="../images/bluebrim_circuitdiagram.jpg" alt="Hand-drawn bespoke circuit diagram" /></p>

<p>Basically, the Bluetooth module is connected to the serial pins on the Flora.
Next, the Neopixel strip connected by attaching D6 to DIN, and VBATT to VIN (and GND to GND)</p>

<p>All soldered together it looks like this</p>

<p><img src="../images/bluebrim_hatinside.jpg" alt="Inside of the hat" /></p>

<p>I attached the LEDs to the hat by cutting a small whole with a sharp knife at the back of the hat large enough to fit the connectors.
I then used the adhesive backing on the strip to attach it to the hat, and it seems to be holding well.
On the top of the hat, I folded a few small strips of Gorilla tape in on itself and stuck those on the back of the flora and the ble module.
Finally, I slipped the battery into the small inner brim, and taped it to the back side of the hat.
When put together like this, it was actually really comfortable to wear.
It’s a bit off balance, so I wouldn’t recommend trying any hat tricks.</p>

<h2 id="software">Software</h2>

<p>Writing the software for the hat was actually my favourite part.
Step 1 was getting the bluetooth stuff wired up.
Just like my <a href="http://blog.tahnok.me/post/makerfaire-ottawa-rule-110">last project</a> I tried to write my own bluetooth socket reading <a href="https://github.com/tahnok/BlueBrim/commit/dd293916fff1c27bf15fd0662f389c0247ae8b09">from scratch</a> but it was a bit too hacky for my liking.
Instead, I used the packet parser that <a href="https://github.com/adafruit/Adafruit_BluefruitLE_nRF51/blob/master/examples/neopixel_picker/packetParser.cpp">adafruit provides</a>, but I made sure to study the source closely to try and pick up some tricks for next time.
Basically, it looks like using a few nested loops and a timeout is the way to go.</p>

<p>The next bit was my favourite favourite part: MAKING PRETTY LIGHT PATTERNS!</p>

<p>Since I was going to use the <a href="https://play.google.com/store/apps/details?id=com.adafruit.bluefruit.le.connect">Adafruit Bluefruit LE Connect App</a> and they have a neat control pad with 8 buttons, I figured I would need 8 patterns.
Because there were 2 sections, I decided that 4 patterns would be multi colour, and 4 patterns would use the current colour chosen with the colour picker part of the app.</p>

<p>The 4 multicolour patterns are:</p>

<p><a href="https://github.com/tahnok/BlueBrim/blob/master/colors.cpp#L41">SPARKLE</a> which has a single randomly coloured pixel.
It looks like this:</p>

<video loop="" muted="" width="75%" controls="" src="../images/bluebrim_sparkle.mp4"></video>

<p><a href="https://github.com/tahnok/BlueBrim/blob/master/colors.cpp#L47">CYCLE</a> which fades through 256 colours, with the whole strip lit with one colour at a time.</p>

<video loop="" muted="" width="75%" controls="" src="../images/bluebrim_cycle.mp4"></video>

<p><a href="https://github.com/tahnok/BlueBrim/blob/master/colors.cpp#L55">RAINBOW</a> which has a continuously changing section of rainbow, where each pixel is a different colour</p>

<video loop="" muted="" width="75%" controls="" src="../images/bluebrim_rainbow.mp4"></video>

<p><a href="https://github.com/tahnok/BlueBrim/blob/master/colors.cpp#L62">PARTY</a> where each pixel is a random colour</p>

<video loop="" muted="" width="75%" controls="" src="../images/bluebrim_party.mp4"></video>

<p>The 4 single colour patterns are:</p>

<p><a href="https://github.com/tahnok/BlueBrim/blob/master/colors.cpp#L70">CYLON</a> (or KITT depending on how old you are) has one pixel sliding back and forth across the front of the hat</p>

<video loop="" muted="" width="75%" controls="" src="../images/bluebrim_cylon.mp4"></video>

<p><a href="https://github.com/tahnok/BlueBrim/blob/master/colors.cpp#L84">SOLID</a> it’s a solid colour. What more do you want?</p>

<video loop="" muted="" width="75%" controls="" src="../images/bluebrim_solid.mp4"></video>

<p><a href="https://github.com/tahnok/BlueBrim/blob/master/colors.cpp#L91">PULSE</a> slowly changes the brightness from nothing, to full brightness, back down to nothing again</p>

<video loop="" muted="" width="75%" controls="" src="../images/bluebrim_pulse.mp4"></video>

<p><a href="https://github.com/tahnok/BlueBrim/blob/master/colors.cpp#L106">TWIST</a> has a single pixel spinning around and around (and around (and around))</p>

<video loop="" muted="" width="75%" controls="" src="../images/bluebrim_twist.mp4"></video>

<p>You can see my source code in it’s entireity on my <a href="https://github.com/tahnok/BlueBrim">BlueBrim repo on Github</a>, which uses some fancy multi file arduino to make it a bit easier to read.
I hope you learned something reading this, as a thank you here is a picture of my dog wearing the miniature version of this</p>

<p><img src="../images/bluebrim_ada_hat.jpg" alt="ada wearing a pretty hat" /></p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/makerfaire-ottawa-rule-110.html">Makerfaire Ottawa: Rule 110</a></h1>
      <p class="post-meta">Nov 11, 2015</p>
    </header>

    <article class="post-content">
      <p>Wooohoo! I can now officially cross something off my bucket list:</p>

<ul>
  <li>run marathon</li>
  <li>
    <strike>present project at Makerfaire</strike>
  </li>
  <li>world domination?</li>
</ul>

<p>So, what was my project? Here’s a pic of it</p>

<p><img src="../images/rule110_at_table.jpg" alt="my project set up at makerfaire" /></p>

<p>What do you mean you don’t know what is from that?</p>

<p>WELL.</p>

<p>What I built was basically part art, part math and part eletronics.
I hooked up an RGB LED Matrix (specifically <a href="https://www.adafruit.com/products/2277">this one from adafruit</a>) to an Arduino Mega along with 32 switches.
(Note to future self: don’t ever try and wire up 32 switches.)
These switches provided the starting row for generating a pattern on the led matrix based on <a href="https://en.wikipedia.org/wiki/Rule_110">rule 110</a>: a 1 dimensional cellular automaton that generates a pattern like this:</p>

<p><img src="../images/rule110.png" alt="rule 110 pattern" />
(from <a href="https://twitter.com/rule110_bot">@rule110_bot</a>)</p>

<p>but on an RGB LED Matrix, so it looks more like</p>

<p><img src="../images/adafruit-panel.jpg" alt="RGB panel product shot" /></p>

<h2 id="why">Why??</h2>

<p>This all started out when I came across this fabulous kickstarter: <a href="https://www.kickstarter.com/projects/fbz/knityak-custom-mathematical-knit-scarves">KnitYak: Custom mathematical knit scarves</a> by <a href="https://twitter.com/fbz">fbz</a>, which was for rule 110 scarfs.
I was immediatly struck by how beautiful the pattern was, and intriguied by the fact that it was being generated algorithmically.
After reading several wikipedia articles, my interest in the pattern had only grown further.
I ended up writing <a href="https://github.com/tahnok/rule110">a ruby implementation</a> of rule 110 that could output patterns to your terminal, and then to pngs, and then finally to <a href="https://twitter.com/rule110_bot">twitter</a>.</p>

<p>But it was hard to mess around with the starting row and explore the patterns that got generated. I wanted something you could interact with, so when I saw that the Ottawa Makerfaire was looking for projects I figured it would be a perfect oppurtunity to force myself to build something and to have something interactive for attendees to play with.</p>

<h2 id="hardware">Hardware</h2>

<p><img src="../images/rule110_table.jpg" alt="me being creepy" /></p>

<p><img src="../images/rule110_ratsnest.jpg" alt="my rats nest of a project" /></p>

<p>Here’s what inside:</p>

<ul>
  <li>Arduino Mega</li>
  <li>64x32 RGB LED matrix</li>
  <li>Shift Registers (SN74HC165N) x 6</li>
  <li>Rocker switches x 32</li>
  <li>8 position rotary switches x 2</li>
  <li>10K resistors x (lots)</li>
</ul>

<p>The arduino mega is the brains of this particular operations.
I needed to use it over an uno because of the higher clock speed.
Turns out you need a fair bit of horse power to drive 2048 RGB LEDs.
Who would have thunk?</p>

<h3 id="rgb-led-matrix">RGB LED Matrix</h3>

<p>How do you actually drive 2048 LEDs?</p>

<p>Basically, you can’t have all those LEDs on at the same time (because power draw), so the LED matrix only turns 2 (out of 32) rows on at a time.
In order to select which row you want to light up, you use the 4 address select pins to select one of 16 pairs of rows.</p>

<p>Once you have a row selected, you need to fill it with colour.
You can set the colour of 2 pixels at a time using 2 sets of Red, Green and Blue pins.
When your desired colours are chosen you “shift” in the data, using the clock pin.
This way you can fill an entire row of pixels by setting the colour, then clocking in order to set the next pixel.
Finally, you toggle the latch pin, which shows the entire row of pixels.
If you do this FAST enough (like 200Hz aka 1 row every 5ms), the display looks to be continuously on to us puny humans.</p>

<p>I tried to write my own driver for the display in C for the Propeller, but I had some serious flickering issues that I wasn’t able to fix…
Given that I didn’t want to give everyone at makerfaire a headache / induce seizures I chose to use this library <a href="https://github.com/adafruit/RGB-matrix-Panel/">from Adafruit</a>.
It’s a very interesting read because they do some neat things like <a href="https://github.com/adafruit/RGB-matrix-Panel/blob/master/RGBmatrixPanel.cpp#L541">unrolling loops</a> and using Binary Coded Modulation (like PWM) in order to give a greater color depth than the 3 bit color you start with.</p>

<h3 id="shift-registers">Shift Registers</h3>

<p><img src="../images/rule110_shiftregisters.jpg" alt="shift registers in situe" /></p>

<p>I ended up using 6 <a href="https://en.wikipedia.org/wiki/Shift_register">shift register</a> for input in this project.
Why?
Well it means that I could use 4 pins to read 32 switches (aka 32 bits of data) all in one go.
That feat is accomplished with 4 shift register daisy chained together.
Each input pin on each of the shift registers has a pull down resistor in order to deal with electrical gremlins, and also to make my assembly time much much longer.</p>

<p>I also used 2 shift registers to read the state of the two knobs I have for selecting colours.
Those knobs have 8 pins to indicate which position the knob is in currently.</p>

<h2 id="software">Software</h2>

<p>My code can be found below:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#include &lt;Adafruit_GFX.h&gt;   </span><span class="c1">// Core graphics library</span>
<span class="cp">#include &lt;RGBmatrixPanel.h&gt; </span><span class="c1">// Hardware-specific library</span>

<span class="cp">#define OE   9</span>
<span class="cp">#define LAT 10</span>
<span class="cp">#define CLK 11</span>
<span class="cp">#define A   A0</span>
<span class="cp">#define B   A1</span>
<span class="cp">#define C   A2</span>
<span class="cp">#define D   A3</span>

<span class="n">RGBmatrixPanel</span> <span class="nf">matrix</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">CLK</span><span class="p">,</span> <span class="n">LAT</span><span class="p">,</span> <span class="n">OE</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="mi">64</span><span class="p">);</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">data_pin</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span> <span class="c1">//  SER_OUT (serial data out)</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">shld_pin</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="c1">// SH/!LD (shift or active low load)</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">clk_pin</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">//  CLK (the clock that times the shifting)</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">ce_pin</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">//  !CE (clock enable, active low)</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">data_pin_2</span> <span class="o">=</span> <span class="mi">48</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">ce_pin_2</span> <span class="o">=</span> <span class="mi">46</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">shld_pin_2</span> <span class="o">=</span> <span class="mi">47</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">clk_pin_2</span> <span class="o">=</span> <span class="mi">49</span><span class="p">;</span>

<span class="n">byte</span> <span class="n">incoming1</span><span class="p">;</span>
<span class="n">byte</span> <span class="n">incoming2</span><span class="p">;</span>
<span class="n">byte</span> <span class="n">incoming3</span><span class="p">;</span>
<span class="n">byte</span> <span class="n">incoming4</span><span class="p">;</span>

<span class="n">byte</span> <span class="n">colour1</span><span class="p">;</span>
<span class="n">byte</span> <span class="n">colour2</span><span class="p">;</span>


<span class="c1">//int start[] = { 0, 1, 0, 0, 1, 0, 1, 0,</span>
<span class="c1">//                0, 0, 1, 0, 1, 1, 0, 1,</span>
<span class="c1">//                1, 1, 1, 0, 0, 1, 1, 1,</span>
<span class="c1">//                0, 1, 0, 1, 1, 0, 0, 1</span>
<span class="c1">//              };</span>
<span class="kt">int</span> <span class="n">start</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

<span class="kt">int</span><span class="o">*</span> <span class="n">row1</span><span class="p">;</span>
<span class="kt">int</span><span class="o">*</span> <span class="n">row2</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">//shift registers for buttons</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

  <span class="c1">// Initialize each digital pin to either output or input</span>
  <span class="c1">// We are commanding the shift register with each pin with the exception of the serial</span>
  <span class="c1">// data we get back on the data_pin line.</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">shld_pin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">ce_pin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">clk_pin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">data_pin</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">shld_pin_2</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">ce_pin_2</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">clk_pin_2</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">data_pin_2</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>

  <span class="c1">// Required initial states of these two pins according to the datasheet timing diagram</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clk_pin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">shld_pin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clk_pin_2</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">shld_pin_2</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>

  <span class="n">read_shift_regs</span><span class="p">();</span>
  <span class="n">read_color_shift_regs</span><span class="p">();</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;colours: &quot;</span><span class="p">);</span>
  <span class="n">print_byte</span><span class="p">(</span><span class="n">colour1</span><span class="p">);</span>
  <span class="n">print_byte</span><span class="p">(</span><span class="n">colour2</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">transform</span><span class="p">(</span><span class="n">colour1</span><span class="p">));</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">transform</span><span class="p">(</span><span class="n">colour2</span><span class="p">));</span>
  <span class="n">fill_starting_row</span><span class="p">();</span>

  <span class="c1">//matrix</span>
  <span class="n">matrix</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
  <span class="n">matrix</span><span class="p">.</span><span class="n">fillScreen</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">row1</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span>
  <span class="n">displayRow</span><span class="p">(</span><span class="n">row1</span><span class="p">);</span>
  <span class="n">row2</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">*</span> <span class="mi">32</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">for</span> <span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">64</span><span class="p">;</span> <span class="n">x</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">row</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">apply_rule</span><span class="p">(</span><span class="n">row2</span><span class="p">,</span> <span class="n">row1</span><span class="p">);</span>
      <span class="n">row</span> <span class="o">=</span> <span class="n">row2</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">apply_rule</span><span class="p">(</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">);</span>
      <span class="n">row</span> <span class="o">=</span> <span class="n">row1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//    j = (j + 1) % 24;</span>
    <span class="c1">//    Serial.print(x);</span>
    <span class="c1">//    Serial.print(&quot;:  &quot;);</span>
    <span class="c1">//    displayRow(row);</span>
    <span class="c1">//    Serial.print(&quot;row1 &quot;);</span>
    <span class="c1">//    displayRow(row1);</span>
    <span class="c1">//    Serial.print(&quot;row2 &quot;);</span>
    <span class="c1">//    displayRow(row2);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">32</span><span class="p">;</span> <span class="n">y</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">matrix</span><span class="p">.</span><span class="n">drawPixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">transform</span><span class="p">(</span><span class="n">colour1</span><span class="p">));</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">matrix</span><span class="p">.</span><span class="n">drawPixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">transform</span><span class="p">(</span><span class="n">colour2</span><span class="p">));</span>
      <span class="p">}</span>

    <span class="p">}</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(;;);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">apply_rule</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">32</span><span class="p">],</span> <span class="kt">int</span> <span class="n">b</span><span class="p">[</span><span class="mi">32</span><span class="p">])</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">32</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">31</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">||</span>
           <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">||</span>
           <span class="p">(</span><span class="o">!</span><span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">||</span>
           <span class="p">(</span><span class="o">!</span><span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">||</span>
           <span class="p">(</span><span class="o">!</span><span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
         <span class="p">)</span> <span class="p">{</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

  <span class="p">}</span>
  <span class="c1">//  return b;</span>
<span class="p">}</span>


<span class="c1">// Input a value 0 to 24 to get a color value.</span>
<span class="c1">// The colours are a transition r - g - b - back to r.</span>
<span class="kt">uint16_t</span> <span class="nf">Wheel</span><span class="p">(</span><span class="n">byte</span> <span class="n">WheelPos</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">WheelPos</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">matrix</span><span class="p">.</span><span class="n">Color333</span><span class="p">(</span><span class="mi">7</span> <span class="o">-</span> <span class="n">WheelPos</span><span class="p">,</span> <span class="n">WheelPos</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">WheelPos</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">WheelPos</span> <span class="o">-=</span> <span class="mi">8</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">matrix</span><span class="p">.</span><span class="n">Color333</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span> <span class="o">-</span> <span class="n">WheelPos</span><span class="p">,</span> <span class="n">WheelPos</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">WheelPos</span> <span class="o">-=</span> <span class="mi">16</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">matrix</span><span class="p">.</span><span class="n">Color333</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">WheelPos</span><span class="p">,</span> <span class="mi">7</span> <span class="o">-</span> <span class="n">WheelPos</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">byte</span> <span class="nf">read_shift_regs</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">byte</span> <span class="n">the_shifted</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// An 8 bit number to carry each bit value of A-H</span>

  <span class="c1">// Trigger loading the state of the A-H data lines into the shift register</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">shld_pin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
  <span class="n">delayMicroseconds</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// Requires a delay here according to the datasheet timing diagram</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">shld_pin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">delayMicroseconds</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

  <span class="c1">// Required initial states of these two pins according to the datasheet timing diagram</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">clk_pin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">data_pin</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clk_pin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ce_pin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span> <span class="c1">// Enable the clock</span>

  <span class="c1">// Get the A-H values</span>
  <span class="c1">//the_shifted = shiftIn(data_pin, clk_pin, MSBFIRST);</span>
  <span class="n">incoming1</span> <span class="o">=</span> <span class="n">shiftIn</span><span class="p">(</span><span class="n">data_pin</span><span class="p">,</span> <span class="n">clk_pin</span><span class="p">,</span> <span class="n">MSBFIRST</span><span class="p">);</span>
  <span class="n">incoming2</span> <span class="o">=</span> <span class="n">shiftIn</span><span class="p">(</span><span class="n">data_pin</span><span class="p">,</span> <span class="n">clk_pin</span><span class="p">,</span> <span class="n">MSBFIRST</span><span class="p">);</span>
  <span class="n">incoming3</span> <span class="o">=</span> <span class="n">shiftIn</span><span class="p">(</span><span class="n">data_pin</span><span class="p">,</span> <span class="n">clk_pin</span><span class="p">,</span> <span class="n">MSBFIRST</span><span class="p">);</span>
  <span class="n">incoming4</span> <span class="o">=</span> <span class="n">shiftIn</span><span class="p">(</span><span class="n">data_pin</span><span class="p">,</span> <span class="n">clk_pin</span><span class="p">,</span> <span class="n">MSBFIRST</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ce_pin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span> <span class="c1">// Disable the clock</span>

  <span class="k">return</span> <span class="n">the_shifted</span><span class="p">;</span>

<span class="p">}</span>

<span class="n">byte</span> <span class="nf">read_color_shift_regs</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">byte</span> <span class="n">the_shifted</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// An 8 bit number to carry each bit value of A-H</span>

  <span class="c1">// Trigger loading the state of the A-H data lines into the shift register</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">shld_pin_2</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
  <span class="n">delayMicroseconds</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// Requires a delay here according to the datasheet timing diagram</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">shld_pin_2</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">delayMicroseconds</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

  <span class="c1">// Required initial states of these two pins according to the datasheet timing diagram</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">clk_pin_2</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">data_pin_2</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clk_pin_2</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ce_pin_2</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span> <span class="c1">// Enable the clock</span>

  <span class="c1">// Get the A-H values</span>
  <span class="c1">//the_shifted = shiftIn(data_pin, clk_pin, MSBFIRST);</span>
  <span class="n">colour1</span> <span class="o">=</span> <span class="n">shiftIn</span><span class="p">(</span><span class="n">data_pin_2</span><span class="p">,</span> <span class="n">clk_pin_2</span><span class="p">,</span> <span class="n">MSBFIRST</span><span class="p">);</span>
  <span class="n">colour2</span> <span class="o">=</span> <span class="n">shiftIn</span><span class="p">(</span><span class="n">data_pin_2</span><span class="p">,</span> <span class="n">clk_pin_2</span><span class="p">,</span> <span class="n">MSBFIRST</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ce_pin_2</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span> <span class="c1">// Disable the clock</span>

  <span class="k">return</span> <span class="n">the_shifted</span><span class="p">;</span>

<span class="p">}</span>

<span class="c1">// A function that prints all the 1&#39;s and 0&#39;s of a byte, so 8 bits +or- 2</span>
<span class="kt">void</span> <span class="nf">print_byte</span><span class="p">(</span><span class="n">byte</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">byte</span> <span class="n">i</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">byte</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">7</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">val</span> <span class="o">&gt;&gt;</span> <span class="n">i</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">BIN</span><span class="p">);</span> <span class="c1">// Magic bit shift, if you care look up the &lt;&lt;, &gt;&gt;, and &amp; operators</span>
  <span class="p">}</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span> <span class="c1">// Go to the next line, do not collect $200</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">fill_starting_row</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">byte</span> <span class="n">data</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">incoming1</span> <span class="o">&gt;&gt;</span> <span class="n">i</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">thang</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
    <span class="n">start</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">incoming2</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">thang</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
    <span class="n">start</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">24</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">data</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="n">incoming3</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">16</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">thang</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
    <span class="n">start</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">24</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">32</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">data</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="n">incoming4</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">24</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">thang</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
    <span class="n">start</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">thang</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">byte</span> <span class="n">thing</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//  Serial.print(i);</span>
  <span class="c1">//  Serial.print(&quot; : &quot;);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">thing</span><span class="p">,</span> <span class="n">BIN</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">displayRow</span><span class="p">(</span><span class="kt">int</span> <span class="n">b</span><span class="p">[</span><span class="mi">32</span><span class="p">])</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">32</span><span class="p">;</span> <span class="n">a</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">thang</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">[</span><span class="n">a</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">uint16_t</span> <span class="nf">transform</span><span class="p">(</span><span class="n">byte</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//    return matrix.Color333(7 - WheelPos, WheelPos, 0);</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">input</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">Wheel</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">Wheel</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">Wheel</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">8</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">Wheel</span><span class="p">(</span><span class="mi">9</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">16</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">Wheel</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">32</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">Wheel</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">64</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">Wheel</span><span class="p">(</span><span class="mi">18</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">128</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">Wheel</span><span class="p">(</span><span class="mi">21</span><span class="p">);</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="k">return</span> <span class="n">Wheel</span><span class="p">(</span><span class="mi">24</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>It’s pretty bad because I wrote it the night before (as is my tradition for any large project)</p>

<p>Writing this was a fun excersise to see how well I understand arrays / pointers in C.
It turns out I still don’t grok them, but with sufficient sacrifices to Malloc (all praise to It), I managed to get things working.</p>

<h2 id="math">Math</h2>

<p>So, what the heck is the pattern I’m using anyway?</p>

<p>Basically, each pixel/cell (I’m going to call them cells from now on), except for the first row of dots, is set to one of two colors based on the 3 cells above it according to the following table:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">111</td>
      <td style="text-align: center">110</td>
      <td style="text-align: center">101</td>
      <td style="text-align: center">100</td>
      <td style="text-align: center">011</td>
      <td style="text-align: center">010</td>
      <td style="text-align: center">001</td>
      <td style="text-align: center">000</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: center">0</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">0</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">0</td>
    </tr>
  </tbody>
</table>

<p>Where 1 is an “alive” cell and 0 is a “dead” cell.
The name comes from the fact that writing out 01101110 in decimal is 110, and there are other rules like <a href="https://en.wikipedia.org/wiki/Rule_30">rule 30</a> and <a href="https://en.wikipedia.org/wiki/Rule_184">rule 184</a>.</p>

<p>If our alive colour was red, and our dead colour was blue, then a cell who had a red pixel up and to the left, another red pixel directly above, and a blue pixel above and to the right, then it would be alive and thus red.
In my project colours of the alive and dead cells are set using the 2 knobs.</p>

<p>Mind blowing fact: Rule 110 is <em>TURING COMPLETE</em></p>

<p><img src="https://31.media.tumblr.com/tumblr_ma9tsfZn4d1rq1co5o1_500.gif" alt="tatooed man holding hedgehog" />
(number 1 result on google image search for turing complete, filtered by gifs)</p>

<p>For those of you with minds still unblown, I am going to assume it’s because you aren’t familiar with turing completeness yet.
Basically, if a problem or program can be computed it can be run on a machine that is turing complete.
That means if I had enough time (and enough will) I would program a pattern into a rule 110 system that couple compute prime numbers, or play minecraft.</p>

<h2 id="reactions">Reactions</h2>

<p>There were so many different reactions to my project.
Kids were immediately interested in playing with the buttons and the knobs.
Adults I had to cajole and encourage, which I think is a bit sad.
If this massive bank of switches wasn’t supposed to be touched, don’t you think I would have indicated that some way?</p>

<p>I could also tell immediately the people that wanted to figure out the pattern.
The first thing they would do after reseting the display for the first time, was to change a few switches and see what changed.
Then they would set all the switches to one position (up or down) and try that.
Then they would change just one switch.
The entire project was worth it for the looks on people’s faces when they learned something new, either than confirmed some expectation, or suprised them</p>

<h2 id="conclusions">Conclusions</h2>

<p>All in all, it was totally a good idea for me to apply to makerfaire. This is one of the largest electronics projects I’ve yet completed, and I doubt I would have done it without the thought of an empty table. I guess I should start thinking about next year…</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/chameleon-scarf.html">Chameleon Scarf</a></h1>
      <p class="post-meta">Sep 27, 2015</p>
    </header>

    <article class="post-content">
      <p><img src="../images/scraf_5.jpg" alt="" /></p>

<p>This weekend Danielle and I have been working on building a scarf with LEDs in it that will match whatever colour you place against it.
That’s right, it’s a CHAMELON SCARF.
Here are the steps</p>

<h1 id="step-0-get-inspired">Step 0: GET INSPIRED!</h1>

<p>I was stumbling through the <a href="https://learn.adafruit.com/">Adafruit Learning Site</a> and I found this:</p>

<p><img src="https://learn.adafruit.com/system/guides/images/000/000/280/medium800/chameleon-scarf-adafruit-thumb.jpg?1396719510" alt="" /></p>

<p>ZOMG! It’s so cool! BONUS: I had all the parts just lying around at home…</p>

<h1 id="step-1-gather-materials">Step 1: Gather materials</h1>

<p>You will need the following:</p>

<ul>
  <li>Adafruit Flora</li>
  <li>Sewable Neopixels</li>
  <li>Steel thread</li>
  <li>Conductive Fabric</li>
  <li>Adafruit Color Sensor (TCS34725)</li>
  <li>Clear nail polish</li>
  <li>Fabric for a scarf</li>
</ul>

<p>You can get most of this in a single pack from Adafruit here: https://www.adafruit.com/products/1458</p>

<p><img src="../images/scarf_2.jpg" alt="" /></p>

<h1 id="step-2-get-sewing">Step 2: Get Sewing</h1>

<p>Here’s the basic circuit diagram</p>

<p><img src="../images/scarf_7.jpg" alt="" /></p>

<p>We decided to go with more of a banada style scarf versus a proper loop.</p>

<p><img src="../images/scarf_1.jpg" alt="" /></p>

<p>The data lines for the neo pixels are actually strips of conductive fabric, rather than steel thread.</p>

<h1 id="step-3-solder">Step 3: Solder!</h1>

<p>I really liked the idea of using fabric snaps as shown here: https://learn.adafruit.com/flora-snaps/overview</p>

<p>It’s actually pretty easy to solder, although the first few times I had too much solder on the snap and they didn’t fit well
I even put some solder on the other half of the snaps to I could easily add and remove the colour sensor</p>

<h1 id="step-4-debug">Step 4: Debug</h1>

<p>Check ALL the wires.</p>

<p>Do it again.</p>

<h1 id="step-5-code">Step 5: Code</h1>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#include &lt;Wire.h&gt;</span>
<span class="cp">#include &quot;Adafruit_TCS34725.h&quot;</span>
<span class="cp">#include &lt;Adafruit_NeoPixel.h&gt;</span>

<span class="c1">// Parameter 1 = number of pixels in strip</span>
<span class="c1">// Parameter 2 = pin number (most are valid)</span>
<span class="c1">// Parameter 3 = pixel type flags, add together as needed:</span>
<span class="c1">//   NEO_RGB     Pixels are wired for RGB bitstream</span>
<span class="c1">//   NEO_GRB     Pixels are wired for GRB bitstream</span>
<span class="c1">//   NEO_KHZ400  400 KHz bitstream (e.g. FLORA pixels)</span>
<span class="c1">//   NEO_KHZ800  800 KHz bitstream (e.g. High Density LED strip)</span>

<span class="n">Adafruit_NeoPixel</span> <span class="n">strip</span> <span class="o">=</span> <span class="n">Adafruit_NeoPixel</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">NEO_GRB</span> <span class="o">+</span> <span class="n">NEO_KHZ800</span><span class="p">);</span>

<span class="n">Adafruit_NeoPixel</span> <span class="n">onboard</span> <span class="o">=</span> <span class="n">Adafruit_NeoPixel</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">NEO_RGB</span> <span class="o">+</span> <span class="n">NEO_KHZ400</span><span class="p">);</span>


<span class="c1">// our RGB -&gt; eye-recognized gamma color</span>
<span class="n">byte</span> <span class="n">gammatable</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>


<span class="n">Adafruit_TCS34725</span> <span class="n">tcs</span> <span class="o">=</span> <span class="n">Adafruit_TCS34725</span><span class="p">(</span><span class="n">TCS34725_INTEGRATIONTIME_50MS</span><span class="p">,</span> <span class="n">TCS34725_GAIN_4X</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Color View Test!&quot;</span><span class="p">);</span>

  <span class="n">strip</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
  <span class="n">strip</span><span class="p">.</span><span class="n">show</span><span class="p">();</span> <span class="c1">// Initialize all pixels to &#39;off&#39;</span>
  <span class="n">onboard</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
  <span class="n">onboard</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">tcs</span><span class="p">.</span><span class="n">begin</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Found sensor&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;No TCS34725 found ... check your connections&quot;</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// halt!</span>
      <span class="n">error</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>


  <span class="c1">// thanks PhilB for this gamma table!</span>
  <span class="c1">// it helps convert RGB colors to what humans see</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">256</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">x</span> <span class="o">/=</span> <span class="mi">255</span><span class="p">;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">);</span>
    <span class="n">x</span> <span class="o">*=</span> <span class="mi">255</span><span class="p">;</span>

    <span class="n">gammatable</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="c1">//Serial.println(gammatable[i]);</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//this sequence flashes the first pixel three times as a countdown to the color reading.</span>
    <span class="n">strip</span><span class="p">.</span><span class="n">setPixelColor</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">strip</span><span class="p">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">188</span><span class="p">,</span> <span class="mi">188</span><span class="p">,</span> <span class="mi">188</span><span class="p">));</span> <span class="c1">//white, but dimmer-- 255 for all three values makes it blinding!</span>
    <span class="n">strip</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
    <span class="n">strip</span><span class="p">.</span><span class="n">setPixelColor</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">strip</span><span class="p">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
    <span class="n">strip</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kt">uint16_t</span> <span class="n">clear</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">;</span>

  <span class="n">tcs</span><span class="p">.</span><span class="n">setInterrupt</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>      <span class="c1">// turn on LED</span>

  <span class="n">delay</span><span class="p">(</span><span class="mi">60</span><span class="p">);</span>  <span class="c1">// takes 50ms to read</span>

  <span class="n">tcs</span><span class="p">.</span><span class="n">getRawData</span><span class="p">(</span><span class="o">&amp;</span><span class="n">red</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">green</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">blue</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clear</span><span class="p">);</span>

  <span class="n">tcs</span><span class="p">.</span><span class="n">setInterrupt</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>  <span class="c1">// turn off LED</span>

  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;C:</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">clear</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">R:</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">red</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">G:</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">green</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">B:</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">blue</span><span class="p">);</span>

  <span class="c1">// Figure out some basic hex code for visualization</span>
  <span class="kt">uint32_t</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">red</span><span class="p">;</span>
  <span class="n">sum</span> <span class="o">+=</span> <span class="n">green</span><span class="p">;</span>
  <span class="n">sum</span> <span class="o">+=</span> <span class="n">blue</span><span class="p">;</span>
  <span class="n">sum</span> <span class="o">+=</span> <span class="n">clear</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
  <span class="n">r</span> <span class="o">=</span> <span class="n">red</span><span class="p">;</span> <span class="n">r</span> <span class="o">/=</span> <span class="n">sum</span><span class="p">;</span>
  <span class="n">g</span> <span class="o">=</span> <span class="n">green</span><span class="p">;</span> <span class="n">g</span> <span class="o">/=</span> <span class="n">sum</span><span class="p">;</span>
  <span class="n">b</span> <span class="o">=</span> <span class="n">blue</span><span class="p">;</span> <span class="n">b</span> <span class="o">/=</span> <span class="n">sum</span><span class="p">;</span>
  <span class="n">r</span> <span class="o">*=</span> <span class="mi">256</span><span class="p">;</span> <span class="n">g</span> <span class="o">*=</span> <span class="mi">256</span><span class="p">;</span> <span class="n">b</span> <span class="o">*=</span> <span class="mi">256</span><span class="p">;</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">r</span><span class="p">,</span> <span class="n">HEX</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">g</span><span class="p">,</span> <span class="n">HEX</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">b</span><span class="p">,</span> <span class="n">HEX</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">();</span>

  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">r</span> <span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">g</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">);</span>  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">b</span> <span class="p">);</span>
  <span class="n">colorWipe</span><span class="p">(</span><span class="n">strip</span><span class="p">.</span><span class="n">Color</span><span class="p">(</span><span class="n">gammatable</span><span class="p">[(</span><span class="kt">int</span><span class="p">)</span><span class="n">r</span><span class="p">],</span> <span class="n">gammatable</span><span class="p">[(</span><span class="kt">int</span><span class="p">)</span><span class="n">g</span><span class="p">],</span> <span class="n">gammatable</span><span class="p">[(</span><span class="kt">int</span><span class="p">)</span><span class="n">b</span><span class="p">]),</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Fill the dots one after the other with a color</span>
<span class="kt">void</span> <span class="nf">colorWipe</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">c</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">wait</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">uint16_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">strip</span><span class="p">.</span><span class="n">numPixels</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">strip</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="n">strip</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
    <span class="n">delay</span><span class="p">(</span><span class="n">wait</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">//loop is empty because it only takes the color reading once on power up! Turn the scarf off and on again to change the color.</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">error</span><span class="p">()</span> <span class="p">{</span>

  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot; :(&quot;</span><span class="p">);</span>
  <span class="n">onboard</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">strip</span><span class="p">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
  <span class="n">onboard</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="n">onboard</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="n">onboard</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>


    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/making-pcb-not-pcp.html">making PCB (not PCP)</a></h1>
      <p class="post-meta">Jun 20, 2015</p>
    </header>

    <article class="post-content">
      <p>So I got something REALLY COOL this week in a purple envelope.
That’s right I got 3 PCBs that I designed myself from Oshpark</p>

<p><img src="../images/first_pcbs.jpg" alt="" /></p>

<p>Aww yiss!</p>

<p>Now of course, it’s actually a really simple board that I could have done without, but the point was mostly to learn how to use Eagle,
and a PCB manufacturing service like <a href="https://oshpark.com/">OSH park</a>.</p>

<p>WTF is OSH park you ask?
It’s a PCB manufacturing service that caters to small runs.
They get away with this by collecting submissions from lots of people and then putting all of them together on one big panel.
It’s also pretty cheap, my boards only cost my 5$.
Also note the sweet purple colour (that’s called the solder mask)</p>

<p>The software I chose to use was Eagle, which has a free to use (not a Free as in open source though) version available.
The pro version costs many dollars, and the free version has some limitations, but I haven’t run into any of them.
I considered using the open source <a href="http://www.kicad-pcb.org/display/KICAD/KiCad+EDA+Software+Suite">Kicad</a>, but I found some better tutorials for Eagle (more on that later) and my local makerspace has quite a few advanced Eagle users.</p>

<p>I have to give most of the credit for my amazing board design to <a href="http://sparkfun.com/">Sparkfun</a> because it was their tutorials which taught me everything I know (not that much tbh). They have a large number of random <a href="https://learn.sparkfun.com/tutorials/tags/eagle">tutorials with the eagle tag</a>, and I followed three in particular:</p>

<ol>
  <li><a href="https://learn.sparkfun.com/tutorials/how-to-install-and-setup-eagle">How to setup and install eagle</a>: more than just set up, it also does a good job giving an overview of some of the pieces of eagle</li>
  <li><a href="https://learn.sparkfun.com/tutorials/using-eagle-schematic">Using Eagle: Schematic</a>: teaches you how to make a schematic</li>
  <li><a href="https://learn.sparkfun.com/tutorials/using-eagle-board-layout">Using Eagle: Board Layout</a>: this one teaches you how to turn a schematic into a board layout</li>
</ol>

<p>At the end of them, you’ll have a very basic arduino board all laid out and (almost) ready to ship to OSH park.</p>

<p>The tl;dr of those tutorials is this: Eagle is designed around 2 “views” schematic and layout.
First you create a schematic which shows which parts your project uses and how they connect.
Next you create a layout where you must place all your components and wires on the actual pcb.</p>

<p>The final step is sending the board off to the “fab”.
They seem to expect to receive everything as “gerber” files, which are basically instructions as to what should be done for each “layer” of the pcb.
The sparkfun tutorial I walked through covered this a bit, but when I went to upload to OSH park I was missing certain pieces.
Thankfully OSH park can handle a eagle layout files automatically.</p>

<p>My first board is called <strong>ESPOWER</strong> <a href="https://github.com/tahnok/espower">eagle source files on github</a> and it’s really really (really) simple.</p>

<p><img src="../images/first_pcb_schematic.png" alt="" /></p>

<p>It contains:</p>

<ul>
  <li>a barrel jack for power on the left</li>
  <li>a 4x2 set of standard 0.100” headers (like those found on an arduino) to connect to an ESP8266</li>
  <li>a 4x1 set of headers for connecting to the ESP8266 over serial</li>
</ul>

<p>That’s all.
My only goal is to be able to power an ESP8266 (this 3$ wifi enabled micro controlled) from a standard wallwart for a top secret project I am working on.
I don’t actually know if I’ve succeeded in making a functioning board yet…
I am still waiting on the parts to populate the board to arrive, but I’ve certainly learned a bunch in the process.</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/blueboxer-phone-phreaking-for-phun.html">Blueboxer: phone phreaking for phun</a></h1>
      <p class="post-meta">Jun 4, 2015</p>
    </header>

    <article class="post-content">
      <p><img src="../images/blueboxer.png" alt="" /></p>

<p>I’ve recently becoming super interested in <a href="https://en.wikipedia.org/wiki/Blue_box">Blue boxes</a>. No, I don’t mean Tardises (Tardii? Tardeese?) I mean one of the primary tools of Phone Phreaks during the 70s, 80s and early 90s. Apparently they became quiet popular after an <a href="http://www.lospadres.info/thorg/lbb.html">article in Esquire</a> in 1971.</p>

<p>Blue boxes worked because the telephone companies made a huge mistake and used in-band control signals. That is to say, all the messages that accounting or routing offices used to talk to one and other were transmitted in the same band (and in the same way) as people’s voices. This meant that people could trick telephone equipment by pretending to be other phone equipment. Most famously, you could play a tone at 2600Hz and trick the receiving end of a phone call into thinking you had hung up without actually hanging up. This left the caller able to make new calls, while the billing system thought the original call was still going on. If you called a 1-800 (or some other toll free number) that meant you could talk for free!</p>

<p>These days signaling of this sort happens out of band, so the study and use of blue boxes these days is mostly academic / nostalgic. Although, I did recently find <a href="http://www.projectmf.org/">Project MF</a> which is a VOIP recreation of the old phone networks. If only I had a blue box…</p>

<p>Which brings me to the main point of this blog post. I’ve started <a href="https://github.com/tahnok/Blueboxer">building a software blue box for android</a>. I think it might be broken right no, but it’s been an interesting excuse to learn RxJava and to have an excuse to learn exactly how blueboxes worked.</p>

<p>It turns out that the tones you need to mess with the system are called <strong>Operator Dialed Multi Frequency (MF) Tones</strong>, or just MF tones. As you might guess, they are made up of multiple frequencies, specificially 2 tones that are either 700Hz, 900Hz, 1100Hz, 1300Hz, 1500Hz or 1700Hz. Here’s a table (from wikipedia that breaks down the combinations)</p>

<table class="wikitable">
<tbody><tr>
<td colspan="7" align="center">Operator (blue box) dialed MF tones</td>
</tr>
<tr>
<th align="center">Code</th>
<th align="center">700&nbsp;Hz</th>
<th align="center">900&nbsp;Hz</th>
<th align="center">1100&nbsp;Hz</th>
<th align="center">1300&nbsp;Hz</th>
<th align="center">1500&nbsp;Hz</th>
<th align="center">1700&nbsp;Hz</th>
</tr>
<tr>
<td align="center"><b>1</b></td>
<td align="center">X</td>
<td align="center">X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center"><b>2</b></td>
<td align="center">X</td>
<td></td>
<td align="center">X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center"><b>3</b></td>
<td></td>
<td align="center">X</td>
<td align="center">X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center"><b>4</b></td>
<td align="center">X</td>
<td></td>
<td></td>
<td align="center">X</td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center"><b>5</b></td>
<td></td>
<td align="center">X</td>
<td></td>
<td align="center">X</td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center"><b>6</b></td>
<td></td>
<td></td>
<td align="center">X</td>
<td align="center">X</td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center"><b>7</b></td>
<td align="center">X</td>
<td></td>
<td></td>
<td></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td align="center"><b>8</b></td>
<td></td>
<td align="center">X</td>
<td></td>
<td></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td align="center"><b>9</b></td>
<td></td>
<td></td>
<td align="center">X</td>
<td></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td align="center"><b>0</b>/10</td>
<td></td>
<td></td>
<td></td>
<td align="center">X</td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td align="center">11/ST3</td>
<td align="center">X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center">X</td>
</tr>
<tr>
<td align="center">12/ST2</td>
<td></td>
<td align="center">X</td>
<td></td>
<td></td>
<td></td>
<td align="center">X</td>
</tr>
<tr>
<td align="center"><b>KP</b></td>
<td></td>
<td></td>
<td align="center">X</td>
<td></td>
<td></td>
<td align="center">X</td>
</tr>
<tr>
<td align="center">KP2</td>
<td></td>
<td></td>
<td></td>
<td align="center">X</td>
<td></td>
<td align="center">X</td>
</tr>
<tr>
<td align="center"><b>ST</b></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
</tbody></table>

<p>I was unable to find a set of tones for this anywhere on the web, so I whipped up my own using Audacity.
Here is a <a href="https://github.com/tahnok/Blueboxer/tree/master/app/src/main/res/raw">set of 60ms long MF tones in ogg format</a>, or <a href="https://github.com/tahnok/Blueboxer/tree/master/raw_tones">the raw audacity projects</a></p>

<p>Soon I will publish the app on the play store (and probably F-Droid as well), and I’ll have to see if it works with Project MF</p>

<p>ps If you are looking for more retro fun times check out <a href="http://telehack.com/">Telehack</a></p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/building-a-watch-part-1.html">Building a Watch: Part 1</a></h1>
      <p class="post-meta">May 1, 2015</p>
    </header>

    <article class="post-content">
      <p>I want to build myself a watch.</p>

<p>One of my goals this year is to learn more electronics, and the best way I’ve found to learn is often to have a project. For example, the <a href="http://blog.tahnok.me/post/how-to-propose-to-an-engineer">heart box</a> taught me a bunch about laser cutting and tolerances. I think a watch will be a good project because:</p>

<ul>
  <li>I currently don’t have one, but I want one</li>
  <li>It has interesting size constraints (imposing limits is fun!)</li>
  <li>It’ll be battery powered</li>
  <li>Lots of room for improvements</li>
</ul>

<p>Bonus: It looks like I will probably have to make a circuit board for this! I have 0 clue on how to go about doing that yet, but this should give me a pretty good excuse.</p>

<h2 id="feature-wish-list">Feature Wish List</h2>

<p>I want the watch to have normal watch functions like keeping the time, having alarms and preferrably a stopwatch / timer mode.
It would also be really cool if I could make it silent, since beeping is pretty annoying. Instead, I think I should incorporate a vibration motor.</p>

<p>Eventually, I would like to have it connect to my phone / computer so it will need to have bluetooth at some point.</p>

<p>Finally, it needs to look good. That means, it can’t be a 20cm tall monstrosity covered in electrical tape.</p>

<h2 id="potential-parts">Potential Parts</h2>

<p>I’m not entirely sure which parts I will choose yet. I’ve been drawing heavily from <a href="http://oswatch.org/">The open source watch</a> to see how such a thing <em>can</em> be made. They use a <a href="https://www.microduino.cc/module/view?id=53d7037cb6c69d00003ede53">microduino core+</a> which is really cool and super tiny! I have the most experience with Arduino (and thus AVR) chips so I will probably stick with that, although now that I think about it, it might be cool to use a Propeller because it can multi-task. The other option is to use something like the Trinket Pro (since it has a nice battery board addon) but it may prove to be too big.</p>

<p>Next, I have to choose a display. After lots of googling I found the <a href="https://www.adafruit.com/product/1393">Sharp Memory Display</a> which is a cool mix of e-ink and LCD. (fun fact: it’s the <a href="https://www.ifixit.com/Teardown/Pebble+Teardown/13319">display in the pebble</a>). I don’t care much about color, so I think I will go with it despite the memory restrictions it will impose on the build.</p>

<p>I don’t yet know what battery I will use, probably something from Adafruit. I’m trying to choose between a 150 mAh and a 500 mAh one.</p>

<p>I <em>think</em> I need an RTC module, but it’s possible that I can get away with keeping track of time without it, and just relying on paired phone to deliver accurate time.</p>

<h2 id="next-steps">Next Steps</h2>

<p>I think I will order a bunch of parts to bread board this out. I need to test a bunch of things like power draw. Also probalby lots of yelling at my computer when I can’t figure out how to build a bread board.</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/homestuck-or-why-fandoms-are-fun.html">HOMESTUCK or why fandoms are fun!</a></h1>
      <p class="post-meta">Apr 14, 2015</p>
    </header>

    <article class="post-content">
      <p><img src="https://cdn.mspaintadventures.com/storyfiles/hs2/00001.gif" alt="" /></p>

<p>So recently I’ve been reading through a webcomic called Homestuck, which I totally recommend if and only if you have a lot of free time and enjoy silly computer jokes. Sadly it’s a bit tricky to get into. Also it’s stupendously long like <a href="http://readmspa.org/stats/">“251% the size of the Lord of the Rings”</a></p>

<p>TIPS ON GETTING STARTED:</p>

<ul>
  <li>Click on http://www.mspaintadventures.com/?s=6</li>
  <li>Ignore some of the weird bits like that the fact the website is called MS paint adventure. The author (andrew hussie) has a few other comics</li>
  <li>keep going</li>
</ul>

<p>Part of the fun is the jokes/puns, but also the crazily complicated plot. Like, it’s sufficiently weird and wonky that I have to consult the <a href="http://mspaintadventures.wikia.com/wiki/Homestuck">extensively curated fan wiki</a> on a fairly regular basis.</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/dabbling-with-kernel-hacking.html">Dabbling with KERNEL HACKING</a></h1>
      <p class="post-meta">Mar 30, 2015</p>
    </header>

    <article class="post-content">
      <p><a href="https://upload.wikimedia.org/wikipedia/commons/8/86/Eudyptula_minor_-Canberra_Zoo,_Australia-8b.jpg"><img src="/images/eudyptula.jpg" alt="" /></a></p>

<p>So I have this fascination with understanding how things work and it has had the unfourunate of becoming interested in <strong>THE LINUX KERNEL</strong></p>

<p>I’ve seen some cool (and excited) posts from <a href="http://jvns.ca/blog/2014/09/18/you-can-be-a-kernel-hacker/">Julia</a> <a href="http://jvns.ca/blog/2013/10/08/day-6-i-wrote-a-rootkit/">Evans</a> <a href="http://jvns.ca/blog/2013/10/07/day-5-i-wrote-a-kernel-module/">about</a> <a href="http://jvns.ca/blog/2014/01/04/4-paths-to-being-a-kernel-hacker/">the</a> <a href="I ran out of links">topic</a>! It got me excited, but more importantly it made the topic seems significantly less scary and approachable. I’ve been trying to learn C for a while now because so much important computer code is written in it.</p>

<p>To that end, one of the blog posts linked above mentioned the <a href="http://eudyptula-challenge.org/">EUDYPTULA CHALLENGE</a> which sounds exciting! (side note: <a href="https://en.wikipedia.org/wiki/Eudyptula">eudpytpula</a> is a GENUS of penguins) The gist of the challenge is that you are presented with a series of tasks that teach you more and more about kernels.</p>

<p>I’ve completed task 1! I would share the code with you but I’ve taken a VOW OF SILENCE so that each new recruit can work through the tasks on their own. Instead I will share some of the useful kernel resources I’ve found so far.</p>

<ul>
  <li><a href="http://www.tldp.org/LDP/lkmpg/2.6/html/">The Linux Kernel Module Programming Guide</a>: Pretty good guide to kernel modules, although it is for a much older kernel. Maybe that will be an issue at one point?</li>
  <li><a href="http://lxr.free-electrons.com/source/">Linux Cross Reference</a> pretty useful so far</li>
</ul>

<p>The biggest challenge I’ve faced so far has been getting Thunderbird to send email in a format that’s comprehensible to the little script that is is the Eudpyptula. Turns out email is a crufty old protocol.</p>

<p>Soon, I shall be MASTER OF THE LINUX KERNEL (I hope)</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/migrating-to-jekyll-for-blog-style-outpourings.html">Migrating to jekyll for blog style outpourings</a></h1>
      <p class="post-meta">Mar 15, 2015</p>
    </header>

    <article class="post-content">
      <p>Recently, my (previous) blog hosting platform decided to axe their free tier and the price they were asking was too much for me. Plus, I’d be thinking for a long time about how it would be nice to do the hosting by myself. In addition to cutting my dependence on an external service, I’d get to learning more about ops-y things in the process.</p>

<p>My first attempt at this migration was with Octopress, which I’d dabled with a bit in the past. I quickly abandoned it though because it felt much too complicated. The default theme was split too many times, there were weird and (to me) unneeded layers of complexity.</p>

<p>Instead, I chose to use the platform Octopress is based on: Jekyll. It produces a nice clean site of interlinked and static HTML pages (which should be easy to host). It consumes posts or pages in either markdown or html, so I can write a post however I want. It has a simple template system and a theme that fits in my head so I can make it look like how I want without throwing something at the wall.</p>

<p>Important the old content was a bit tricky, but there’s a nice plugin someone wrote to import an rss feed into jekyll that you can find <a href="https://github.com/jekyll/jekyll-import">here</a>. Just run <code>jekyll import rss --source http://blog.domain</code></p>

<p>The only challenge I had was importing the images from the old site. I ended up writing a little script to grab a list of all the images, download them and then replace the src with a local reference. Here’s the source for that</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;nokogiri&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;net/http&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;pry&#39;</span>

<span class="no">Dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;octopress/source/_posts/*.html&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">file_name</span><span class="o">|</span>
  <span class="n">file</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span>
  <span class="n">post</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span>
  <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">)</span>
  <span class="n">doc</span> <span class="o">=</span> <span class="no">Nokogiri</span><span class="o">::</span><span class="no">HTML</span><span class="o">::</span><span class="n">fragment</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

  <span class="n">doc</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">elm</span><span class="o">|</span>
    <span class="n">img_elm</span> <span class="o">=</span> <span class="n">elm</span><span class="o">[</span><span class="s1">&#39;src&#39;</span><span class="o">]</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="n">img_elm</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;temp/&quot;</span> <span class="o">+</span> <span class="no">File</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="n">to_s</span><span class="p">)</span>
    <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
      <span class="nb">puts</span> <span class="s2">&quot;skipping &quot;</span> <span class="o">+</span> <span class="n">filename</span>
    <span class="k">else</span>
      <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">image</span><span class="o">|</span>
        <span class="nb">puts</span> <span class="s2">&quot;downloading &quot;</span> <span class="o">+</span> <span class="n">img_elm</span>
        <span class="n">image</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
        <span class="nb">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="n">elm</span><span class="o">[</span><span class="s1">&#39;src&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;../images/&quot;</span> <span class="o">+</span> <span class="no">File</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="n">to_s</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">file</span><span class="o">.</span><span class="n">rewind</span>
  <span class="n">file</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">file</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="o">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">doc</span><span class="o">.</span><span class="n">to_html</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">))</span>
  <span class="n">file</span><span class="o">.</span><span class="n">close</span>
<span class="k">end</span></code></pre></div>

<p>What’s cool is that code up there is hosted on my site! I had been using gists before, but that’s just one more thing that was outside of my control.</p>

<p>I considered a few alternatives. Wordpress is kind of the standard for this sort of thing, but it feels like there’s a 0day every other week for it and I’m bad at patching. Plus I need a server capable of running a LAMP stack, whereas with something static (like this) I could host it on a 128 MB VPS that costs 15$ a year. Wait, <a href="http://buyvm.net/">that’s what I’m doing</a>. Ghost looked interesting, but I don’t know much about node or hosting a node site. I even thought about rolling my own, but  I tried that with <a href="https://github.com/tahnok/blag">blag</a> and it didn’t turn out quite the way I was hoping.</p>

<p>I will miss being able to write and publish a post anywhere I have an evernote account, but I think jekyll is good enough for now.</p>

<p>(ps do the comments work?)</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/making-a-clock.html">Making a clock</a></h1>
      <p class="post-meta">Feb 28, 2015</p>
    </header>

    <article class="post-content">
      <p>Approximately 2 years ago I ordered an <a href="https://www.sparkfun.com/products/10160">RTC clock module</a> from Sparkfun with the intention of building a clock of some kind.</p>
<p>FINALLY, I've gotten around to hooking everything up! Here's a picture of my amazing setup (if you wiring things for a living, please don't kill me)</p>
<p><img src="../images/w600_0af6afc4018ec642790f0fcba6b248dd.jpg" width="581" style="height:auto;"><img src="../images/w600_1dac1694da3c5fc7a23fa730ec211b3e.jpg" width="581" style="height:auto;"></p>
<p>The goal is to help my wake up in the morning by turning on a SAD lamp. If you've ever seen one of these faux sunlight lamps before you will wonder why I'm doing this. If you have seen one of these, you'll understand because these things are REALLY FREAKING BRIGHT.</p>
<h2>PARTS</h2>
<p>Here's the part list</p>
<ul>
<li>Arduino Uno</li>
<li><a href="https://www.sparkfun.com/products/10160">DeadOn RTC</a></li>
<li><a href="https://www.sparkfun.com/products/337">Coin cell battery</a></li>
<li><a href="https://www.adafruit.com/products/399">RGB LCD 16x2</a></li>
<li><a href="https://www.adafruit.com/products/268">Powerswitch Tail</a></li>
</ul>
<p>Getting all these parts together was actually surprisingly difficult. I ordered the RTC, but I didn't order a battery since I thought I could find one locally. I was wrong, so I ordered one online. Don't do that unless you have lots of time to wait. It took like 2 months to ship that tiny coin cell battery across the border to me here in Canada since it has lithium in it.</p>
<p>The RGB LCD was actually part of a kit from Adafruit which is all supposed to be controllable over I2C. I assembled almost all of the kit successfully, but the last piece I put on backwards. And of course, it was the 40pin chip which has proven to be resistant to my efforts to desolder it. <em>sigh</em>. Thankfully I was able to salvage the LCD part.</p>
<h2>ASSEMBLY</h2>
<p>So the first thing I tried to do was get the the RTC module working. This proved to be quite frustrating. I wired everything up, but I was getting garbage data back from the module. It was counting up (sorta), but random extra bits were getting set and unset. So it would go 0:0:59, 0:1:0, 1:1:1, 0:1:2. WTF. Eventually it turned out that the problem was the way I was grounding the module. I'm not entirely sure what was happening, but eventually I got the right wire connected to the ground on the arduino, bypassing the breadboard.</p>
<p>Everything else was relatively easy to set up. Adafruit has an excellent guide on their <a href="https://learn.adafruit.com/character-lcds/wiring-a-character-lcd">LCD Shield</a>. The powerswitch tail  is controlled by setting a single pin high or low.</p>
<h2>CODE</h2>
<p>Here's the whole thing below. Most of the code for interacting over SPI to the RTC module is from <a href="https://github.com/sparkfun/DeadOn_RTC/blob/v1.1/Libraries/DeadOn_RTC/examples/set_and_read_time/set_and_read_time.ino">Sparkfun</a>.</p>
<p>
<noscript><pre>400: Invalid request
</pre></noscript><script src="https://gist.github.com/c2e2afb76edde4905fcc.js"> </script>
</p>
<p>I had some fun messing around with sprinf (it's like printf, but it fills a char array!) You can set the alarm time by modifying the values in the Alarm int array.</p>
<h2>BUGS</h2>
<p>For some reason there are 2 garbage characters left on the LCD after the end of my screen. I "fixed" this by just appending more space characters than will fit in a 16 char line.</p>
<h2>FUTURE WORK</h2>
<p>It would be nice to have multiple alarm</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/how-to-read-a-texbook.html">How to read a texbook</a></h1>
      <p class="post-meta">Feb 13, 2015</p>
    </header>

    <article class="post-content">
      <p><img src="../images/w600_1d3087794299ca75d555e85d7c8ce1bf.jpg" border="0" width="236" style="height:auto;"><img src="../images/w600_7d5fb7a62ced7936b1df39191d17ddea.jpg" style="height: auto;"></p>
<p>So I really like learning things. It was one of my favourite parts of university (and high school before that), so I was really missing it when I started working. I tried for a while to read things when I felt the urge, but this rarely happened. I tried enrolling in a cousera course, but it felt a bit too much like the shitty parts of school, namely I can't move at my own pace.</p>
<p>My current system involves <a href="https://www.beeminder.com/overview">BEEMINDER</a> which is a pretty amazing tool for people like me who suck at motivating themselves. The basic idea is that you commit to some goal and beeminder makes sure that you reach it by forcing you to do a minimum amount of your goal everyday. You can do more than your goal and let it ride for a few days, but eventually you'll have to do work. If you fail, you have to pay beeminder money.</p>
<p>I use it to make sure I do an hour a week worth of reading / working of each of my texbooks. Currently I am reading the <a href="https://mitpress.mit.edu/sicp/full-text/book/book.html">Structure and Interpretation of Programming Languages</a> (available as a <a href="https://github.com/sarabander/sicp-pdf">PDF</a> and the <a href="http://cm.bell-labs.com/cm/cs/cbook/">The C Programming Language</a>. I wanted to make sure that I really got the fundamentals of computers. C and Scheme are both early programming languages with very different philosophies. (I know that just made some of you feel old)</p>
<p>As I go through these books, I am working through the exercises (You can follow my progress <a href="https://github.com/tahnok/c-book">here</a> and <a href="https://github.com/tahnok/sicp">here</a>). Writing actual code feels like the most important part of my attempts to learn so far. It's not enough (for me at least) to just read the information. I need to process it somehow, but I find working without direction (or feedback) tough. Thankfully you can find solutions to both SICP and the C programming language book on the web.</p>
<p><img src="../images/w600_355cd2bd4717ead88e1b3b3a5d6865b2.jpg" style="max-width: 260px; max-height: 343px; top: 0px; left: 0px; height: auto;"></p>
<p>So far I've only finished one book this way is <a href="http://www.nostarch.com/hacking2.htm">Hacking: the Art of Exploitation</a> which I highly recommend, even if you don't want to hack anything.</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/architecting-android-apps.html">Architecting Android Apps</a></h1>
      <p class="post-meta">Jan 29, 2015</p>
    </header>

    <article class="post-content">
      <div><br></div>
<div>
<img src="../images/w600_3a33d24cd59060ce1bc459492532691d.png" style="height:auto;" width="436"><br>
</div>
<p><br></p>
<div><br></div>
<div>So my first experiencing really writing code was on Shopify using Ruby on Rails. Rails adheres very strongly to the idea of Covention over Configuration. That is, frameworks should make choices about how things should be structured. For example, rails is an MVC framework which means you have models (which go in app/models), controllers (app/controllers), and views (app/views). Of course, you can mess with this but the point is that there is an expected place to put things.</div>
<div><br></div>
<div>Android is part of the Java ecosystem, and it doesn't seem to make any choices about how to structure... anything. This. Drives. Me. Nuts. You can put any code for anything anywhere. And there really doesn't seem to be a good reason for this. I'm currently working on Shopify for Android and our code doesn't really have a good structure at the moment. We have some folders that contain code grouped by feature, like orders and we have other folders that contain code based on function (views).</div>
<div><br></div>
<div>I feel that the job of a framework, (which admitedly Android... kind of is) is to make the job of a programmer easier. The hardest part of being a programmer is managing complexity. Configuration introduces compleity. Convention removes it</div>
<p>Our team is probably going to move to something like this: <a href="https://github.com/codepath/android_guides/wiki/Organizing-your-Source-Files">https://github.com/codepath/android_guides/wiki/Organizing-your-Source-Files</a>, but it doesn't quite feels as nice as rails.</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/my-first-experience-being-a-dungeon-master.html">My First Experience being a Dungeon Master</a></h1>
      <p class="post-meta">Jan 18, 2015</p>
    </header>

    <article class="post-content">
      <div>So recently a few of my friends decided that we wanted to get into Dungeons and Dragons. This was mostly due to enjoying <a href="http://www.worldofmunchkin.com/game/">Munchkin</a> a lot.</div>
<div><br></div>
<div><br></div>
<div>I started doing some research on the best way to get into D&amp;D. First I needed to pick an edition. 3.5e seems to be a clear favourite in the past, but I had heard that 5e was simpler than any previous version. Finally I found a glowing review of the <a href="http://io9.com/the-d-d-starter-set-is-a-great-way-to-introduce-newbies-1602583516">DnD Starter Kit</a> </div>
<div><br></div>
<div><img src="../images/w600_046b6430af30ed808cbc7d8bc438199d.jpg" alt="The D&amp;D Starter Set is a Great Way to Introduce Newbies to RPGs" height="354" width="636" style="height: auto;"></div>
<div><br></div>
<div>Turns out to have been a great choice. The kit includes a full set of dice, 5 pre-made characters, a rule book and campaign book and it was like 20$.</div>
<div><br></div>
<div><b>First time DM</b></div>
<div><b><br></b></div>
<div>I'm really glad the characters were pre-made. The rules are complicated enough for a first time group without having to deal with making a characters.<b><br></b>
</div>
<div><b><br></b></div>
<div>The campaign book was very helpful to me as a DM. I was really worried I would be able to improvise fast enough or well enough to keep the game flowing, but that turned out to be a bit of an over reaction.</div>
<div><br></div>
<div>Knowing all the rules is hard! I had to constantly check to see what actions a player could take, how ranged combat works and what kind of bonuses people would get.</div>
<div><br></div>
<div>All in all though, I had a really fun time and I think the rest of the party did too!</div>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/book-recommendations-from-2014.html">Book Recommendations from 2014</a></h1>
      <p class="post-meta">Dec 29, 2014</p>
    </header>

    <article class="post-content">
      <div>Since I enjoy reading and I enjoy hearing about what others are reading, I figured I should probably put up a list somewhere of the books that I enjoyed reading during 2014. If you have any recommendations, please post them in the comments! One can never have too many books on one's list of books to read.</div>
<div><br></div>
<div><b>The Martian</b></div>
<div><b><br></b></div>
<div>
<img src="../images/w600_f30aa7388f00b48324af45078f04b13d.jpg" alt="The Martian 2014.jpg" height="304" width="200" style="height: auto;"><b><br></b>
</div>
<div><b><br></b></div>
<div>If you have to read one book from my list, I recommend it be this one. It only took me 2 days (and 2 rather sleepless nights) to get through it. It's a fantastic thriller and as a bonus you get to learn about Mars since most of the science is accurate. The book is about the first manned mission to Mars, and as you might imagine Something Goes Wrong.</div>
<div><br></div>
<div><b>The Laundry Files (Series)</b></div>
<div><b><br></b></div>
<div>
<img src="../images/w600_827adaa3db6d4b2669781c7c5956fb99.jpg" alt="TAA-cover.jpg" height="340" width="220" style="height: auto;"><b><br></b>
</div>
<div><b><br></b></div>
<div>This series is so freakin' good. It's basically James Bond + Lovecraftian Horrors + Comedy and it's pure gold. You follow around Bob Oliver Francis Howard (aka <a href="https://en.wikipedia.org/wiki/Bastard_Operator_From_Hell">B.O.F.H</a>) who lives in a world where the right piece of code can be used to summon Eldritch horrors from the deep. But of course there's a government agency tasked with protecting us all from having our brains eaten out.</div>
<div><br></div>
<div><b>The Coming Swarm</b></div>
<div><b><br></b></div>
<div>
<img src="../images/w600_d3f79b12cfd5015c00a451a456671796.jpg" style="max-width: 231px; max-height: 346px; top: 0px; left: 0px; height: auto;"><b><br></b>
</div>
<div><b><br></b></div>
<div>I'm not finished this one yet, but it's been a very interesting read so far. The author make a compelling argument that DDoS actions should be considered a political act just like a sit in or a blockade.</div>
<div><br></div>
<div><b>The Girl With the Dragon Tattoo</b></div>
<div><b><br></b></div>
<div>
<img src="../images/w600_c69e304b967f30414d494548b51138ca.jpg" height="530" width="299" style="height: auto;"><b><br></b>
</div>
<div><b><br></b></div>
<div>This book was very slow to start, but it quickly got hard to put down. There are some pretty disturbing scenes, so if that's not your thing I don't recommend it. If you can stomach it though, it's a pretty good read with lots of really good twists.</div>
<div><br></div>
<div><b>Sufrace Detail</b></div>
<div><b><br></b></div>
<div>
<img src="../images/w600_b4c00f22e47a2e5c36f52fe867d05d11.jpg" alt="Bankssurfacedetailcover.jpg" height="308" width="200" style="height: auto;"><b><br></b>
</div>
<div><b><br></b></div>
<div>I love Iain M Banks. All of The Culture novels are fantastic, and this one is no exception. The plots are too numerous to list, but one of the fascinating ideas in this book is that of a Virtual Hell. If you suppose that minds can be simulated and run on computers, there's no reason why you couldn't digitize someone's mind before they die and then upload it to a virtual hell if they had failed to live a good life. If you've read any of other culture novels, you'll enjoy getting a look at what a Mind with some severe psychopathic tendencies looks like and how it can exist in the Culture.</div>
<div><br></div>
<div><b>Count Zero</b></div>
<div><b><br></b></div>
<div>
<img src="../images/w600_1436e5f7333df36818fe62d452aa8185.jpg" alt="CountZero(1stEd).jpg" height="339" width="200" style="height: auto;"><b><br></b>
</div>
<div><b><br></b></div>
<div>This is a sequel (kind of) to Neuromancer, but all of the characters are different. I found this book much easier to follow compared to Neuromancer, but Gibson still writes in a way that I find very difficult to follow. My friend said it best when he described it as "poetry"</div>
<div><br></div>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/how-to-propose-to-an-engineer.html">How to propose to an engineer</a></h1>
      <p class="post-meta">Nov 30, 2014</p>
    </header>

    <article class="post-content">
      <div>So several months ago I had decided that I was going to ask my girlfriend to marry me. BUT we have been together for 6.5 years at this point so I needed to make sure it was really memorable. The first step was to pick a ring. Thankfully I met a jeweller at <a href="http://www.artengine.ca/community/modlab-en.php">Modlab</a> who 3D prints rings: <a href="http://fusedelements.ca/">Fused Elements</a>. Well, sort of. She 3D prints the ring in wax and then uses that to make a mould which she fills with molten metal. Upon hearing that I KNEW that's where I would get the ring. (Bonus: I can get the ring re-made in the event of catastrophic failures)</div>
<div><br></div>
<div style="text-align: center"><img src="../images/w600_fd2ef08091f1a232ba65c223037d34e2.jpg" style="height: auto;"></div>
<div><i>The ring!</i></div>
<div><br></div>
<div>One day on reddit I saw this really fantastic ring box that someone had made involving a <a href="http://hackaday.com/2014/03/24/mechanical-iris-will-make-you-want-a-laser-cutter-even-more">mechanical iris</a> that looked fantastic. You can check out the whole album of the build process here: <a href="https://imgur.com/a/3Mu8J">https://imgur.com/a/3Mu8J</a>
</div>
<div><br></div>
<div>After humming and hawing for a bit I came up with a plan to build a series of boxes to hold the ring. My fiancé likes unwrapping things so having many layers was essential. This was my first plan</div>
<ul>
<li>
<b>Stage 1</b>: Original ring box (they are so iconic)</li>
<li>
<b>Stage 2</b>: 3d printed iris box like this one: <a href="http://www.thingiverse.com/thing:140048">http://www.thingiverse.com/thing:140048</a>
</li>
<li>
<b>Stage 3</b>: Laser cut acrylic iris box like this one: <a href="http://www.instructables.com/files/orig/FVO/YGOP/HSICZZ6P/FVOYGOPHSICZZ6P.pdf">http://www.instructables.com/files/orig/FVO/YGOP/HSICZZ6P/FVOYGOPHSICZZ6P.pdf</a> but in the shape of a heart</li>
<li>
<b>Stage 4</b>: Wooden box containing a USB key with all the design files</li>
</ul>
<div>But like all plans it fell apart as soon as it encountered reality.</div>
<div><br></div>
<div><b>STAGE 1.0</b></div>
<div><br></div>
<div>This is the only part of the plan that went off without a hitch! Working with Fused Elements was really easy and the ring turned out beautifully.</div>
<div><br></div>
<div><b>STAGE 2.0</b></div>
<div><br></div>
<div>The first problem I encountered was modifying the existing 3d designs for the iris box so that the original ring box would fit. (A secondary problem was gaining access to a 3d printer, but thankfully a good friend of mine had recently acquired one). I had to enlarge the designs by close to 200% so that the box would fit through the inner ring of the iris. But in doing this I ended up with a box that had a truly gigantic outer diameter. It was getting close to 20cm and what was just stage 2!</div>
<div style="text-align: center"><img src="../images/w600_05d8418dbba63b994a165c7fa6bc2142.jpg" style="height: auto;"></div>
<div><i>Photo of the iris box I wanted to use at first.</i></div>
<div><br></div>
<div style="text-align: center"><img src="../images/w600_d53be1e891834c04dd7948af1903a19f.png" style="width: 512px; height: auto;"></div>
<div><i>TinkerCAD</i></div>
<div><br></div>
<div>(insert picture here)</div>
<div><br></div>
<div><b>STAGE 2.1</b></div>
<div><br></div>
<div>After many months of searching through thingiverse (I may be embellishing) I found this really cool looking <a href="http://www.thingiverse.com/thing:28827">parametric twisted star box</a> which had some openscad files I could modify and use.</div>
<div><br></div>
<div>Printing this turned out to be quite an ordeal. My girlfriend was away for a weekend so I signed out the Ultimaker from Art Engine (my local makerspace) and started printing. But this box was actually pretty big and as anyone who's done any 3d printing will tell you, printers can be finicky. Here are the 3d aborted bases I have. Only one was intentional. The other too failed when the filament got twisted and stopped feeding properly.</div>
<div><br></div>
<div><br></div>
<div style="text-align: center">
<img src="../images/w600_9cce8b72fe34280eadb4da3ab5b198e5.jpg" style="height: auto;"><br>
</div>
<div><br></div>
<div>But 4th times the charm! You can see the finished box below</div>
<div><br></div>
<div style="text-align: center"><img src="../images/w600_93578620063dc5206126c3b5af9e72de.jpg" style="height: auto;"></div>
<div style="text-align: center"><br></div>
<div style="text-align: center"><img src="../images/w600_87a057b4c95d59484871208dc5680050.jpg" style="height: auto;"></div>
<div><br></div>
<div>The ring box fits! I messed up a tiny bit in modifying the box. The lid should have had a slightly smaller opening at the top since where the twists meet there's a tiny bit of a gap.</div>
<div><br></div>
<div><b>STAGE 3.0</b></div>
<div><br></div>
<div>My initial plan was to have a second box with an mechanical iris based on this cool design I had found on Instructables (<a href="http://www.instructables.com/id/Mechanical-iris-v20/?ALLSTEPS">http://www.instructables.com/id/Mechanical-iris-v20/?ALLSTEPS</a>). That would make the lid and the rest of the box would be made by stacking sheets of material that I would cut into shape on a laser cutter and hold together with nuts and bolts.</div>
<div><br></div>
<div><br></div>
<div style="text-align: center"><img src="../images/w600_8bfdb181b1bc1cbb2dcdda08afccb3a3.jpg" alt="Picture of Mechanical iris v2.0" style="height: auto;"></div>
<div><br></div>
<div>But once again I completely under estimated how large this would end up making my box. Stage 2 had to fit through that inner hole and once I'd scaled up the design it wouldn't fit on the bed of the laser cutter any more...</div>
<div><br></div>
<div><b>STAGE 3.1</b></div>
<div><br></div>
<div>I needed to make this piece just as special as the other stages so I ended up choosing to make the box heart shaped. Not just regular heart shaped, but a heart based on the equation y=|x|+sqrt(1-x²) and y=|x|-sqrt(1-x²) from -1 to 1 (graphed on <a href="http://www.wolframalpha.com/input/?i=y%3D%7Cx%7C%2Bsqrt%281-x%C2%B2%29+and+y%3D%7Cx%7C-sqrt%281-x%C2%B2%29+from+-1+to+1&amp;h=1">Wolfram Alpha</a>). When my fiancé and I first started dating I liked to show off so I had sent her that equation. She liked it enough to have a large poster of it made for her bedroom.</div>
<div><br></div>
<div>With a shaped picked out I started designing the box itself in inkscape. You can see the end result below.</div>
<div><br></div>
<div style="text-align: center"><img src="../images/w600_c63f8c8fe675ea3efdeb9315f6961d1e.png" style="width: 717px; height: auto;"></div>
<div>As I was working on the design I needed to pick the material I wanted to use. I ended up choosing 1/8" opaque red acrylic. I probably should have figured out where to get some before setting my heart on it though... I ended up calling a the following places in Ottawa that sell acrylic to try and find some:</div>
<ul>
<li>Canus Plastics</li>
<li>Laird Plastics</li>
<li>Plastics &amp; Signs of Ottawa</li>
</ul>
<div>I ended up going with Laird because they could get it for me in a week. The only problem I ran into here was that I had to order an entire 4' x 8' sheet of red acrylic... Thankfully Laird cut it into 2' x 1' sheets for me. Transporting a sheet of material that huge is difficult on a bike and I can only fit a 2' x 1' sheet in the laser cutter anyway.</div>
<div><br></div>
<div>After picking up the sheets I started prototyping my final design in cardboard. I cut out 5 hearts in cardboard and checked that the holes I had cut fit the screws, and that stage 2 would fit in the whole properly. Everything seemed to be perfect so I cut out a single heart in acrylic. It fit the box and the screws slid through the holes. So I cut out the rest of the hearts I could on that first sheet of acrylic and...</div>
<div><br></div>
<div>They didn't fit together. This is the first time I learned about the importance of <b>tolerances</b>. The bolt holes needed to have more clearance. So I modified the designs to add an extra few mm of clearance. I cut out another sheet of hearts and tried putting them together. They fit together perfectly! So I cut another sheet and... promptly ran into problems with tolerances again. Thankfully I was able to wiggle the second sheet worth of hearts down so at least I didn't waste any hearts, but for the next couple batches I increased the bolt hole size again.</div>
<div><br></div>
<div>The last part of this stage was to come up with a lid. Initially, I envisioned using a gear shape for the lid and having a second lower layer that was that had a hole same upper gear shape except cut out again after having been rotated a bit. This way the lid would slide down a layer and could rotate about a gear tooth's worth.</div>
<div><br></div>
<div>Turns out doing that is hard. Most of the gears that I could generate were meant to be used as actual gears, I needed something more aesthetically pleasing. I ended up going with a simplified version of the above design. I had a circle with two small tabs offset by 180 degrees. Below it I had a circular whole with two quarters of a larger circle cut out so that the tabs of the lid could rotate.</div>
<div><br></div>
<div style="text-align: center"><img src="../images/w600_7e884815e294e3b77eae3281f335b982.png" style="width: 975px; height: auto;"></div>
<div><br></div>
<div>This is the design I went with, but it suffers from a few... problems. The second layer cut out should be a bit bigger so that the lid can rotate better. Also the lid needs to be a bit smaller. I also went with an acrylic handle that I cut out, but I think a set of finger sized holes in the lid would work even better.</div>
<div><br></div>
<div>Anyway, here's the final product:</div>
<div style="text-align: center"><img src="../images/w600_52ececd0db2b19ed77dd915b643fed3d.jpg" style="height: auto;"></div>
<div style="text-align: center"><br></div>
<div style="text-align: center"><img src="../images/w600_6262c5107b4a390992ca27750ba3bce5.jpg" style="height: auto;"></div>
<div><br></div>
<div><b>STAGE 4.0</b></div>
<div><br></div>
<div>Now that I had dimensions from stage 3.1 I could try and come up with a box that would fit it. I wanted something wooden, but it turns out that finding a large wooden box in Ottawa is kinda hard. I ended up going with the largest one that they had at Michael's and painting Tardis blue.</div>
<div><br></div>
<div>A few months earlier I had given my girlfriend a key in order to get her excited. I needed some way to attach a latch to the box. I was super concerned that I wouldn't be able to find something that would work, but I got lucky and they had one that worked perfectly at the hardware store.</div>
<div><br></div>
<div>I also wanted to use some of the design files I had gotten from Fused Elements, so I decided to engrave them with the laser cutter on the lid of stage 4. It turned out really well, although I did have to come up with a way to have the lid stay flat while still attached to the base.</div>
<div><br></div>
<div style="text-align: center"><img src="../images/w600_7bcb84ebfb49b98f24ec537ddc7622b9.jpg" style="height: auto;"></div>
<div style="text-align: center"><br></div>
<div style="text-align: center"><img src="../images/w600_168a2ed90c6dc2a8a0deb5309e9fc97a.jpg" style="height: auto;"></div>
<div><br></div>
<div><br></div>
<div>I hope you dear reader might be inspired in your own proposals (if that's your thing) just as I was when I saw the CNC'd Iris box.</div>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/installing-ubuntu-14.04-on-a-15%22-late-2013-macbook-pro-(with-full-disk-encryption).html">Installing Ubuntu 14.04 on a 15" late 2013 Macbook Pro (with Full Disk Encryption)</a></h1>
      <p class="post-meta">Nov 23, 2014</p>
    </header>

    <article class="post-content">
      <div>
<img src="../images/w600_34605f2250c33f03d2938e26e91a3a02.png" alt="http://www.tejasbarot.com/wp-content/uploads//eIUaGXc.png" style="height: auto;"><br>
</div>
<div><br></div>
<div><span>SO I've been looking but I have yet to find a sufficiently detailed guide for getting Ubuntu running on a retina macbook pro, especially one that has full disk encryption enabled. Hopefully this document will help others looking to dual boot as well as serve as a reference for me in the future when I inevitably forget all of this.</span></div>
<div><br></div>
<div>
<b>BEFORE YOU DO ANYTHING YOU NEED TO HAVE A BACKUP!</b><br>
</div>
<div><br></div>
<div>The first step was installing a better EFI boot loader (although I'm not sure if this step is strictly necessary anymore). In the past that would involve rEFIt, but it seems to have lots its maintainers. Instead I've gone with <a href="http://www.rodsbooks.com/refind/">rEFInd</a>. Their site is pretty 1990s, but the software itself is pretty good. I mostly just followed the instructions on their <a href="http://www.rodsbooks.com/refind/installing.html">installation page</a> and their <a href="http://www.rodsbooks.com/refind/yosemite.html">page on Yosemite</a>, although I did have to make a few changes so that booting wouldn't take 30 extra seconds. Note, I had to install rEFInd to my <a href="https://en.wikipedia.org/wiki/EFI_System_partition">ESP partition</a>
</div>
<div><br></div>
<ol>
<li>First step is to download <a href="http://sourceforge.net/projects/refind/files/0.8.3/refind-bin-0.8.3.zip/download">rEFInd</a> (version 0.8.3 as of this article) and unzip it somewhere.</li>
<li>Now mount the ESP partition by making a new directory ( <span style="font-family: 'Andale Mono';">mkdir /Volumes/esp </span>) and then running: <span style="font-family: 'Andale Mono';">sudo mount -t msdos /dev/disk0s1 /Volumes/esp</span>
</li>
<li>Next cd into the directory you unzipped rEFInd and run <span style="font-family: 'Andale Mono';">./install.sh --esp</span>
</li>
<li>Now edit /Volumes/esp/EFI/refind/refind.conf and uncomment the line about <tt>dont_scan_volumes</tt> and change it to be <span style="font-family: 'Andale Mono';">dont_scan_volumes "foo,bar"</span>
</li>
<li>Next move /Volumes/esp/EFI/refind to /Volumes/esp/EFI/BOOT</li>
<li>Finally move /Volumes/esp/EFI/BOOT/refindx64.efi (I think) to /Volumes/esp/EFI/BOOT/bootx64.efi</li>
<li>REBOOT and enjoy your shiny FOSS boot manager</li>
</ol>
<div><br></div>
<div>The next step is to format your hard drive so that it has 3 new partitions for Ubuntu. I like to use full disk encryption in linux too which means that I need a separate /boot partition in addition to / and swap (although frankly I'm not sure I need swap when I have 16GB of RAM)</div>
<div><br></div>
<div>BE CAREFUL HERE. I managed to bork my Mac installation by trying format my disk from the ubuntu live CD. Thankfuly I had a time machine backup.</div>
<div><br></div>
<div>I ended up formatting my disk to my liking by booting in to OS X's recovery mode and creating 3 new partitions. My /boot was only 1GB, swap was 16GB and I set aside about 90GB for the main installation.</div>
<div><br></div>
<div>Next you need to format a USB stick with the ubuntu installation image. The instructions I followed are from here: <a href="http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-mac-osx">http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-mac-osx</a>
</div>
<div><br></div>
<div>Reboot with your newly formatted USB and select it from the options presented.</div>
<div><br></div>
<div>Choose 'Something else' when asked how to install ubuntu. Click on the 1 GB partition and use it as /boot. Next choose the large partition you created for linux and choose the option "use as physical volume for encryption"</div>
<div><br></div>
<div>Also, make sure you choose the partition you have as /boot for the installation of the boot loader. <b>YOU DO NOT WANT TO LEAVE IT AT ITS DEFAULT</b>
</div>
<div><br></div>
<div>Next post I'll include information on how to configure your new dual boot computer!</div>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/intro-to-kerbal-space-program.html">Intro to Kerbal Space Program!</a></h1>
      <p class="post-meta">Nov 9, 2014</p>
    </header>

    <article class="post-content">
      <div>So I’ve discovered an another awesome sandbox game! I really thought I didn’t like them, but I was wrong. Trying to build space ships is fun! If you succeed, you get to go to space! If you fail things explode in amusing ways! Bonus, you’re some kind of magic god in the game so you can roll back time and make the explosion never happen!</div>
<div><br></div>
<div>My only complaint so far has been just how obscure the UI can be… obscure. You have to click or double click or right click or possibly even double right click on exactly the right part of your ship in order to get a menu to show up...</div>
<div><br></div>
<div>The best guide I’ve read so far is found here: <a href="http://mykspcareer.com/2014/07/volume1/">http://mykspcareer.com/2014/07/volume1/</a>
</div>
<div><br></div>
<div>The best part of this game though is just how cool I feel while playing! Who doesn’t want to feel like a rocket scientist? It feels really cool to understand how orbital mechanics work.</div>
<div><br></div>
<div>BONUS: <span style="line-height: 1.45;">Awesome ships I’ve made!</span>
</div>
<div><br></div>
<div><img src="../images/w600_5bdcec232177a865bf584023af10aef4.png" style="width: 651px; height: auto;"></div>
<div><br></div>
<div>I found it is IS possible to build a plane capable of taking off without wheels</div>
<div><br></div>
<div>
<img src="../images/w600_c7765a0ba58ea447bc8e4139ba5fd48b.png" style="width: 368px; height: auto;"><br>
</div>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/solution-to-1o57's-hackaday-challenge.html">Solution to 1o57's Hackaday Challenge</a></h1>
      <p class="post-meta">Oct 24, 2014</p>
    </header>

    <article class="post-content">
      <div>So on October 6th 1o57 (who creates <a href="https://blog.tahnok.me/defcon-22-badge-challenge-walkthrough">the DEF CON badge challenge</a>) gave a fantastic talk at the <a href="http://hackaday.com/2014/10/06/hackaday-10th-anniversary-1o57-and-the-art-of-encryption/">hackaday 10th anniversary</a> which you should totally watch:</div>
<div><br></div>
<div><iframe width="500" height="281" src="https://www.youtube.com/embed/-hCL7dE-nqg?feature=oembed" frameborder="0" allowfullscreen></iframe></div>
<div><br></div>
<div>(go ahead, I’ll wait)</div>
<div><br></div>
<div>You might have noticed some random text in the slides, but you might not have. Anyway here are the slides</div>
<div><br></div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/YNNoeJDeSU">pic.twitter.com/YNNoeJDeSU</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518582899558215680">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/YNNoeJDeSU">pic.twitter.com/YNNoeJDeSU</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518582899558215680">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/ss3WEzndR9">pic.twitter.com/ss3WEzndR9</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518582806134267904">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/NVxwlBEe2y">pic.twitter.com/NVxwlBEe2y</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518582628450959362">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/oE64HPUqtx">pic.twitter.com/oE64HPUqtx</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518582497672589312">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/LMXhiJj5mu">pic.twitter.com/LMXhiJj5mu</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518582419717226496">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/Tb42KBb8bl">pic.twitter.com/Tb42KBb8bl</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518582291027595264">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/UhXCk0tyLX">pic.twitter.com/UhXCk0tyLX</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518582190322356226">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/bIDNsV3D5g">pic.twitter.com/bIDNsV3D5g</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518581972914819072">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
</div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/zqarmBmwNd">pic.twitter.com/zqarmBmwNd</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518581836297936897">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div><br></div>
<div>And here is a copy of all the letters on each of the slides</div>
<div><br></div>
<div>DO
<div>XIYL</div>
<div>DCYV</div>
<div>DKIK</div>
<div>NKUM</div>
<div>KRYD</div>
<div>NBYG</div>
<div>ONYM</div>
</div>
<div>NXOC</div>
<div><br></div>
<div>on one line:</div>
<div><br></div>
<div>DOXIYLDCYVDKIKNKUMKRYDNBYGONYMNXOC</div>
<div><br></div>
<div>Hrmmm, well the first thing you might try is a Caesar cipher. In the video you’ll notice that 1o57 repeatedly mentions that it’s Hackaday’s TENTH anniversary, so we should try decrypting the above string with a key of 10. (here’s <a href="http://web.forret.com/tools/rot13.asp?rot=10&amp;cipher=DOXIYLDCYVDKIKNKUMKRYDNBYGONYMNXOC&amp;dir=decrypt">a tool do to that</a>)</div>
<div><br></div>
<div>TENYOBTSOLTAYADAKCAHOTDROWEDOCDNES</div>
<div><br></div>
<div>(side note: I cheated on this step by using an automated caesar cipher breaker)</div>
<div><br></div>
<div>Hrmmm that still looks like nonsense, but it does start with the word ten, so we’re probably close...</div>
<div><br></div>
<div>Wait a second! The string is backwards! It’s not ten it’s net!</div>
<div><br></div>
<div>SENDCODEWORDTOHACKADAYATLOSTBOYNET</div>
<div><br></div>
<div>or cleaned up</div>
<div><br></div>
<div>Send codeword to hackaday@lostboy.net</div>
<div><br></div>
<div>Ok, well now we know where to send the codewords. The only unsolved part of the puzzle is this last slide</div>
<div><br></div>
<div>
<blockquote class="twitter-tweet">
<p><a href="https://twitter.com/hackaday">@hackaday</a> <a href="http://t.co/01Magsvu1u">pic.twitter.com/01Magsvu1u</a></p>— LosT/李智上 (@1o57) <a href="https://twitter.com/1o57/status/518581720312856577">October 5, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div><br></div>
<div><br></div>
<div><img src="../images/w600_9f8bf4c63dee3f082eb17cc37a1f4292.png" style="width: 872px; height: auto;"></div>
<div><br></div>
<div>WTF are those things?! Now fans of Sherlock Holmes may recognize these, but at the time I did not, so I went to my best friend Google to try and figure it out. I tried lots of search terms like “stickman code" (and variants on that) and “semaphore" (since I thought maybe the positions on the flags was significant), until I came across this page:</div>
<div><br></div>
<div>http://www.geocachingtoolbox.com/index.php?lang=en&amp;page=dancingMen</div>
<div><br></div>
<div>which features a code called the Dancing Men!</div>
<div><br></div>
<div>This code comes from a Sherlock Holmes novel called <a href="https://en.wikipedia.org/wiki/The_Adventure_of_the_Dancing_Men">The Adventure of the Dancing Men</a>
</div>
<div><br></div>
<div>
<img src="../images/w600_2aa8c86d7c01e076f23d0d3b19718c10.png" style="width: 825px; height: auto;"><br>
</div>
<div><br></div>
<div>And we can use the above image to decrypt the band, which decrypts to:</div>
<div><br></div>
<div>codeword psychobilly ciphers</div>
<div><br></div>
<div>Thanks for the fun puzzle 1o57!</div>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/nixie-tubes.html">NIXIE TUBES!!</a></h1>
      <p class="post-meta">Oct 9, 2014</p>
    </header>

    <article class="post-content">
      <div>So approximately 2000 years ago I got a set of 6 nixie tubes as a gift. WTF is a nixie tube you ask? This is a nixie tube:</div>
<div><br></div>
<div><img src="../images/w600_85f1d5be037e617d9641ca65c119a813.jpg" alt="File:ZM1210-operating edit2.jpg" height="600" width="187" style="height:auto;"></div>
<div><br></div>
<div>It’s an device for displaying all ten digits (0 through 9) using “glow discharge" (that thing that makes old incandescent lightbulb works), while looking really really cool.</div>
<div><br></div>
<div>The tubes I have are IN-17s and they operate at <b>180V</b>. That is a lot of volts and it was pretty scary for me putting the circuit together since I’ve never worked with such high voltages. Fortunately, these works at relatively low amperages so I only have to worry about pain, not death.</div>
<div><br></div>
<div>Now, you might be wondering what I need to drive these things. The answer would be a <font face="Arial"><b>Russian K155NA1 Driver Chip</b>, which is basically a high voltage <a href="https://en.wikipedia.org/wiki/Binary-coded_decimal">Binary-Coded Decimal</a> decoder and a circuit to step up wall wart DC voltage (9V at 1a) to 180V. Thankfully <a href="http://www.robotpirate.com/">a nice person</a> on the internet made an arduino shield to do all this called the <a href="http://arduinix.com/">ArduiNIX</a> </font>
</div>
<div><br></div>
<div>Here’s my completed display:</div>
<div><br></div>
<div><img src="../images/w600_2dacf7a38ca97348b6cc9b433a8b493f.jpg" style="height:auto;" width="475"></div>
<div><br></div>
<div>I’m still trying to understand how the circuit works. There are 20 pins and 4 grounds, so I can apparently control a total of 80 digits. I’m only using 60 digits in this setup (10 digits per tube times 6 tubes), but I’m still pretty lost when reading the <a href="http://arduinix.com/Main/Code/ANX-6Tube-Clock-Crossfade.txt">demo code</a>
</div>
<div><br></div>
<div>My current understanding is that I have 2 BCDs which I can control with 8 pins (4 each, which makes sense since 2^4 = 16 &gt; 10 digits), and I can control the 4 anode (aka ground) pins. From the code it seems I have to display 2 digits at a time, but I’m not at all clear how the digits are split up. That will be the subject for my next post!</div>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/shell-shocked.html">SHELL SHOCKED</a></h1>
      <p class="post-meta">Sep 25, 2014</p>
    </header>

    <article class="post-content">
      <div>There's a lot of chatter right now about this new bash env bug, affectionately known as <a href="https://access.redhat.com/node/1200223">CVE-2014-6271</a>. I'm going to try and explain for your (but mostly my own) benefit.<br>
</div>
<div>
<div><br></div>
</div>
<div><span style="font-size: 18px;"><b>BACKGROUND</b></span></div>
<div>
<div><br></div>
<div>The primary way that programmers interact with a (un|l)inux system is via the shell, aka THE COMMAND LINE (cue thunder clap)</div>
<div><br></div>
<div>Now, like everything on a computer, the shell is a program. It's kinda special since it runs OTHER programs. It's not just users who use it, but also other commands.</div>
<div><br></div>
<div>In bash, there's these things called **environment variables**, which is a way to declare values which can be used by scripts/programs to store variables. A common shell variable is LANG, which contains the current users language. A program launched from the shell can use this information to display output in the correct language.</div>
<div><br></div>
<div>Bash is also a self contained programming language, and like any good programming languge it has functions. You can declare functions in bash like so</div>
<div><br></div>
</div>
<div><span style="font-family: 'Andale Mono';">       foo() {</span></div>
<div><span style="font-family: 'Andale Mono';">         echo 'bar';</span></div>
<div><span style="font-family: 'Andale Mono';">       }</span></div>
<div>
<div><br></div>
<div>Seems pretty straight forward right? The key is that bash stores functions that it is exporting to another bash shell using environment variables.</div>
<div><br></div>
<div>Only there's a bug in bash which means that once a function is parsed, bash happily keeps executing the rest of the environment variable.</div>
</div>
<div><br></div>
<div><span style="font-size: 18px;"><b>THE ACTUAL PROBLEM</b></span></div>
<div>
<div><br></div>
<div>Ok, so what does that look like? You can normally declare an env variable like so:</div>
<div><br></div>
</div>
<div><span style="font-family: 'Andale Mono';">       bar='something important'</span></div>
<div>
<div><br></div>
<div>You can declare a function in an environment variable like so:</div>
<div><br></div>
</div>
<div><span style="font-family: 'Andale Mono';">       foo='() { echo 1;};'</span></div>
<div>
<div><br></div>
<div><br></div>
<div>And the exploitable version is like this:</div>
<div><br></div>
</div>
<div><span style="font-family: 'Andale Mono';">       x='() { ignored;}; echo vulnerable' bash</span></div>
<div>
<div><br></div>
<div>The x='() { :;}; bit is just to ensure that bash parses this environment variable like a function. After the second semi-colon, you can execute any bash you want.</div>
</div>
<div><br></div>
<div><b><span style="font-size: 18px;">WHY THIS IS BAD</span></b></div>
<div>
<div><br></div>
<div>What's the big deal you ask? I don't let random internet strangers set environment variables! Well, you might be doing it without realizing it. The first series of exploits that can be taken advantage of right now is CGI.</div>
<div><br></div>
<div>CGI lets you execute a shell script of any kind to respond to a web request. The problem is that if you are using a bash script, cgi helpfully sets the user agent of the request it is trying to process to an environment variable! This means that by doing</div>
</div>
<div><br></div>
<div><span style="font-family: 'Andale Mono';">       curl -A "() { :;}; whoami" http://some.vulnerable.computer/cgi-script</span></div>
<div>
<div><br></div>
<div>You can execute code</div>
<div><br></div>
<div>The second class of attacks that is interesting is that there are lots of ssh systems that provide access, but don't give the end user a shell. The most common case of this is with git, where users exist on a system for execution, but ssh is configured not to respond with a shell. A user without a shell account (but with access) can login to ssh like so:</div>
<div><br></div>
<div><span style="font-family: 'Andale Mono';">  ssh -o 'rsaauthentication yes' user@host.me '() { ignored; }; /usr/bin/whoami'</span></div>
<div><br></div>
<div>The final interesting class of attacks is with dhclient. <span style="line-height: 1.45;">Now, when you connect your computer to a network, it sends a request out to EVERY computer asking for an IP address. Normally a DHCP server would respond to this request, and this response is used to set some environment variable before a shell script is run on the requester's machine to set ip addresses and such what. The problem here is that a malicious user could respond faster than a real DHCP server with a response that contained fields which would be put into environment variables and then GAME OVER.</span>
</div>
</div>
<div><br></div>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/make-something-(or-how-i-learned-to-stop-worrying-and-love-making-things).html">Make something (or How I learned to stop worrying and love making things)</a></h1>
      <p class="post-meta">Sep 9, 2014</p>
    </header>

    <article class="post-content">
      <div>
<div>I’d like to encourage all of you (myself included) to make more things. I don’t care what kinds of things you make, but make something. You can do it by yourself, or you can work with someone else, or you can make something based on someone else’s work. Here are some suggestions of things you can make:</div>
<div><br></div>
<ul>
<li>A bowl of pasta with homemade sauce and meatballs</li>
<li>A robot that you can play catch with</li>
<li>A story about a girl and her pet rat</li>
<li>A webpage that generates new, exciting, and sometimes nonsensical jokes about noses</li>
<li>An edit to wikipedia about a topic that interests you</li>
<li>A quilt for someone you care about like a pet</li>
</ul>
<div>I enjoy every part/phase/stage of making.</div>
<div><br></div>
<div>There’s the planning stage, where you try and come with ideas, turn them around in your mind and tweak them until you can bring it into the world.</div>
<div><br></div>
<div>There’s the scavenging phase where you find and bring together all of the pieces/thoughts/feelings you need to make the thing inside your head(s).</div>
<div><br></div>
<div>There’s the doing phase, where you take something like a blank page, an existing project, or a box of parts and transform it into something new/different/better/worse than it was before</div>
<div><br></div>
<div>And then it starts over again. The thing you’ve made eventually changes again. Sometimes it’s entropy as it falls apart. Sometimes it’s you, coming back to tweak what you’ve created because you had another idea. Sometimes it’s teeth, because you’ve baked a delicious cake and there’s no point in letting a cake go to waste.</div>
<div><br></div>
<div>You’ll be able to look forward to some part of the making process, or think back to the end result and it’ll make you smile or frown or both.</div>
<div><br></div>
<div>If you need help making things, or want to share the things you’ve made, or you’re looking for people who like making just as much as you do, you should see if there’s a hackerspace/makerspace/sewing club/quilting mafia/organic food co-op near you and you should get involved. We humans are social creatures.</div>
<div><br></div>
<div><br></div>
<div>PS</div>
<div><br></div>
</div>
<div>
<span style="font-family: 'Andale Mono';"> ____   ___  _   _ _ _____   ____  _____      _      ____ ___ ____ _  __</span>
<div><span style="font-family: 'Andale Mono';">|  _ \ / _ \| \ | ( )_   _| | __ )| ____|    / \    |  _ \_ _/ ___| |/ /</span></div>
<div><span style="font-family: 'Andale Mono';">| | | | | | |  \| |/  | |   |  _ \|  _|     / _ \   | | | | | |   | ' /</span></div>
<div><span style="font-family: 'Andale Mono';">| |_| | |_| | |\  |   | |   | |_) | |___   / ___ \  | |_| | | |___| . \</span></div>
<div><span style="font-family: 'Andale Mono';">|____/ \___/|_| \_|   |_|   |____/|_____| /_/   \_\ |____/___\____|_|\_\</span></div>
</div>
<div><span style="font-family: 'Andale Mono';">                                                                      </span></div>
<div><span style="font-family: 'Andale Mono';"><br></span></div>
<div>
<i>(This post was also sent to the listserv on 20140908)</i><br>
</div>
<div><br></div>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/defcon-22-badge-challenge-walkthrough.html">DEFCON 22 Badge Challenge Walkthrough</a></h1>
      <p class="post-meta">Aug 20, 2014</p>
    </header>

    <article class="post-content">
      <p><img src="../images/w600_b7504d23e0b7ac4c424ee7e2d4c7ccba.jpg" alt="" /></p>

<p>Last week I was lucky enough to attend DEF CON for the first time and it did not disappoint. I’ve been out of commission for a few days with the con plague, but I’m feeling well enough now to try some blogging.</p>

<p>This isn’t the first write up to appear for the badge challenge. There’s the <a href="http://elegin.com/dc22/">winning team’s write up</a>, and runner up <a href="http://potatohatsecurity.tumblr.com/post/94565729529/defcon-22-badge-challenge-walkthrough">team potatoe sec’s</a> write up.</p>

<p>Why am I writing another one? Mostly it’s because I wanted to make sure I really understood the challenge and it’s solution. Additionally, I’ve noticed that the other two are either missing steps, or contain mistakes.</p>

<p>Let’s start with some background (you can skip this if you know about the badge challenge). DEFCON is a hacker conference, and hackers love puzzles. As a result, for the past 5 years (I think) <a href="https://twitter.com/1o57">1o57</a> has created a series of mind bending puzzles centered around the badges that DEFCON attendees get. It’s designed to be solved in 3 days and force people to interact and talk since there are multiple different types of badges.</p>

<p>My interest in the badge challenge first got piqued when I read through a DC21 walkthrough by <a href="http://elegin.com/dc21/">last year’s winning team</a>. I didn’t have a team or the willingness to miss all the other things going at DEFCON, so most of this walk through is based off of the two guides I mentioned above and a taxi ride with a member of the runner up team on the way to the airport, and the fine folks who hung around room 1057.</p>

<p>So, what follows is as legible and clear a walkthrough as I can manage. Please leave comments if you spot any mistakes, or feel I’ve explained something using an identity like 2+2=5.</p>

<p>If you want to follow along at home, you can download <a href="https://dl.dropboxusercontent.com/u/9393938/dc22-badge.zip">this archive</a> which contains as much of the badge challenge materials as I could manage to gather together. I’m still missing good photos of the front and back of all the badges, so if you have a one, please send it my way.</p>

<p>Final note: unless otherwise noted, all materials that follow (include the text) is released under a <a href="https://creativecommons.org/licenses/by/4.0/">creative commons attribution license</a></p>

<h1 id="lanyards">Lanyards</h1>

<p><img src="../images/w600_4e3fcbe36a0e25335a584131b800e7f9.jpg" style="height: auto;" /></p>

<p>(source: me)</p>

<p>This is the lanyard. There are 3 important parts to it.</p>

<p>First, there’s the Chinese numbers on the left, which you can read with this handy chart:</p>

<pre><code>一      1
二      2
三      3
四      4
五      5
六      6
七      7
八      8
九      9
十      10
</code></pre>

<p>Then, here are the weird symbols in the middle. Those are 4 digit numbers written using the Cistercian cipher from <a href="https://en.wikipedia.org/wiki/The_Ciphers_of_the_Monks">The Ciphers of the Monks</a>. You can decode them with:</p>

<p><img src="../images/w600_8961555d5c208beae2f558ecc3b78756.png" style="height: auto;" /></p>

<p>(source: <a href="http://www.davidaking.org/Ciphers.htm">The Ciphers of the Monks</a>)</p>

<p>The last part is a Korean word, saying either vertical or horizontal</p>

<p>수직 (sujig): vertical</p>

<p>수평 (supyeong): horizontal</p>

<p>Big thanks to 1o57, who showed up at one point with a full set of EIGHT lanyards, pictured below</p>

<p><img src="../images/w600_3bc1fe47e97da94a9d767b55aef501bb.jpg" style="height: auto;" /></p>

<p>(source: me)</p>

<p>It was pretty tough trying to gather all of them. Initially, the total number of lanyards was unclear.</p>

<p>We had a hell of a time trying to gather all of the lanyards before 1o57, since we assumed the numerals were unique and didn’t look for the other 4 and we thought there might be a lanyard with a Chinese 1 or 3. Also, we thought there might even be 9 lanyards, since there were 3 “suits” in the DEFCON iconography: (the happy skull and cross-bones, the rotary dial and the floppy disk).</p>

<p>Anyway, how do you decode these?? It turns out the Cistercian numbers are all in the range of upper case decimal ASCII, but without an ordering it’s gibberish.</p>

<p>First, you have to divide the lanyards into vertical and horizontal.</p>

<p>At one point LoST mentioned that he really loved weaving potholders as a kid, so clearly the lanyards need to be woven together in some fashion.</p>

<p>Next, it turns out that all of the lanyards are less than 15, so they can be written in binary using only 4 bits.</p>

<p>Horizontal</p>

<pre><code> 3 | 0 0 1 1
 4 | 0 1 0 0
 4 | 0 1 0 0
 9 | 1 0 0 1
</code></pre>

<p>Vertical</p>

<pre><code> 5 10 11 14
 ---------------
 1  0  1  0
 0  1  1  0
 1  0  0  1
 0  1  1  1
</code></pre>

<p>Finally, you might also have noticed that two of the lanyards start with the encoded version for 1057.</p>

<p>Now, you can combine all of this information to form the solution.</p>

<p>The Chinese numbers can be arranged in such a way that it forms a grid of all 1s, indicating which square on which lanyard should be read to form the final message.</p>

<p>The ordering starts with 11 on top of the 4 lanyard with 1057 on it.</p>

<p>From there, there is always only one lanyard that can be placed such that the grid of all 1s is formed.</p>

<p>Here’s the final weave:</p>

<p><img src="../images/w600_4ef366522f250e3e089ce13e1c7e8c44.jpg" alt="" /></p>

<p>(source: me)</p>

<p>Reading off the numbers and converting to ASCII you get:</p>

<pre><code> 1057DONTMISSTHEPOINTINCURIOUSCODES
</code></pre>

<p>or</p>

<pre><code> 1057 DONT MISS THE POINT IN CURIOUS CODES
</code></pre>

<p>There are 2 things you need to solve this puzzle:</p>

<ol>
  <li>1o57 told us to take this literally. EXTREMELY LITERALLY</li>
  <li>There are a whole bunch of new TLDs that got released recently…</li>
</ol>

<p>The solution is curious.codes, which leads to the following url:</p>

<p><a href="http://curious.codes/">http://curious.codes/</a></p>

<p>Which contains this link:</p>

<p><a href="http://curious.codes/NukeNukeMickeyLover">Did you get Nuke Nuke Mickey Lover yet?</a></p>

<p>Running file on it reveals that it’s a rar archive.</p>

<p>When you try to open it, you are asked for a password.</p>

<h2 id="program-code">Program Code</h2>

<p><img src="../images/w600_7d4ff5d7051d7b624a4620bbee4f38cb.jpg" alt="" /></p>

<p>(source: me)</p>

<p>In the DEFCON program under the section by 1o57, there’s a series of numbers transcribed below:</p>

<pre><code>07-21-18-03-18-05-05-22-01-03-14-20-18-06
10-22-25-25-21-18-25-03-12-02-08-19-22-01
17-12-02-08-05-16-14-25-25-22-01-20-15-08
07-17-02-01-07-15-18-17-08-03-18-17-16-08
07-17-02-10-01-07-21-18-10-02-02-17-06-07
21-18-12-15-18-18-05-17-02-06-10-57-10-57
</code></pre>

<p>Notice that all of the numbers are less than 26 (with the exception of 1o57’s signature at the end), so it’s time to convert these numbers to letters (1 -&gt; a, 2 -&gt; b, etc…), which results in:</p>

<pre><code> gurcreevacntrfjvyyuryclbhsvaqlbhepnyyvatohgqbagorqhcrqphgqbjagurjbbqfgurlorreqbfj
</code></pre>

<p>The thing I learned doing the challenges: Always try <a href="http://web.forret.com/tools/rot13.asp">rot13</a>.</p>

<pre><code> THEPERRINPAGESWILLHELPYOUFINDYOURCALLINGBUTDONTBEDUPEDCUTDOWNTHEWOODSTHEYBEERDOS
</code></pre>

<p>or</p>

<p>the perrin pages will help you find your calling but dont be duped cut down the woods they be erdos</p>

<p>Above some of page numbers in the program, there are numbers written. Here is the whole set:</p>

<p>number: 32 35 31 41 53 45 41 43 52 45 45 4D 41 54 45 21 21
page:    2  3  5  7 10 12 16 17 22 29 33 34 36 39 46 51 56</p>

<p>A bit of googling reveals a few things. There are  <a href="https://en.wikipedia.org/wiki/Perrin_number">Perrin Numbers</a>, which is a sequence defined by a recursive relation. The first few I grabbed from <a href="https://oeis.org/A001608">The Online Encyclopedia of Integer Sequences</a> (yes there is apparently such a thing)</p>

<pre><code> 3, 0, 2, 3, 2, 5, 5, 7, 10, 12, 17, 22, 29, 39, 51, 68
</code></pre>

<p>There are also things called <a href="https://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93Woods_number">Erdos-Woods numbers</a>. Again from <a href="https://oeis.org/A059756">OEIS A059756</a>:</p>

<pre><code> 16, 22, 34, 36, 46, 56
</code></pre>

<p>Let’s start by reducing the numbers to just Perrin numbers</p>

<pre><code>number: 32 35 31 41 53 45 43 52 45 54 45 21
page:    2  3  5  7 10 12 17 22 29 39 46 51
</code></pre>

<p>Next, let’s ‘cut down the woods’ by removing the Erdos Woods Numbers that aren’t also Perrin numbers (‘don’t be duped’). NOTE: This bit seems to have been missed by a the 2 other write-ups</p>

<pre><code> 16, 34, 36, 46, 56
</code></pre>

<p>.</p>

<pre><code>number: 32 35 31 41 53 45 43 52 45 54 21
page:    2  3  5  7 10 12 17 22 29 39 51
</code></pre>

<p>How do we decode 32 35 31 41 53 45 43 52 45 54 21? Well we saw earlier that one of the superscripts was 4D, so let’s go with <a href="http://www.asciitohex.com/">ASCII Hex</a></p>

<pre><code> 251ASECRET!
</code></pre>

<p>Hey, that’s a phone number (the hint being calling)</p>

<p>251-273-2738</p>

<p>If you call it, it will ring and ring and eventually you’ll get a recording of a piano, which you can listen to below:</p>

<p><a href="https://dl.dropboxusercontent.com/u/9393938/Piano.wav">piano.wav</a></p>

<p>Transcribing the notes we get:</p>

<pre><code>DGGBGBGGDGBDGDGBDDDBDGEGDGDGDBDDDBGDGBDDGEDGGDGBGDDDDBDDDDDBGGGGGBDDGGGEDGGDGBGGGBGDBGDGBGDBDGBDDGBGGGGBGDBGE
</code></pre>

<p>Hrmmm, not many Bs or Es… Let’s try removing those to see what it looks like</p>

<pre><code>DGG G GGDG DGDG DDD DG GDGDGD DDD GDG DDG DGGDG GDDDD DDDDD GGGGG DDGGG DGGDG GGG GD GDG GD DG DDG GGGG GD G
</code></pre>

<p>Since there’s only 2 letters it’s either binary or morse code. Let’s see what it looks like if the Ds are dashes and Gs are dots</p>

<pre><code>-.. . ..-. -.-. --- -. .-.-.- --- .-. --. -..-. .---- ----- ..... --... -..-. ... .- .-. .- -. --. .... .- .
</code></pre>

<p><img src="../images/w600_a29666610e75a4a870a8b583ab99896c.png" alt="" /></p>

<p>(source <a href="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/International_Morse_Code.svg">wikipedia</a>)</p>

<p>Putting that string into a <a href="http://morsecode.scphillips.com/jtranslator.html">morse code translator</a></p>

<p>We get:</p>

<pre><code> DEFCON.ORG/1057/SARANGHAE
</code></pre>

<p>SarangHae is Korean for I love you, so fixing the capitlization we get</p>

<p>https://www.defcon.org/1057/SarangHae/</p>

<p>Which reads:</p>

<pre><code>Who we gave free love to

at

1o57

Are you being served?
</code></pre>

<p>Alright, we have to pause on this track for now since we don’t know “Who we gave free love to” (googling reveals nothing), although <a href="https://en.wikipedia.org/wiki/Are_You_Being_Served%3F">Are you being served</a> is apparently a british TV Show.</p>

<p>This looks like it might be an email address though: SOMETHINGGOESHERE@1o57.uk</p>

<h1 id="badges">Badges</h1>

<p>There are quite a few cool things about the badge. It’s a fully programmable propeller including an astounding array of through holes for attaching your own electronics to. It also has a microusb port so it’s pretty easy to program from any computer.</p>

<p>According to the <a href="http://forums.parallax.com/showthread.php/156782-DEFCON-22-Badge-Code-Schematics-and-Information-Here!">parallax forums</a> there are 15 types of badges: 1 uber, 1 press, 1 speaker, 1 vendor, 1 goon, 1 contest, 1 artist and 8 human badges.</p>

<p>The differences between the human badges seem to be the following:</p>

<ol>
  <li>Different styles of writing Human across the bottom</li>
  <li>The pattern of pads just above the 8 LEDs</li>
  <li>The symbol and numbers on the back</li>
</ol>

<h2 id="badge-pads">Badge Pads</h2>

<p>One of the other weird features of the badges is that there are 2 different types of pads: circular and square. These are a binary encoding, where the circular pads are zeros and the square pads are ones. Writing this out from top to bottom and left to right gives us the following:</p>

<pre><code>0110
0101
0111
0110
0110
0110
0110
0101
0111
0111
0100
0110
1000
0101
1000
0011
</code></pre>

<p>Which we can turn into the following numbers</p>

<pre><code>6
5
7
6
6
6
6
5
7
7
4
6
8
5
8
3
</code></pre>

<p>Grouped in twos</p>

<pre><code> 65 76 66 65 77 46 85 83
</code></pre>

<p>and converted into ASCII (base 10) gives us:</p>

<pre><code> ALBAM.US
</code></pre>

<p>http://albam.us/</p>

<p>Which contains a bunch of weird looking text</p>

<pre><code> Bsz zfw vbffn up cbei dt la xvf op wtpskcuujjo? Rdjuk cybet uf
 evlc dbfovozivnj?

 T'fm mzu pqp ie zh b mduknz svnlfu...rivp D'm wpymjih ugalreye J
 npdgoidpm uidob qa flyhz mduknz wfcxt, mdlv uzxktff (svxi-tvr!) ryx tvyevpgy Z'x
 vbdf gvggier fjlz J tci dzlf ju do rivie. Yix xcbk yvs ksuu poivt aueys xpme? Zv
 MERWFZ ive da iudmys...J ptlcglp suwf op kjdnb zz ju zjxjo tzxyt ji b iqr bvqisf D gvgg
 lzvy nznfch vgrth...
</code></pre>

<p>This looks pretty garbled and it’s not a simple rot13 either. We will come back to this later once we have the key</p>

<h2 id="badge-output">Badge Output</h2>

<p>You can plug the DEFCON 22 badges into a computer and connect to it as a serial terminal. An easy way to do this is to install the <a href="http://forums.parallax.com/showthread.php/153921-Open-Propeller-Project-3-Propeller-IDE-V0.1-Package-Available?p=1283880&amp;viewfull=1#post1283880">PropellerIDE</a>. You can also connect to it using screen (or with busybox microcom I think). The baud rate for the connection is 57600</p>

<p>When you first connect the badge spits out a lot of nonsense like this:</p>

<pre><code>                MARRY AND REPRODUCE
                  NO IMAGINATION
      MARRY AND REPRODUCE
                NO IMAGINATION
                WATCH TV
                    NO INDEPENDENT THOUGHT
                  MARRY AND REPRODUCE
              WORK EIGHT HOURS
                EAT
                NO INDEPENDENT THOUGHT
    NO INDEPENDENT THOUGHT
      EAT
              BUY
            WORK EIGHT HOURS
            MARRY AND REPRODUCE
            BUY
              OBEY
            CONFORM
                WATCH TV
    CONSUME
                      DO NOT QUESTION AUTHORITY
MARRY AND REPRODUCE
              MARRY AND REPRODUCE
              BUY
  CONSUME
                        NO INDEPENDENT THOUGHT
  STAY ASLEEP
    OBEY
                      CONFORM
  WATCH TV
    EAT
              NO INDEPENDENT THOUGHT
WATCH TV
                NO IMAGINATION
                        CONSUME
                  CONSUME
CONSUME
                        EAT
                        BUY
CONSUME
                    BUY
                    NO IMAGINATION
                DO NOT QUESTION AUTHORITY
                  DO NOT QUESTION AUTHORITY
                EAT
  NO INDEPENDENT THOUGHT
                  WORK EIGHT HOURS
          NO IMAGINATION
WORK EIGHT HOURS
                      CONFORM
      SUBMIT
      DO NOT QUESTION AUTHORITY
                    BUY
  SUBMIT
                      OBEY
                        DO NOT QUESTION AUTHORITY
      STAY ASLEEP
                      CONFORM
                    NO INDEPENDENT THOUGHT
SUBMIT
        WATCH TV
          MARRY AND REPRODUCE
        CONSUME
            EAT
      MARRY AND REPRODUCE
  MARRY AND REPRODUCE
                  CONSUME
    STAY ASLEEP
    CONSUME
          STAY ASLEEP
              BUY
      NO IMAGINATION
EAT
                        SUBMIT
                MARRY AND REPRODUCE
                    SUBMIT
</code></pre>

<p>All of these are references to a movie called <a href="http://www.imdb.com/title/tt0096256/">They Live</a> but there’s nothing particularly interesting in this output. The REALLY interesting stuff happens when you push the buttons on the badge.</p>

<p>What buttons you ask? Well the E F C O in DEFCON along the bottom of the badge are capacitive buttons! Here’s the output for various combinations of button pushes</p>

<p>Pushing the C (0010)</p>

<pre><code>WELCOME TO DEFCON TWENTY TWO

COME AND PLAY A GAME WITH ME
</code></pre>

<p>Pushing the O (0001)</p>

<pre><code>WHERE TO BEGIN I KNOW FIND HAROLD
</code></pre>

<p>Pushing the F and O (0101)</p>

<pre><code>DEFCON DOT ORG SLASH ONE ZERO FIVE SEVEN SLASH I WONDER WHAT GOES HERE
</code></pre>

<p>Pushing the F C and O (0111)</p>

<pre><code>TRY THE FIRST HALF OF HIS PHONE NUMBER FOLLOWED BY HIS LAST NAME THEN THE SECOND HALF OF HIS NUMBER
</code></pre>

<p>Pushing the E (1000)</p>

<pre><code>ALBERT MIGHT BE ON THE PHONE WITH HAROLD SO IF ITS BUSY TRY BACK
</code></pre>

<p>Pushing the E and O (1001)</p>

<pre><code>WHITE LINES IN THE MIDDLE OF THE ROAD THATS THE WORST PLACE TO DRIVE
</code></pre>

<p>We need to find a Harold so we can use his phone number to build a url. <a href="https://twitter.com/1o57/status/497892280838025216">1o57 tweeted</a> a pretty huge hint about this part of the challenge:</p>

<p>[twitter url=”https://twitter.com/1o57/status/497892280838025216”]</p>

<pre><code>Major hint- this is Defcon 22- 22 is a Smith number.
</code></pre>

<p>Some googling reveals that a <a href="https://en.wikipedia.org/wiki/Smith_number">Smith Number</a> is a number where the sum of the digits are the equal to the sum of the digits of it’s prime factors. They were discovered by Albert Wilansky who noticed that his brother in law Harold Smith had a phone number with this property. Sounds promising!</p>

<p>His phone number from Wikipedia is 493-7775. Since there are a few possible ways to assemble this, you have to try a few URLs before you succeed with 493SMITH7773 resulting in:</p>

<p>https://www.defcon.org/1057/493SMITH7775/</p>

<p>There’s a few import things about this page. First the poem:</p>

<pre><code> Why be
 ye searchin' answers here?
 Oh are
 ye 1o57? The question
 queue be
 long...be ye not in despair,
 em for
 keepin' ye from spinnin' yer wheels they be.
</code></pre>

<p>Every second line can be written as letters</p>

<pre><code> YB
 OR
 QB
 M4
</code></pre>

<p>The second thing we have from this page is found in the source code as a comment</p>

<pre><code> YQESMJDOJOTM
</code></pre>

<p>This is a dead end for now, but don’t worry we will come back to it.</p>

<h2 id="badge-serial-numbers">Badge Serial Numbers</h2>

<p>Sadly, I don’t have pictures of the back of all of the badges, but here is mine:</p>

<p><img src="../images/human1.jpg" alt="" /></p>

<p>(source: me)</p>

<p>As you can see in the top right corner there’s a symbol. It’s either a Chinese or a Korean cardinal symbol. Here’s a table from <a href="http://potatohatsecurity.tumblr.com/post/94565729529/defcon-22-badge-challenge-walkthrough">Team PotatoSec</a></p>

<pre><code>Badge          Serial_1     Serial_2     Direction    Language
Human          55586753     01458934     West         Chinese
Human          25348567     02933985     East         Chinese
Human          30303031     38563748     South        Chinese
Human          56456387     01924834     North        Chinese
Human          32439751     50932487     North        Korean
Human          77798753     00478041     West         Korean
Human          81303557     85345360     South        Korean
Human          05978344     85758673     East         Korean
Artist         94841634     88172253     South        Chinese
Contest        09856563     23454311     East         Chinese
Vendor         05729856     57380999     North        Korean
Speaker        31337017     34029545     South        Chinese
Goon           94841634     88172253     South        Chinese
Press          06060606     00000000     South        Korean
Uber           37584205     23785634     North/South  Korean
</code></pre>

<p>We have to stop here again, because we don’t yet know what to do with these.</p>

<h1 id="xxx-codes">X.XX Codes</h1>

<p>At the conference, there were 2 large standing maps containing a series of numbers, and one large floor sticker also containing similar looking numbers. They were all in red, had a single Korean character above them and mostly followed the format of XX.XX</p>

<p><img src="../images/w600_8cef57dfb2f38c4389cc3eb31c21fcba.jpg" alt="" /></p>

<p>(source: me)</p>

<pre><code>전
1.23
2.23
3.23
3.13
3.22
2.22
0.00
6.22
3.01
1.02
0.20
0.03
0.10
</code></pre>

<p><img src="../images/w600_00f11ac70670518cf849c18b46145cf9.jpg" alt="" /></p>

<p>(source: me)</p>

<pre><code>화
0.12
0.01
0.20
6.23
3.02
4.01
8.01
6.02
3.12
9.02
5.22
4.02
2.11
</code></pre>

<p><img src="../images/w600_8cbabbc137de18db80124d4066d50cb9.jpg" alt="" /></p>

<p>(source: me)</p>

<pre><code>기
1.13
6.12
5.23
9.12
5.11
6.13
12.02
4.23
4.13
1.11
15.02
9.22
8.22
</code></pre>

<p>It turns out that the letters above spell telephone in Korean</p>

<p>Telephone: 전화기 (jeonhwa)</p>

<p>Now, in order to decode this mess, we first have to consider a phone keypad.</p>

<p><img src="../images/telephone_keypad.png" alt="" /></p>

<p>(source <a href="https://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Telephone-keypad2.svg">wikipedia</a>)</p>

<p>Now, all the numbers directly to the right are between 0 and 2, and all of the final digits are between 0 and 3. And we have a 3 by 4 grid… It’s a coordinate system for sure. Now the logical numbering would be from top to bottom and left to right… but that’s wrong. Here’s the numbered grid</p>

<p><img src="../images/w600_5eb228bfc9a0c6b6878b8f939f1d8831.png" alt="" /></p>

<p>(source: me and wikipedia)</p>

<p>The numbers to the left of the dot indicate how many times you should “press” the number, just like texting on a dumbphone.</p>

<p>Now the numbers decode to the following:</p>

<pre><code> 전 = DEFCON*ORG#10
 화 = 57#FISSILINGU
 기 = ALELUCIDATION
</code></pre>

<p>giving us DEFCON*ORG#1057#FISSILINGUALELUCIDATION</p>

<p>cleaned up and capitalized properly</p>

<p>https://www.defcon.org/1057/FissilingualElucidation/</p>

<p>Which contains</p>

<pre><code>Here, I wrote you a poem:
lorem ip
Lorem ipsum dolor si
Lorem ipsum do
Lorem ipsum dolor s
lorem ipsum ama
Lorem ipsum dolor sit amet
Lorem ipsum dolor sit ame

Lorem ipsum dolor sit
lorem ipsum ips
lorem ipsum lor
lorem ipsum lo
lorem ipsum lorem
lorem ipsum amat
Lorem Ipsum
</code></pre>

<p>So the key for this <strong>was</strong> to run the poem through google translate, which through some fluke or possibly easter egg would translate to this:</p>

<pre><code>Let's see if
We give
Pussycat Dolls
The Free Love
It can be used
Our goal is to ame

Our goal is to
vehicle dimensions
Free of pain
China, elsewhere
Free Internet
China loves
NATO
</code></pre>

<p>Sadly, this no longer works for me (<a href="http://krebsonsecurity.com/2014/08/lorem-ipsum-of-good-evil-google-china/">and others it seems</a>, so big thanks once again to <a href="http://potatohatsecurity.tumblr.com/post/94565729529/defcon-22-badge-challenge-walkthrough">Team PotatoSec for their write up</a></p>

<p>Anyway, with this information we can now complete the email address from earlier! Free love is is given to Pussycat Dolls</p>

<h1 id="email-to-pussycatdolls1o57uk">Email to pussycatdolls@1o57.uk</h1>

<pre><code> To: Manfred Manx &lt;f.alt.alt@gmail.com&gt;
 From: "1o57" &lt;pussycatdolls@1o57.uk&gt;
 Subject: Can you feel the love tonight?
 DEFCON.ORG/1057/ WHO DOES CHINA LOVE + Mickey's Key
</code></pre>

<p>Ok, well we don’t have Mickey’s Key yet, but the poem tells us that China loves NATO. Let’s continue on until we find Mickey’s key.</p>

<h1 id="cd">CD</h1>

<p>On the CD there’s a picture of a <a href="https://en.wikipedia.org/wiki/Cryptex">Cryptex</a> which contains an awful lot of letters and numbers… Perfect for use as key material! Here’s a picture</p>

<p><img src="../images/cryptex.jpg" alt="" /></p>

<p>(source: <a href="https://twitter.com/1o57/">1o57</a> I think)</p>

<p>And here’s the whole thing transcribed</p>

<pre><code>CIZDRURREGUI
DVTQIMUFNXNV
QOHULDILKCFO
PG2LTGEWPZRH
KNRIGZWIOTIK
BBVB4RCVARLU
YQESMJDOJOTM
</code></pre>

<p>HEY! That’s last line is the same as the one from 493SMITH7775 page!</p>

<p>It turns out that BBVB4RCVARLU is the passphrase for the block of text we saw earlier</p>

<pre><code>Bsz zfw vbffn up cbei dt la xvf op wtpskcuujjo? Rdjuk cybet uf
evlc dbfovozivnj?

T'fm mzu pqp ie zh b mduknz svnlfu...rivp D'm wpymjih ugalreye J
npdgoidpm uidob qa flyhz mduknz wfcxt, mdlv uzxktff (svxi-tvr!) ryx tvyevpgy Z'x
vbdf gvggier fjlz J tci dzlf ju do rivie. Yix xcbk yvs ksuu poivt aueys xpme? Zv
MERWFZ ive da iudmys...J ptlcglp suwf op kjdnb zz ju zjxjo tzxyt ji b iqr bvqisf D gvgg
lzvy nznfch vgrth...
</code></pre>

<p>One of the other teams thought this was an OTP, but in fact it’s just a straight up <a href="https://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher">Vigenere Cipher</a> which we can decode with <a href="http://rumkin.com/tools/cipher/vigenere.php">this handy tool</a></p>

<p>The decrypted text using a key of BBVB4RCVARLU results in</p>

<pre><code>Are you about to hang it up due to frustration? About ready to
call shenanigans?

I'll let you in on a little secret...when I'm feeling deflated I
sometimes think of funny little words, like sextile (rawr-rar!) and suddenly I'm
back feeling like I can dial it in again. Now what was that other funny word? It
REALLY had my number...I usually have to think of it eight times in a row before I feel
like myself again...
</code></pre>

<p>So, some googling leads us to discover that a <a href="https://en.wikipedia.org/wiki/Sextile">Sextile</a> looks a lot like an asterix! And there’s a reference to the word dial, so we’re looking for a funny word relating to telephones and dialpads or something.</p>

<p>That word is <a href="https://en.wiktionary.org/wiki/octothorpe">Octothorp</a>, but what to do with it? Well the poem does mention rar, so it’s got to be the password to the rar file from earlier. There’s also a reference to the number 8, which leads us to a password of</p>

<pre><code>OCTOTHORPOCTOTHORPOCTOTHORPOCTOTHORPOCTOTHORPOCTOTHORPOCTOTHORPOCTOTHORP
</code></pre>

<p>Time to decrypt that RAR! This gives us a folder containing 2 files. A copy of a song called <a href="https://en.wikipedia.org/wiki/Ostrich_%28Crack_the_Sky_album%29">The Box by Ostritch</a> and this image</p>

<p><img src="../images/nukenukemickeylover.jpg" alt="" /></p>

<p>(source <a href="https://twitter.com/1o57/">1o57</a>)</p>

<p>Well, that’s a pretty funny picture of <a href="https://en.wikipedia.org/wiki/Kim_Jong-un">Kim Jong-un</a> but notice that he has Mickey on his belly. Somehow this image will help us create Mickey’s key.</p>

<p>From earlier, we have a bunch of badges with North written in Korean and South written in Korean, which is probably why there’s a picture of the leader of North Korea and <a href="https://www.youtube.com/watch?v=9bZkp7q19f0">Psy</a> who’s from South Korea.</p>

<p>The epsilon symbol indicates that the serial numbers should be summed and the grumpy cat indicates we should concatenate those two in order to get the key. (Completely obvious I know)</p>

<p>The sum of the North Korean serials is:</p>

<p>32439751 + 50932487 + 05729856 + 57380999 = 146483093</p>

<p>The sum of the South Korean serials is:</p>

<p>81303557 + 85345360 + 06060606 + 00000000 = 172709523</p>

<p>To create Mickey’s key: 146483093172709523</p>

<h1 id="final-puzzle">Final Puzzle</h1>

<p>With the Mickey’s key (146483093172709523) and the answer to who China love’s (NATO) we can now finish the URL from earlier</p>

<p>DEFCON.ORG/1057/ WHO DOES CHINA LOVE + Mickey’s Key</p>

<p>= DEFCON.ORG/1057/NATO146483093172709523</p>

<p>https://www.defcon.org/1057/NATO146483093172709523</p>

<p>Well the page is called Almost There!, so we must be close! On that page there’s a silly moon gif and this:</p>

<p><img src="../images/ogham_message.jpg" alt="" /></p>

<p>(source <a href="https://twitter.com/1o57/">1o57</a>)</p>

<p>Now this turns out to be written in a language called <a href="https://en.wikipedia.org/wiki/Ogham">Ogham</a></p>

<p><img src="../images/ogham_decoder.png" alt="" /></p>

<p>(source: (source <a href="https://en.wikipedia.org/wiki/Ogham">wikipedia</a>)</p>

<p>Which gives us the following translation:</p>

<pre><code>I OFT CORRECT NGOUR GRAMMER
OR TELL NGOU TO NEE A NGSNGCHIATRIST
BUT THE FILEN ASSIFTNG TO NGIERCE
THE LAFD THAT CRAFEN FEST UNGOF
MIGHT LEAD NGOU TO DINCOER
FAME OS THE MOOF AT CODES THAT ARE CURIOUS
</code></pre>

<p>Alright, time to clean that up. There are a few substitutions we need to make</p>

<p>NG -&gt; Y</p>

<p>N  -&gt; S</p>

<p>S  -&gt; F</p>

<p>F  -&gt; N</p>

<p>Y  -&gt; P</p>

<p>But only sometimes, and sometimes more than once. For example I had to replace the 3 S’s in ASSISTNG, and then replace the 3rd F with an N. EDIT: turns out I transcribed the ogham wrong. Thanks Chris in the comments.</p>

<p>Also, Ogham doesn’t contain a letter for W, so we have to add it where it’s missing.</p>

<p>Here’s there cleaned up version:</p>

<pre><code>I WONT CORRECT YOUR GRAMMER
OR TELL YOU TO SEE A PSYCHIATRIST
BUT THE NILES AFFINTY TO PIERCE
THE LAND THAT CRANES NEST UPON
MIGHT LEAD YOU TO DISCOVER THE
NAME OF THE MOON AT CODES THAT ARE CURIOUS
</code></pre>

<p>There are a few references here that need to be gathered together to make sense. If you google niles pierce and crane, you get to a page about <a href="https://en.wikipedia.org/wiki/David_Hyde_Pierce">David Hyge Pierce</a> who played a psychiatrist on <a href="https://en.wikipedia.org/wiki/Frasier">Frasier</a>, so clearly we’re on the right track. A search for moon on that wikipedia page reveals that Niles’ wife in the show is <a href="https://en.wikipedia.org/wiki/Daphne_Moon">Daphne Moon</a>.</p>

<p>The line about “name of the moon at codes that are curious” seems to indicate an email address for the curious.codes domain.</p>

<p>“Name of the moon” hints that we want the actress that plays Moon who is <a href="https://en.wikipedia.org/wiki/Jane_Leeves">Jane Leeves</a></p>

<p>Now to send an email to:</p>

<p>janeleeves@curious.codes</p>

<h1 id="the-end">THE END?</h1>

<p>You will get a reply</p>

<pre><code>To: Manfred Manx &lt;f.alt.alt@gmail.com&gt;
From: "1o57" &lt;janeleeves@curious.codes&gt;
Subject: The end of the journey

+++
Well done!

Find 1o57, and hand him a note- written on blue paper....

On the note must be your name(s)  / team name - and this phrase:

perfer et obdura; dolor hic tibi proderit olim

Congratulations, you have earned a spot ... but I've said too much...

Include an email :)

----
</code></pre>

<p>Wooo! That’s the end! I hope you enjoyed the ride. If you’re the curious type (which I have no doubt is the case if you’ve made it this far), the latin translates to “Be patient and tough; someday this pain will be useful to you”</p>

<p>I’ve got to thank 1o57 for putting together this puzzle, <a href="http://elegin.com/dc22/">Elegin</a> and <a href="http://potatohatsecurity.tumblr.com/post/94565729529/defcon-22-badge-challenge-walkthrough">Team PotatoSec</a> without their guides I wouldn’t have been able to put this guide together.</p>

<h1 id="appendix">Appendix</h1>

<h2 id="dead-ends">Dead ends</h2>

<p>So there are a lot of dead ends in this quest. There were quite a few references to <a href="https://en.wikipedia.org/wiki/The_Last_Dragon">The Last Dragon</a> which didn’t lead anywhere.</p>

<p>There were lots of images included all over the place that didn’t lead anywhere (the mighty boosh moon, the popcorn gif, the lost boys movie poster)</p>

<p>There’s the song file that was included in the RAR archive.</p>

<p>If you go to https://www.defcon.org/1057/ directly, you’ll notice at the bottom that there’s some hidden text that reads “ Did you try 1057 yet?”</p>

<p>https://www.defcon.org/1057/1057/ seems to just be taunting you.</p>

<p>There also seems to be some variations in the style of pads on the front of the badges.</p>

<p>The badges include an IR transmitter and receiver, and goon badges can control the human badges. Likewise, the uber badge can <a href="https://www.youtube.com/watch?v=63K2S_hhFxk">control all the other badges</a>. Some folks on reddit <a href="http://www.reddit.com/r/Defcon/comments/2cwgnr/badge_hacking/cjke1eb">decoded the meaning of the flashing</a></p>

<p>The floor decal includes some bumps and such, but I don’t think it will decode to anything.</p>

<p>What’s the reference to “WHITE LINES IN THE MIDDLE OF THE ROAD THATS THE WORST PLACE TO DRIVE” in the badge?</p>

<p>There’s references to a bunch of different names and types in the badge firmware code:</p>

<pre><code>RayNelson
Test4
Greets
Detective
Scientist
Diver
Driver
Politician
Test3
Football
Mystery
</code></pre>

<p>These are just some of the dead ends I saw while putting this together.</p>

<h2 id="links">LINKS</h2>

<ul>
  <li>http://elegin.com/dc22/</li>
  <li>http://potatohatsecurity.tumblr.com/post/94565729529/defcon-22-badge-challenge-walkthrough</li>
  <li>
    <p>http://www.reddit.com/r/Defcon/comments/2cwgnr/badge_hacking/</p>
  </li>
  <li>http://albam.us/</li>
  <li>https://www.defcon.org/1057/FissilingualElucidation/</li>
  <li>https://www.defcon.org/1057/SarangHae/</li>
  <li>https://www.defcon.org/1057/493SMITH7775/</li>
  <li>https://www.defcon.org/1057/NATO146483093172709523</li>
  <li>http://curious.codes/</li>
</ul>

<p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/laser-cut-dominion-playing-field.html">Laser Cut Dominion Playing Field</a></h1>
      <p class="post-meta">Jun 15, 2014</p>
    </header>

    <article class="post-content">
      <p><a href="http://postachio-images.s3-website-us-east-1.amazonaws.com/f72f124e988b45f2872e5594525091e5/f6c3a7ded1001d1f6ac1a68d0ee1fed4/w600_6c173167f119c2f8fb3d649fa32fcbe7.jpg"><img src="../images/w600_6c173167f119c2f8fb3d649fa32fcbe7.jpg"></a><br>
<a href="http://postachio-images.s3-website-us-east-1.amazonaws.com/f72f124e988b45f2872e5594525091e5/f6c3a7ded1001d1f6ac1a68d0ee1fed4/w600_95f43c2cd779254f334290665aa68a61.jpg"><img src="../images/w600_95f43c2cd779254f334290665aa68a61.jpg"></a><br>
<a href="http://postachio-images.s3-website-us-east-1.amazonaws.com/f72f124e988b45f2872e5594525091e5/f6c3a7ded1001d1f6ac1a68d0ee1fed4/w600_324da83881e57af0bdbc19a9a37426be.jpg"><img src="../images/w600_324da83881e57af0bdbc19a9a37426be.jpg"></a><br>
It’s my girlfriend’s birthday this week, so I decided to try and improve our experience while playing dominion. If you’ve ever played before, you know that you need quite a bit of space to lay out the 15 (at least) cards. I found these designs on thingiverse for a pretty sweet looking board (which you can find here <a href="http://www.thingiverse.com/thing:19144">http://www.thingiverse.com/thing:19144</a>). I have access to a Epilog Zing laser cutter through <a href="http://artengine.ca/">Artengine</a>. It’s a pretty cool machine, with a bed size of 24" by 12" and it can cut through 1/4" MDF with no problem. The problem was that the 2 file formats included wouldn’t open in inkscape! I have to open them in order to ensure that the lines are 0.001" thick if I want a vector (cut), rather than a raster (engraving) to come out of the laser.<br>
First attempt to check the DXF files was with Inkscape, which complained about libxml2 missing when I tried using the Mac version. Next, I tried opening them in Autocad, Qcad, Inventor Fusion and DraftSight. Some of the programs worked, but I couldn’t set the line width that was used when creating a PDF. Finally, I gave up and set up Ubuntu 14.04 inside virtual box and installed Inkscape there. Success! I was able to create both SVG and PDF versions of the DXF files with the appropriate linewidths and document size.<br>
You can download the altered things here: <a href="http://www.thingiverse.com/thing:363426">http://www.thingiverse.com/thing:363426</a><br>
Big thanks to <a href="http://www.thingiverse.com/flomo/designs">flomo</a> for the initial designs.</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/a-noob's-attempt-at-the-2014-def-con-ctf-qualifiers.html">A Noob's attempt at the 2014 DEF CON CTF Qualifiers</a></h1>
      <p class="post-meta">Jun 1, 2014</p>
    </header>

    <article class="post-content">
      <p><img src="../images/w600_c29d8b9a02381da1d1e2a44176f43605.png" style="height: auto;"></p>
<p>By a happy coincidence, the DEF CON Capture the Flag Qualifiers were 2 weekends ago, the same weekend I was cooped up and doped up after my wisdom teeth removal. Figuring that I had nothing to loose by at least checking out the challenges. I signed myself up as team TTT</p>
<h2>What went down</h2>
<p>I managed to score myself 2 whole points! That’s almost 40 points behind the winner, but they had like way more people and I figure 2 points isn’t too shabby given that I was a single person, on codeine with about zero  relevant experience.</p>
<h3>Routarded</h3>
<p>The challenge consisted of a url that led to an unsecured router. Step 1 was to guess the default password. I tried admin / admin, admin / password and admin / (nothing) without any luck. This led me to http://www.routerpasswords.com/ which contains the default passwords for most routers. I figured I would work my way through the list. Thankfully I got lucky, the first new combo I treid was (blank) / admin. Now to look for the flags…</p>
<p>I poked around a bit, tried changing the password (it reset) and a few other things. I settled on the utitlies tab, which let you ping an ip address / host. It seemed like the output was exactly the output of ping on the command line… I wonder if they sanitize their input? Checking the HTML for the page shows that there’s a js function that’s called on form submission that strips characters. At first, I tried using curl to post data directly, but I couldn’t get the cookie jar working quite right. Instead, I just replaced the sanitization function with an identity function and tried submitting ‘; ls’ and voila! I got a directory listing! Oh hey, there’s a file called flag. Next up submitting ‘; cat ./flag’ and I had my first flag!</p>
<h3>Hackertool</h3>
<p>This next one asked you to submit the MD5 for a file and contained a link to a torrent. The file in the torrent was called EVERY_IP_ADDRESS.txt. My first guess was that I might be able to extract the hash directly from the torrent file, since I’m pretty sure you have to be able to compare the hash of the file you torrent to what it should be. Sadly I didn’t have any luck in this approach, probably due to my incompetence, but also because the spec uses SHA1…</p>
<p>Next thought, why not just generate every ip address myself? I wrote a ruby script, and then a go script to do this since it took nearly 40 minutes. </p>
<p><script src="https://gist.github.com/93458b0f4371f9b53c00.js"></script></p>
<p><script src="https://gist.github.com/f65b9f9f98d938c095ef.js"></script></p>
<p>After the game was over, I realized I didn’t actually have to create the 65GB txt file, I could have just fed the input into a MD5 hash function without finalizing the hash.</p>
<h3>3DTTT</h3>
<p>This one was fun! I banged my head against it for much too long though and I never got the point for it… You were given an address that you could telnet into a play a game of 3d tic tac toe against an AI. But you had to write a script to do it for you, since if you took too long, the connection closed.</p>
<p><script src="https://gist.github.com/824e016cddcd4fb87651.js"></script></p>
<p>Here’s the source for my bot… It doesn’t do especially well. Sometimes I’d get lucky and win more than I lost, but generally I’d loose too many and I’d have to start over.</p>
<p>Except once! One time I got lucky and I won a bunch of games in a row, but I didn’t have any code written to deal with a winning state, nor did I output the ordering that led to my miraculous bot wins… I felt like such an idiot</p>
<h3>Other challenges</h3>
<p>I tried a few other ones, but they were mostly incomprehensible to me. I need to know more about disassembling programs, which apparently means learning how to use a tool called Ida. Also, I should learn WAY more assembler. If you want to read some solutions to the other challenges, check out http://www.routards.org/2014/05/defcon-22-quals-dosfun4u.html</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/knitting-with-paracord.html">Knitting with Paracord!</a></h1>
      <p class="post-meta">May 7, 2014</p>
    </header>

    <article class="post-content">
      <p>My girlfriend recently finished sewing a bag for me, but it doesn’t have a strap yet!<br>
At first I tried making <a href="http://web.archive.org/web/20080214132055/http://www.slatts.fsworld.co.uk/slatts-knot.htm">Slatts Rescue Belt</a> by following this instructable on <a href="http://www.instructables.com/id/How-to-make-a-Paracord-Rescue-Belt/?ALLSTEPS">how to make a paracord rescue belt</a>, but I didn’t turn out the way I was hoping at all…<br>
Instead I figured I would try knitting the strap. I’ve never tried knitting paracord before, but the strap that I end up with would just as well as the other method since I end up with a flat strap that I can unravel quickly.<br>
If you want to learn how to knit check out this video:<br>
<iframe width="640" height="360" src="https://www.youtube.com/embed/nWJQvsZ6kT0?feature=oembed" frameborder="0" allowfullscreen></iframe></p>
<p>or this book: <a href="http://www.amazon.com/Knit-Step-Vikki-Haffenden/dp/0756692717/">Knit: Step by Step</a> It has lots of patterns and is pretty good if you like learning from books.<br>
The pattern I’m using is one row knit, one row purl and it’s 6 rows wide.</p>
<p><a href="http://postachio-images.s3-website-us-east-1.amazonaws.com/f72f124e988b45f2872e5594525091e5/b057fc6dd32669b49bfbe5187c748f09/w600_2b2e24c58a917dcad6d4a515ea6447e6.jpg"><img src="../images/w600_2b2e24c58a917dcad6d4a515ea6447e6.jpg"></a></p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/why-is-minecraft-fun%3F.html">Why is Minecraft fun?</a></h1>
      <p class="post-meta">Apr 19, 2014</p>
    </header>

    <article class="post-content">
      <p><a href="http://postachio-images.s3-website-us-east-1.amazonaws.com/f72f124e988b45f2872e5594525091e5/78a645de933f487f8fbca820da941b17/w600_367c1d07090c721f7fcf846f5936b25a.jpg"><img src="../images/w600_367c1d07090c721f7fcf846f5936b25a.jpg"></a><br>
When minecraft first came out, I thought I wouldn’t enjoy playing the game because I generally didn’t enjoy open ended games. I had tried playing World of Warcraft before, but the sheer number of options open to a new player put me off. When I was playing a video game, I wanted there to be a plot, with a goal or a story or something!</p>
<p>My attidude has shifted. Now I really enjoy the lack of structure in minecraft. The fact that it’s almost entirely open ended is pretty fun because I get to decide how to play whenever I play. Do I want to build something? Do I want to mine? Do I want to <a href="https://www.youtube.com/watch?v=7sNge0Ywz-M">construct a cpu inside of my game so I can program in my program</a>? <br>
But how do you make a game where you can do anything fun? With self imposted limit. I choose to play in survival mode rather than in creative mode. Why would I choose to make something harder? It’s because certain kinds of fun come from doing something hard. I think an integral part of play is the challenge.<br>
Minecraft illuminates how in all games, we impose limits on our selves. There’s a greater sense of accomplishment that comes from creating something where you had to forage all the materials your self. It's harder but it's more fun.<br>
My problem initially with minecraft was that making up your own story is hard but because it's hard it's more fun. It forces me to be more active and creative. And I like that</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/adventures-in-meditation.html">Adventures in meditation</a></h1>
      <p class="post-meta">Apr 5, 2014</p>
    </header>

    <article class="post-content">
      <p><img src="../images/w600_f52670010fd9b28251a6d0334ff8cdce.jpg" style="height: auto;" alt="http://images.fotocommunity.de/bilder/bach-fluss-see/see-teich-tuempel/meditation-c20eccba-2002-4e13-a226-5f2d811abe9c.jpg"><br>
The first time I meditated I was in high school and it was the night before a big exam. I don’t remember well how I found out about it (probably stumbleupon) but it became an important part of the exam preperation ritual for me. I’d lie in bed before going to sleep and count to 100. I stopped doing it on my own for a long time, although I did some small meditation sessions during the martial arts classes I took in high school and university.</p>
<p>Finally after getting fed up with my poor concentration at work, I decided that meditation would help me with focus. I also wanted to fix my posture and the good posture you need while meditating seemed like a good way to improve how I sat. This was last summer, but it turned out that sitting was really hard physically. That’s mostly because I was sitting wrong. I gave up for a few months until January of last year rolled around when I decided to make meditating regularly one of my goals. At first I just tried to do it on a best effort basis, with the goal of 3 or 4 times a week. That ended poorly. It was much to easy to find an excuse to not meditate today because I was too tired or too busy.</p>
<p>Finally I decided to give <a href="">beeminder</a> a try. If you’ve never heard of beeminder you should <a href="https://www.beeminder.com/overview">go read this page post about it</a> but basically it’s a goal tracking with teeth. You can track my progress <a href="https://www.beeminder.com/tahnok/goals/meditate">here</a> (for those of you who are that bored). Having actual money on the line helped a lot. I started meditating considerably more often, but it wasn’t for very long periods, and I struggled a lot with the actual focus bit. My technique at this point was the same one I started out with initially. Counting 100 breaths while sitting cross-legged somewhere dark and quiet.</p>
<p>After getting frustrated and de-railling from my beeminder a few times, I went into RESEARCH MODE and scoured the internet. Someone from the <a href="http://lesswrong.com/">Less Wrong IRC</a> finally suggested the <a href="http://aromeditation.org/">Aro Meditation course</a>. It’s basically a weekly email that walks you through meditation as if you were a complete beginner. I highly recommend it as a resource if you are just starting out. One of the most useful pieces of information that it introduced was <a href="http://aromeditation.org/how-to-sit-like-a-human.html">how to site like a human</a>. Right now I am on week 13 of the Aro course and I can comfortably meditate for 30 minutes and I aim for 6 times a week. It’s been a pretty successful course I think, but I am starting to run into a wall.</p>
<p>Currently when I meditate I find it super difficult to quiet my mind and I often end up following trains of thought for quite some time before I realize I’ve let my mind wander. I suspect that this is because I tried to start using the more advanced meditations techniques suggested in the Aro course before I had masted the easy ones. I’m also going to try an experiment and use the meditation technique described <a href="http://lesswrong.com/lw/5jj/meditation_insight_and_rationality_part_2_of_3/">here</a></p>
<p>Has meditation increased my concentration? I’m not entirely sure. I think it’s helped since I am finding it easier to focus for long-ish periods of time at work, but there are so many other factors that have changed since my initial decision that I can’t in good faith assign a high probability to meditation being the cause of this.</p>
<p>Will I keep meditating? Yes, I think I will. My goals have shifted a bit towards trying to become more mindful. The most valuable part of regular meditation has been to spend some serious time examing my own mind and my own thoughts. It’s kind of amazing how easy it is to avoid noticing how your brain actually works.</p>
<h2>Links</h2>
<ul>
<li><a href="https://www.beeminder.com/overview">Beeminder</a></li>
<li><a href="http://lesswrong.com/">Less Wrong</a></li>
<li><a href="http://aromeditation.org/">Aro meditation course</a></li>
</ul>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/how-to-host-your-own-email-on-a-$15-a-month-vps-(part-1).html">How to host your own email on a $15 a month vps (Part 1)</a></h1>
      <p class="post-meta">Mar 13, 2014</p>
    </header>

    <article class="post-content">
      <p><img src="../images/w600_21d5fc5797d1e3daa94cb208976a7ed8.jpg"></p>
<h1>Intro</h1>
<p>Every now and then my paranoia will take over and I’ll have an urge to break free of all 3rd parties that I depend on for my life on the internet. The last time it struck I decided to set up my own mail server. I’m going to walk you through what I did in order to get it working</p>
<h2>Important Acronym List (IAL)</h2>
<p><strong>Mail Transfer Agent: MTA</strong> This is the piece of software that handles incoming AND outgoing email. It receives email and then decides whether or not the message is for one of the users it knows about. It also decides who gets to send email and handles the delivery. In this tutorial we’re going to be using <em>Postfix</em>. The primary protocol that it speaks is SMTP</p>
<p><strong>Internet Message Access Protocol: IMAP</strong> By default, postfix will deliver email messages to a folder on the computer it’s running on and the only way to access the messages is when you are logged into that box. Since this is kind of impractical, there are a ton of protocols that have been created to make accessing email messages on a remote server easy. We’re going to use <em>dovecot</em> and IMAP (the protocol) to access our messages on the server. You can also get dovecot to work with POP3, but this guide doesn’t cover getting it set up since it’s an older and less useful protocol.</p>
<h2>What you need</h2>
<ul>
<li>A domain</li>
<li>I use <a href="https://www.namecheap.com/">namecheap</a>, but I hear good things about hover.com</li>
<li>A server</li>
<li>Preferably running debian or ubuntu. It will be helpful for preventing your mail from being marked as spam if you can set the <a href="https://en.wikipedia.org/wiki/Reverse_DNS_lookup">PTR / reverse DNS</a> for this server’s IP address. Sadly, this means that you probably can’t run this on a server you have in your house. If you need a server, I recommend <a href="http://buyvm.net/">BuyVM</a> since they have a $15 a year VPS that is perfectly adequate for this purpose.</li>
<li>An SSL certificate</li>
<li>You can get one for free from <a href="https://www.startssl.com/">StartSSL</a>
</li>
</ul>
<h2>Directions</h2>
<p>We’re mostly going to follow along with <a href="https://library.linode.com/email/postfix/postfix2.9.6-dovecot2.0.19-mysql">this guide from linode</a> except for the bits about MySQL [1]. I don’t understand why they would use MySQL here since it’s huge overkill unless you are dealing with a very large number of users. Instead of MySQL we’re going to use sqlite since it doesn’t require any processes to be running and eating up  the limited RAM available on the VPS.</p>
<p>You should follow the linode guide, except when they start talking about MySQL in which case you should come back here and see how to do it with SQLite. I’ve tried to match up the section/numbering so that it’s easy to figure out what to do differently.</p>
<h3>Installing Packages</h3>
<h4>Step 3</h4>
<p>Install these packages instead: <code>sudo apt-get install postfix postfix-mysql dovecot-core dovecot-imapd dovecot-lmtpd dovecot-sqlite sqlite</code></p>
<h4>Step 4 and 5</h4>
<p>Ignore</p>
<h3>SQLite instead of MySQL</h3>
<h4>Creating the database</h4>
<p>Download <a href="https://tahnok.me/cdn/mailbox.sqlite">this empty mailbox.sqlite</a> and put it in /etc/mailbox.sqlite or if you don’t trust me you can create you’re own with this schema:</p>
<p><script src="https://gist.github.com/tahnok/9718301.js"></script></p>
<p>This will create our tables</p>
<h4>Adding data</h4>
<p>You can add data to sqlite database with the same syntax as MySQL, but interact with the database using the <code>sqlite</code> or <code>sqlite3</code> command instead of mysql</p>
<h3>Postfix</h3>
<h4>Step 8</h4>
<p>Use the following instead of the one in the guide</p>
<p><script src="https://gist.github.com/tahnok/9718346.js"></script></p>
<p>We’ll be using these file names later as well</p>
<h4>Step 11</h4>
<p>Use this instead: nano /etc/postfix/sqlite-virtual-mailbox-domains.cf</p>
<h4>Step 12</h4>
<p><script src="https://gist.github.com/tahnok/9718380.js"></script></p>
<h4>Step 15</h4>
<p>You can test the set up by referencing your sqlite file instead of the mysql one. eg: postmap -q example.com sqlite:/etc/postfix/sqlite-virtual-mailbox-domains.cf</p>
<h4>Step 16</h4>
<p>Use this instead: nano /etc/postfix/sqlite-virtual-mailbox-maps.cf</p>
<h4>Step 17</h4>
<p><script src="https://gist.github.com/tahnok/9718421.js"></script></p>
<h4>Step 20</h4>
<p>Test with: postmap -q email1@example.com sqlite:/etc/postfix/sqlite-virtual-mailbox-maps.cf</p>
<h4>Step 21</h4>
<p>Use this instead: nano /etc/postfix/sqlite-virtual-alias-maps.cf</p>
<h4>Step 22</h4>
<p><script src="https://gist.github.com/9718440.js"></script></p>
<h4>Step 25</h4>
<p>Test with: postmap -q alias@example.com sqlite:/etc/postfix/sqlite-virtual-alias-maps.cf (You get the idea at this point I hope)</p>
<h4>Step 28</h4>
<p>I skipped this bit entirely without any ill effects</p>
<h3>Dovecot</h3>
<h4>Step 25 to Step 28</h4>
<p>Please use the following as the contents of <em>dovecot-sql.conf.ext</em></p>
<p><script src="https://gist.github.com/9718496.js"></script></p>
<h2>Conclusions</h2>
<p>If all went well then you should be able to connect successfully to your new email server with your email client to both receive and send email! It’s amazing, I know.</p>
<p>In the next installment I’ll walk through the process of signing your email with DKIM so that it won’t get marked as spam by pretty much every email provider in existence</p>
<h1>Sources</h1>
<p><a href="https://library.linode.com/email/postfix/postfix2.9.6-dovecot2.0.19-mysql">https://library.linode.com/email/postfix/postfix2.9.6-dovecot2.0.19-mysql</a></p>
<p><a href="http://sealedabstract.com/code/nsa-proof-your-e-mail-in-2-hours/">http://sealedabstract.com/code/nsa-proof-your-e-mail-in-2-hours/</a></p>
<p><a href="http://blog.codinghorror.com/so-youd-like-to-send-some-email-through-code/">http://blog.codinghorror.com/so-youd-like-to-send-some-email-through-code/</a></p>
<h1>Notes</h1>
<p>[1] I would have liked to reproduce most of the guide here since it IS published under a creative commons license, but it specifies no derivatives so I can’t actually modify it at all...</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/recover-password-on-a-headless-raspberry-pi.html">Recover password on a headless raspberry pi</a></h1>
      <p class="post-meta">Feb 26, 2014</p>
    </header>

    <article class="post-content">
      <p>I hate to admit it, but this is the second, or possibly third time that I’ve forgotten the password for my raspberry pi… I know that there are ways to <a href="https://raspberrypi.stackexchange.com/questions/4409/how-do-i-change-recover-my-password">reset</a> <a href="http://www.raspberrypi.org/phpBB3//viewtopic.php?f=47&amp;t=20397">my</a> <a href="http://rpi.tnet.com/project/faqs/resetpasswd">password</a>, but most of them assume that the pi in question is attached to a monitor, and my pi is <strong>several</strong> feet from the nearest monitor. So, without further ado here is how to reset the password on your raspberry pi.</p>
<p><img src="../images/w600_9479331e0638efd4742504d30fc3463c.jpg" alt="https://upload.wikimedia.org/wikipedia/commons/9/9c/Raspberry_Pi_Beta_Board.jpg" style="height: auto;"></p>
<h1>Requirements</h1>
<ul>
<li>SD Card reader</li>
<li>Computer capable of mounting an EXT4 partition</li>
</ul>
<h1>Instructions</h1>
<h2>Step 1</h2>
<p>Unplug your pi and remove the SD card</p>
<h2>Step 2</h2>
<p>Insert the SD card into a working computer that you have root access on</p>
<h2>Step 3</h2>
<p><strong>As root</strong> edit the following file on your SD card:</p>
<p><script src="https://gist.github.com/tahnok/9221769.js"></script></p>
<p>eg:</p>
<p><script src="https://gist.github.com/tahnok/9221780.js"></script></p>
<p>It’s very important that you DON’T EDIT THIS FILE ON YOUR OWN COMPUTER. Things could get messy if you do that</p>
<h2>Step 4</h2>
<p>Locate the line that starts with <strong>pi</strong> and replace the text between the first and second : with the output of the following command:</p>
<p><script src="https://gist.github.com/tahnok/9221808.js"></script></p>
<p>If you’re lazy you can use the following password hash: </p>
<p>$1$salty$SzJsU4qDcXp536Acnlp6I.</p>
<p>This will make the password for the pi user <strong>password</strong></p>
<h2>Step 5</h2>
<p>Eject the SD card and put it back in your pi and let it boot up.</p>
<h2>Step 6</h2>
<p>ssh into your pi and change the password to something else immediately. You can do this by running:</p>
<p><script src="https://gist.github.com/tahnok/9221850.js"></script></p>
<p>and giving it the password you generated in step 4</p>
<h2>Step 7</h2>
<p>REMEMBER THE NEW PASSWORD YOU JUST CREATED</p>
<h1>WTF did you make me do?</h1>
<p>Well first of all, how do you think your computer knows your password? It would be silly to have it stored somewhere as it is, since that would make it pretty easy for someone to steal if they ever had access to your machine. Instead the computer stores it as a <strong>hash</strong>. That is, it takes the password and mangles it in a specific and repeatable way to produce password hash. The key part of the mangling process is that it’s one way. There’s no figuring out what the input is if your just have the output. When you give your computer the password at login it hashes it to see if it matches the one it has stored. On linux, these password hashes are stored in /etc/shadow. What we’ve done is change the stored password hash to something we new.</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/filter-order-in-rails.html">Filter Order in Rails</a></h1>
      <p class="post-meta">Jan 29, 2014</p>
    </header>

    <article class="post-content">
      <p>Today I learned a lot about the way that Rails handles filters, that the methods: before_filter, around_filter and after_filter</p>
<p>I ran into a bug while working on the work to upgrade from rails 3.2 to 4.0 that I thought might be caused by a change in the way that filters are applied. Let’s see if you can guess what the following code would output.</p>
<p><strong>Sample Controller</strong><br>
<script src="https://gist.github.com/tahnok/8701664.js"></script> </p>
<p>I initially thought that filters were sorted into different queues, then processed in the order:</p>
<ol>
<li>Around</li>
<li>Before</li>
<li>After</li>
</ol>
<p>Asking around, some people thought that the ordering was:</p>
<ol>
<li>Before </li>
<li>Around</li>
<li>After </li>
</ol>
<p>(although that may have been because of the way I framed the question)</p>
<p>It turns out both are wrong.</p>
<p>The output of that controller would be this:<br>
<script src="https://gist.github.com/tahnok/8701702.js"></script></p>
<p><strong>Filters are processed in the order they are defined.</strong></p>
<p>You can see that this is the intended behaviour in this test for rails: filters_test.rb</p>
<p>That makes a lot of sense after some thought. You’d want to be able to have some before_filters run before around_filters, but before_filters to run inside of around_filters.</p>
<p><strong>tl;dr</strong> Filters are processed in the order they are defined</p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/hacking-the-budweiser-red-light.html">Hacking the budweiser red light</a></h1>
      <p class="post-meta">Nov 6, 2013</p>
    </header>

    <article class="post-content">
      <p><strong>edit</strong>: So it turns out that I found a bug in electric imp’s software. I shouldn’t have been able to register this particular imp to my own account. I will be posting an update soon on how to replace the ID chip that is included.</p>
<p>Shopify (where I work) happens to host the store that sells the Budweiser red light. In case you are not a hockey nut, the red light is that icon flashing red light they use to mark a goal. Budweiser sells these devices you can put up that will flash whenever a team scores a goal.</p>
<p><a href="http://postachio-images.s3-website-us-east-1.amazonaws.com/f72f124e988b45f2872e5594525091e5/936d92e927d0845b605602dada1bd94a/w600_fca884a2a78f6e87d0b8d69456e0b9be.jpg"><img src="../images/w600_fca884a2a78f6e87d0b8d69456e0b9be.jpg"></a></p>
<p>So it turns out that hacking the budweiser red light is remarkably simple. I don’t know if this trick works if you’ve already configured your light, because I tried hacking this one before setting up the way that budweiser recommends</p>
<p>At the heart of the red light is this little device called an electric imp. It looks like an SD card, but actually it’s a microcontroller + wifi chip. To program the electric imp you have to “blink up" which involves installing an app on your phone and using it to setup wifi and register it to your electric imp dev account.</p>
<p><a href="http://postachio-images.s3-website-us-east-1.amazonaws.com/f72f124e988b45f2872e5594525091e5/936d92e927d0845b605602dada1bd94a/w600_bb7ce4c568ac7765927d1f0cdac8fcee.png"><img src="../images/w600_bb7ce4c568ac7765927d1f0cdac8fcee.png"></a></p>
<p>I’m still exploring how the light works, but I got lucky and tried to toggle pin 9, which turns out is exactly the right pin to toggle! I can’t keep the light on, or turn the buzzer on myself, but setting the pin high for 2 seconds, then setting it low again causes the light to turn on and spin for a couple of seconds and buzz (unless you turned down the volume, which I did)</p>
<p>The electric imp consists of two pieces an “Agent" which lives in the cloud and can respond to http requests and a “device" which is the actual hardware that connects to the real world.</p>
<p>Here’s my code for the agent:</p>
<p><script src="https://gist.github.com/tahnok/7343067.js"></script> </p>
<p>And here’s my code for the device</p>
<p><script src="https://gist.github.com/tahnok/7343047.js"></script></p>
<p>I’m probably going to write a script to poke the url whenever something interesting happens, although I’m not sure what yet. I’m also not sure how sleeping on the device works… Will it keep polling forever? Do I have to wake it up?</p>
<p>Happy hacking! </p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/on-ownership.html">On Ownership</a></h1>
      <p class="post-meta">Oct 6, 2013</p>
    </header>

    <article class="post-content">
      <p>Recent revelations about the NSA, plus the shut down of my beloved google reader (RIP), have led me to become a lot more uncomfortable trusting my data to someone who isn't me. In light of that I've switched to using <a href="http://labs.bittorrent.com/experiments/sync.html">BitTorrent Sync</a> for my inter computer file syncing instead of dropbox. Setting things up was pretty simple. I have 3 nodes most of the time (my home server, my laptop and my phone) and I'm working on getting a 4th hosted in a VPS somewhere so I have some offsite backup.<br>
But the main point of this blog post is to talk about ownership. I don't like it when I don't have options as to who to trust with my data when doing something online. Email is a good example of a service that has LOTS of choices. I use gmail, but I don't have to if I don't want to. File syncing is another area that has lots of choice. I've mentioned Dropbox and Bit Torrent Sync, but there is also a ton more.<br>
Social networking is one area that does NOT have a lot of options. I mean, yes, there are quite a few social networks, but I can't pick one and expect it to be useful unless my friends are there. This isn't the case with email (it's completely inter-operable), or file syncing (it's mostly individuals or small teams). I like the idea of diaspora and tent.io, but I'm concerned that they aren't really seeing much adoption. How come? I wish I new the answer to this. Email is basically a social network, but it is designed form the ground up to be decentralized. Facebook is the opposite of that. Was it just a matter of timing? Email was created when computers were rare, so you couldn't really trust one to be up all the time somewhere else. When facebook was launched dependable servers were not amazing. Is it just a matter of interface? A website is sort of designed to come from a single server, but there's no reason that it couldn't be like blogging.<br>
Evernote was the cause of this post. I really really like the interface and the syncing abilities (although I REALLY wish they had a linux desktop client), but I dislike that the data has to live on Evernote's servers. I wish I could host the files on my own, or that I could encrypt my notes before they were sent to evernote. I don't mind loosing the ability to have images converted to text, and I don't think that evernote needs to index the notes to do search, since that could easily be done client side.    </p>

    </article>
  </div>
  
  <div class="post-container">
    <header class="post-header">
      <h1 class="post-title"><a href="/post/on-blogging.html">On Blogging</a></h1>
      <p class="post-meta">Oct 1, 2013</p>
    </header>

    <article class="post-content">
      <p>﻿<br>
So it's been quite some time since I've published anything substantive on the the web for others to read, so perhaps it is time to change that. I'd like to document my (very early) blogging setup.<br>
For a long time now, I've been playing with places to store information. In university I used <a href="http://moinmo.in/">moin moin</a> (a wiki) to take all my class notes and the setup worked pretty well. It worked regardless of internet connection and it was really easy to share with people. I also managed to find a handy little script + exention to take notes pretty effortlessly in emacs.<br>
But after I graduated I basically stopped using it. This was mostly due to the fact I no longer had take long form structued (and interlinked) notes.<br>
I've also played with simplenote, but the lack of a good linux client threw me off.<br>
At present, I am playing with evernote. I really like that they have clients for almost everything (DAMN YOU LACK OF LINUX SUPPORT!) but that is partly mitigated by two tools: <a href="http://geeknote.me/">geeknote</a>, and <a href="https://github.com/nvbn/everpad">everpad</a><br>
Geeknote is a command line interface for evernote and everpad adds a nice little tray icon to ubuntu and the ability to search notes from the dash. Geeknote lets me write <a href="https://gist.github.com/6772263">a little script</a> to blog from the command line.<br>
Another awesome tool for evernote I have discovered is called <a href="http://postach.io">Postach.io</a> which is allowing me to blog from evernote and the command line thanks to geeknote.<br>
Hopefully this is the first of more posts to come on my new blog</p>

    </article>
  </div>
  

  <p class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</a></p>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">(Fake) Markov Chains</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>(Fake) Markov Chains</li>
          <li><a href="mailto:tahnok@gmail.com">tahnok@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/tahnok">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">tahnok</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/tahnok">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">tahnok</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">WARNING: The content contained herein may or may not be sensical. Side effects may include laughter, anger, shallow thoughts, deep thoughts and blindness. Reader discretion is advised
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
