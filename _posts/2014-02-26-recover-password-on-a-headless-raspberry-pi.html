---
layout: post
title: Recover password on a headless raspberry pi
---

<p>I hate to admit it, but this is the second, or possibly third time that I’ve forgotten the password for my raspberry pi… I know that there are ways to <a href="https://raspberrypi.stackexchange.com/questions/4409/how-do-i-change-recover-my-password">reset</a> <a href="http://www.raspberrypi.org/phpBB3//viewtopic.php?f=47&amp;t=20397">my</a> <a href="http://rpi.tnet.com/project/faqs/resetpasswd">password</a>, but most of them assume that the pi in question is attached to a monitor, and my pi is <strong>several</strong> feet from the nearest monitor. So, without further ado here is how to reset the password on your raspberry pi.</p>
<p><img src="../images/w600_9479331e0638efd4742504d30fc3463c.jpg" alt="https://upload.wikimedia.org/wikipedia/commons/9/9c/Raspberry_Pi_Beta_Board.jpg" style="height: auto;"></p>
<h1>Requirements</h1>
<ul>
<li>SD Card reader</li>
<li>Computer capable of mounting an EXT4 partition</li>
</ul>
<h1>Instructions</h1>
<h2>Step 1</h2>
<p>Unplug your pi and remove the SD card</p>
<h2>Step 2</h2>
<p>Insert the SD card into a working computer that you have root access on</p>
<h2>Step 3</h2>
<p><strong>As root</strong> edit the following file on your SD card:</p>
<p><script src="https://gist.github.com/tahnok/9221769.js"></script></p>
<p>eg:</p>
<p><script src="https://gist.github.com/tahnok/9221780.js"></script></p>
<p>It’s very important that you DON’T EDIT THIS FILE ON YOUR OWN COMPUTER. Things could get messy if you do that</p>
<h2>Step 4</h2>
<p>Locate the line that starts with <strong>pi</strong> and replace the text between the first and second : with the output of the following command:</p>
<p><script src="https://gist.github.com/tahnok/9221808.js"></script></p>
<p>If you’re lazy you can use the following password hash: </p>
<p>$1$salty$SzJsU4qDcXp536Acnlp6I.</p>
<p>This will make the password for the pi user <strong>password</strong></p>
<h2>Step 5</h2>
<p>Eject the SD card and put it back in your pi and let it boot up.</p>
<h2>Step 6</h2>
<p>ssh into your pi and change the password to something else immediately. You can do this by running:</p>
<p><script src="https://gist.github.com/tahnok/9221850.js"></script></p>
<p>and giving it the password you generated in step 4</p>
<h2>Step 7</h2>
<p>REMEMBER THE NEW PASSWORD YOU JUST CREATED</p>
<h1>WTF did you make me do?</h1>
<p>Well first of all, how do you think your computer knows your password? It would be silly to have it stored somewhere as it is, since that would make it pretty easy for someone to steal if they ever had access to your machine. Instead the computer stores it as a <strong>hash</strong>. That is, it takes the password and mangles it in a specific and repeatable way to produce password hash. The key part of the mangling process is that it’s one way. There’s no figuring out what the input is if your just have the output. When you give your computer the password at login it hashes it to see if it matches the one it has stored. On linux, these password hashes are stored in /etc/shadow. What we’ve done is change the stored password hash to something we new.</p>
